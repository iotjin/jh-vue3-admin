import{d as T,aw as U,aH as B,aQ as I,r as i,R as S,a as x,c as q,C as n,w as p,f as a,j as t,t as d,k as K,ar as M,at as N,a9 as O,a6 as k,aF as P,b0 as j,aK as L}from"./index-79c64a0f.js";import{E as Q,a as D}from"./el-form-item-ebd3491e.js";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang-dab5e1cf.js";import{S as f}from"./index-d3004555.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import"./el-popper-21f2d10a.js";import"./el-scrollbar-5afda995.js";import"./refs-b81c3a08.js";function A(g){return["admin","editor","editor2"].indexOf(g.trim())>=0}const G={class:"login-container"},J={class:"title-container"},W={class:"title"},X={class:"svg-container"},Y={class:"svg-container"},Z={class:"tips"},ee={class:"tips"},se={class:"tips"},oe=T({__name:"index",setup(g){const{t:c,locale:V}=U(),v=B(),E=I(),u=i(!1),m=i(),w=i(),l=i("password"),r=i({username:"admin",password:"123456"}),$=i({username:[{required:!0,trigger:["blur","change"],validator:(e,s,o)=>{A(s)?o():o(new Error(c("login.usernameMsg")))}}],password:[{required:!0,trigger:["blur","change"],validator:(e,s,o)=>{s.length<6?o(new Error(c("login.passwordMsg"))):o()}}]});S(()=>V.value,e=>{k(()=>{m.value.resetFields()})});function b(){l.value==="password"?l.value="":l.value="password",k(()=>{w.value.focus()})}function h(){m.value.validate(e=>{e&&(u.value=!0,E.login(r.value).then(()=>{const s=v.query.redirect??"/";L.push({path:s,query:F(v.query)}).then(()=>{u.value=!1})}).catch(()=>{u.value=!1}).finally(()=>{}))})}const F=e=>Object.keys(e).reduce((s,o)=>(o!=="redirect"&&(s[o]=e[o]),s),{});return(e,s)=>{const o=P,y=D,R=j,C=Q;return x(),q("div",G,[n(C,{ref_key:"loginFormRef",ref:m,model:a(r),rules:a($),class:"login-form","auto-complete":"on","label-position":"left"},{default:p(()=>[t("div",J,[t("h3",W,d(e.$t("login.title")),1),n(H,{class:"text"})]),n(y,{prop:"username"},{default:p(()=>[t("span",X,[n(f,{"icon-class":"user"})]),n(o,{ref:"username",modelValue:a(r).username,"onUpdate:modelValue":s[0]||(s[0]=_=>a(r).username=_),placeholder:e.$t("login.username"),name:"username",type:"text",tabindex:"1","auto-complete":"on"},null,8,["modelValue","placeholder"])]),_:1}),n(y,{prop:"password"},{default:p(()=>[t("span",Y,[n(f,{"icon-class":"password"})]),(x(),K(o,{ref_key:"passwordRef",ref:w,key:a(l),modelValue:a(r).password,"onUpdate:modelValue":s[1]||(s[1]=_=>a(r).password=_),type:a(l),placeholder:e.$t("login.password"),name:"password",tabindex:"2","auto-complete":"on",onKeyup:M(h,["enter","native"])},null,8,["modelValue","type","placeholder","onKeyup"])),t("span",{class:"show-pwd",onClick:b},[n(f,{"icon-class":a(l)==="password"?"eye":"eye-open"},null,8,["icon-class"])])]),_:1}),n(R,{loading:a(u),type:"primary",style:{width:"100%","margin-bottom":"30px"},onClick:N(h,["prevent"])},{default:p(()=>[O(d(e.$t("login.login")),1)]),_:1},8,["loading","onClick"]),t("div",Z,[t("span",null,d(e.$t("login.textTip1")),1)]),t("div",ee,[t("span",null,d(e.$t("login.textTip2")),1)]),t("div",se,[t("span",null,d(e.$t("login.textTip3")),1)])]),_:1},8,["model","rules"])])}}});const me=z(oe,[["__scopeId","data-v-30d84fc7"]]);export{me as default};
