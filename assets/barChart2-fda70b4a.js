import{d as _,r as v,Q as w,R as y,o as x,S as C,b8 as b,a as E,c as D,C as d,w as c,j as m,a9 as k,n as L,D as S}from"./index-79c64a0f.js";import{E as A}from"./el-card-7ba2e39d.js";import"./el-tooltip-4ed993c7.js";import{E as R}from"./el-popper-21f2d10a.js";import{_ as z}from"./download-0dd8813b.js";import{i as B}from"./index-2a5e4828.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";const I={class:"card-header"},T=["id"],V=_({__name:"barChart2",props:{id:{required:!0,type:String,default:"myChart"},className:{type:String,default:""},width:{type:String,default:"100%"},height:{type:String,default:"200px"}},setup(r){const u=r,o=v(),s=w({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",show:!1,boundaryGap:[0,.01]},yAxis:{type:"category",axisLine:{show:!1},axisTick:{show:!1},data:["按月","按周","按天"]},series:[{name:"",type:"bar",barWidth:"20%",data:[45,30,60],label:{show:!0,position:"right",formatter:"{c} 元"},itemStyle:{borderRadius:[15,15,15,15],color:function(e){if(e.name==="按天")return"#00CA99";if(e.name==="按周")return"#3585F4";if(e.name==="按月")return"#FEC336"}}}]});y(()=>s,()=>{o.value.setOption(s)},{deep:!0}),x(()=>{h(),p()}),C(()=>{window.removeEventListener("resize",()=>l)});const h=()=>{o.value=b(B(document.getElementById(u.id))),o.value.setOption(s),window.addEventListener("resize",()=>l)},l=()=>{o.value.resize()},p=()=>{o.value&&(o.value.showLoading(),setTimeout(()=>{const t=f([{name:"按天",value:50},{name:"按周",value:100},{name:"按月",value:120}]);s.yAxis.data=t.xData.reverse(),s.series[0].data=t.seriesData.reverse(),o.value.hideLoading()},1e3))},f=e=>{var t=[],n=[];e.forEach(i=>{t.push(i.name),n.push(i.value)});var a={xData:t,seriesData:n};return a},g=()=>{const e=new Image;e.src=o.value.getDataURL({type:"png",pixelRatio:1,backgroundColor:"#fff"}),e.onload=()=>{const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");if(n){n.drawImage(e,0,0,e.width,e.height);const a=document.createElement("a");a.download="Chart.png",a.href=t.toDataURL("image/png",.9),document.body.appendChild(a),a.click(),a.remove()}}};return(e,t)=>{const n=z,a=R,i=A;return E(),D("div",null,[d(i,null,{header:c(()=>[m("div",I,[k(" 阶段统计 "),d(a,{effect:"dark",content:"点击试试下载",placement:"bottom"},{default:c(()=>[d(n,{class:"download",onClick:g})]),_:1})])]),default:c(()=>[m("div",{id:r.id,class:L(r.className),style:S({height:r.height,width:r.width})},null,14,T)]),_:1})])}}});const P=N(V,[["__scopeId","data-v-4f4f6d88"]]);export{P as default};
