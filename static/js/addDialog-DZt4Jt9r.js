import{b as v,j as X,w as K,I as W,J as Q,K as Z,R as ee,S as le,v as ae,c as te,d as oe}from"./element-plus-BsPKl9cL.js";import{g as F,a as de}from"./dict-O3nlc2b9.js";import{s as re}from"./user-BHOitnTt.js";import{d as ie,r as se,_ as w,$ as U,w as D,i as ne,o as u,c as S,W as o,P as r,a as ue,u as a,F as I,aa as x,O as p,T as f,U as Y,l as me}from"./@vue-Cr7qNLMI.js";import{_ as ge}from"./index-DSZN33lD.js";function pe(){return F({type:"dept"})}function fe(){return F({type:"level"})}function Ee(){return de({types:"dept,level"})}const be=/^1[3-9][0-9]{9}$/,De=/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/,ce={class:"bs-dialog input-width"},ye={key:0,class:"bs-dialog-footer"},Ve=ie({__name:"addDialog",props:{isShow:{type:Boolean,default:!1},dialogType:{type:String,default:"add"},dialogData:{type:Object,default:()=>({})},title:{type:String,default:""}},emits:["update:isShow","closed","success"],setup(m,{emit:B}){const _=B,g=m,c=se(),i=w({dialogTitle:"提示",isShowDialog:!1,dialogSubmitBtnLoading:!1,dialogIsLook:!1,initFormData:{},dialogFormData:{id:"",name:"",loginName:"",userNumber:"",userExpiryDate:"",deptId:"",status:"",notes:"",phone:"",age:"",money:"",level:"",loginDate:"",loginIp:"",createDate:"",updateDate:"",updateBy:""}}),{dialogTitle:L,isShowDialog:y,dialogSubmitBtnLoading:q,dialogIsLook:O,dialogFormData:t}=U(i),b=w({deptOptions:[],levelOptions:[]}),{deptOptions:R,levelOptions:H}=U(b),J=w({name:[{required:!0,message:"请输入",trigger:["blur","change"]},{min:1,max:10,message:"10字符以内",trigger:["blur","change"]}],loginName:[{required:!0,message:"请输入",trigger:["blur","change"]},{min:1,max:10,message:"10字符以内",trigger:["blur","change"]}],userNumber:[{required:!0,message:"请输入",trigger:["blur","change"]},{type:"number",message:"请输入8位数字1",trigger:["blur","change"]},{validator:(d,e,s)=>{e?(e.toString().length!==8&&s(new Error("请输入8位数字")),s()):s(new Error("请输入"))},trigger:["blur","change"]}],userExpiryDate:[{required:!0,message:"请选择",trigger:["blur","change"]}],deptId:[{required:!0,message:"请选择",trigger:["blur","change"]}],status:[{required:!0,message:"请选择",trigger:["blur","change"]}],phone:[{required:!0,message:"请输入",trigger:"blur"},{pattern:be,message:"请输入正确手机号"}],level:[{required:!0,message:"请选择",trigger:["blur","change"]}],notes:[{required:!1,message:"请输入",trigger:["blur","change"]},{min:1,max:100,message:"100字符以内",trigger:["blur","change"]}],age:[{required:!1,message:"请输入",trigger:"blur"},{pattern:/^[1-9]\d*$/,message:"仅支持录入正整数"}],money:[{required:!1,message:"请输入",trigger:"blur"},{pattern:De,message:"请输入最多两位小数金额"}]});D(()=>g.isShow,d=>{i.isShowDialog=d}),D(()=>i.isShowDialog,d=>{_("update:isShow",d)}),D(()=>g.title,d=>{i.dialogTitle=d.length?d:i.dialogTitle}),D(()=>g.dialogData,d=>{g.dialogType==="add"?i.dialogFormData=JSON.parse(JSON.stringify(i.initFormData)):i.dialogFormData=JSON.parse(JSON.stringify(d))}),D(()=>g.dialogType,d=>{i.dialogTitle=g.title||(d==="add"?"新增":d==="edit"?"编辑":d==="look"?"查看":i.dialogTitle),i.dialogIsLook=d==="look"},{immediate:!0}),ne(()=>{i.initFormData=JSON.parse(JSON.stringify(i.dialogFormData)),N(),E()});const N=()=>{pe().then(d=>{d.code===2e4?b.deptOptions=d.data:v.warning(d.msg)})},E=()=>{fe().then(d=>{d.code===2e4?b.levelOptions=d.data:v.warning(d.msg)})},C=()=>{g.dialogType==="add"&&c.value.clearValidate(),b.deptOptions.length||N(),b.levelOptions.length||E()},$=()=>{i.dialogIsLook||c.value.resetFields(),_("closed",{})},j=()=>{c.value.validate(d=>{d&&P()})},P=()=>{const d=JSON.parse(JSON.stringify(i.dialogFormData));console.log(JSON.stringify(d));const e=g.dialogType==="add"?"新增成功!":"编辑成功!";i.dialogSubmitBtnLoading=!0,re(d).then(s=>{i.dialogSubmitBtnLoading=!1,s.code===2e4?(v.success(e),i.isShowDialog=!1,_("success",{})):v.warning(s.msg)}).catch(s=>{i.dialogSubmitBtnLoading=!1,console.log(JSON.stringify(s))})};return(d,e)=>{const s=X,n=K,h=W,k=Q,V=Z,M=ee,A=le,G=ae,T=te,z=oe;return u(),S("div",null,[o(z,{title:a(L),modelValue:a(y),"onUpdate:modelValue":e[18]||(e[18]=l=>me(y)?y.value=l:null),top:"8vh",width:"55%","close-on-click-modal":!1,onOpened:C,onClosed:$},{default:r(()=>[ue("div",ce,[o(G,{ref_key:"dialogFormRef",ref:c,model:a(t),inline:!0,rules:a(J),"label-width":"120px",disabled:a(O)},{default:r(()=>[o(n,{label:"姓名:",prop:"name"},{default:r(()=>[o(s,{modelValue:a(t).name,"onUpdate:modelValue":e[0]||(e[0]=l=>a(t).name=l),placeholder:"请输入姓名",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"用户名:",prop:"loginName"},{default:r(()=>[o(s,{modelValue:a(t).loginName,"onUpdate:modelValue":e[1]||(e[1]=l=>a(t).loginName=l),disabled:m.dialogType!=="add",placeholder:"请输入用户名",clearable:""},null,8,["modelValue","disabled"])]),_:1}),o(n,{label:"员工编号:",prop:"userNumber"},{default:r(()=>[o(s,{modelValue:a(t).userNumber,"onUpdate:modelValue":e[2]||(e[2]=l=>a(t).userNumber=l),modelModifiers:{number:!0},disabled:m.dialogType!=="add",placeholder:"请输入员工编号",clearable:""},null,8,["modelValue","disabled"])]),_:1}),o(n,{label:"部门:",prop:"deptId"},{default:r(()=>[o(k,{modelValue:a(t).deptId,"onUpdate:modelValue":e[3]||(e[3]=l=>a(t).deptId=l),placeholder:"请选择部门",filterable:"",clearable:""},{default:r(()=>[(u(!0),S(I,null,x(a(R),l=>(u(),p(h,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"用户有效期至:",prop:"userExpiryDate"},{default:r(()=>[o(V,{modelValue:a(t).userExpiryDate,"onUpdate:modelValue":e[4]||(e[4]=l=>a(t).userExpiryDate=l),type:"date",placeholder:"选择日期","value-format":"YYYY-MM-DD",format:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),o(n,{label:"手机号:",prop:"phone"},{default:r(()=>[o(s,{modelValue:a(t).phone,"onUpdate:modelValue":e[5]||(e[5]=l=>a(t).phone=l),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"级别:",prop:"level"},{default:r(()=>[o(k,{modelValue:a(t).level,"onUpdate:modelValue":e[6]||(e[6]=l=>a(t).level=l),placeholder:"请选择级别",filterable:"",clearable:""},{default:r(()=>[(u(!0),S(I,null,x(a(H),l=>(u(),p(h,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"补助:",prop:"money"},{default:r(()=>[o(s,{modelValue:a(t).money,"onUpdate:modelValue":e[7]||(e[7]=l=>a(t).money=l),placeholder:"请输入金额",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"年龄:",prop:"age"},{default:r(()=>[o(s,{modelValue:a(t).age,"onUpdate:modelValue":e[8]||(e[8]=l=>a(t).age=l),placeholder:"请输入年龄",clearable:""},null,8,["modelValue"])]),_:1}),m.dialogType!=="add"?(u(),p(n,{key:0,label:"登录时间:",prop:"loginDate"},{default:r(()=>[o(V,{modelValue:a(t).loginDate,"onUpdate:modelValue":e[9]||(e[9]=l=>a(t).loginDate=l),disabled:"",type:"datetime",placeholder:"选择日期","value-format":"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})):f("",!0),m.dialogType!=="add"?(u(),p(n,{key:1,label:"登录IP:",prop:"loginIp"},{default:r(()=>[o(s,{modelValue:a(t).loginIp,"onUpdate:modelValue":e[10]||(e[10]=l=>a(t).loginIp=l),disabled:""},null,8,["modelValue"])]),_:1})):f("",!0),m.dialogType!=="add"?(u(),p(n,{key:2,label:"创建时间:",prop:"createDate"},{default:r(()=>[o(V,{modelValue:a(t).createDate,"onUpdate:modelValue":e[11]||(e[11]=l=>a(t).createDate=l),disabled:"",type:"datetime",placeholder:"选择日期","value-format":"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})):f("",!0),m.dialogType!=="add"?(u(),p(n,{key:3,label:"更新时间:",prop:"updateDate"},{default:r(()=>[o(V,{modelValue:a(t).updateDate,"onUpdate:modelValue":e[12]||(e[12]=l=>a(t).updateDate=l),disabled:"",type:"datetime",placeholder:"选择日期","value-format":"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})):f("",!0),m.dialogType!=="add"?(u(),p(n,{key:4,label:"操作人:",prop:"updateBy"},{default:r(()=>[o(s,{modelValue:a(t).updateBy,"onUpdate:modelValue":e[13]||(e[13]=l=>a(t).updateBy=l),disabled:""},null,8,["modelValue"])]),_:1})):f("",!0),o(n,{label:"备注:",prop:"notes"},{default:r(()=>[o(s,{modelValue:a(t).notes,"onUpdate:modelValue":e[14]||(e[14]=l=>a(t).notes=l),autosize:{minRows:5,maxRows:5},placeholder:"请输入备注",type:"textarea",maxlength:"100","show-word-limit":"",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"状态:",prop:"status"},{default:r(()=>[o(A,{modelValue:a(t).status,"onUpdate:modelValue":e[15]||(e[15]=l=>a(t).status=l)},{default:r(()=>[o(M,{value:"1"},{default:r(()=>[Y("启用")]),_:1}),o(M,{value:"0"},{default:r(()=>[Y("停用")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules","disabled"]),a(O)?f("",!0):(u(),S("div",ye,[o(T,{onClick:e[16]||(e[16]=l=>y.value=!1)},{default:r(()=>[Y(" 取消 ")]),_:1}),o(T,{loading:a(q),type:"primary",onClick:e[17]||(e[17]=l=>j())},{default:r(()=>[Y(" 保存 ")]),_:1},8,["loading"])]))])]),_:1},8,["title","modelValue"])])}}}),ve=ge(Ve,[["__scopeId","data-v-51a08fe6"]]),he=Object.freeze(Object.defineProperty({__proto__:null,default:ve},Symbol.toStringTag,{value:"Module"}));export{ve as A,he as a,Ee as g};
