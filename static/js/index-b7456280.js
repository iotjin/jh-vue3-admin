import{b as h,a as X,j as Y,w as G,c as H,v as Z,L as ee,M as te,P as ae,x as oe,y as le,N as ie}from"./element-plus-d9b7f19c.js";import{_ as se}from"./index-89e9302f.js";import{d as ne,r as re,$ as N,a0 as T,i as de,ao as ce,o as w,c as pe,X as a,Q as i,u as l,af as me,V as E,a as c,R as _,P as R,W as _e,Y as ge,l as ue,bh as fe,bf as ye}from"./@vue-9ba90ccc.js";import{b as be,d as he}from"./dict-d96e919e.js";import we from"./dictDetails-7a2e18b2.js";import{_ as ve}from"./addTypeDialog.vuevuetypescriptsetuptruelang-3c82d990.js";import{_ as Se}from"./index-fed18894.js";import"./lodash-es-d29772ce.js";import"./async-validator-dee29e8b.js";import"./@vueuse-f39d50a6.js";import"./dayjs-bff41acc.js";import"./@intlify-767c1c72.js";import"./source-map-7d7e1c08.js";import"./@element-plus-c398101b.js";import"./@ctrl-f8748455.js";import"./@sxzz-c75af06c.js";import"./escape-html-849d0975.js";import"./normalize-wheel-es-ed76fb12.js";import"./addItemDialog.vuevuetypescriptsetuptruelang-23bb7165.js";import"./pinia-87603f94.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-c8173181.js";import"./crypto-js-49b96eff.js";import"./axios-4a70c6fc.js";import"./js-cookie-edb2da2a.js";import"./vue-i18n-1488b031.js";import"./vue-ef783175.js";import"./nprogress-84d8f06a.js";import"./mockjs-8d5feca7.js";import"./vite-plugin-mock-5220d95c.js";import"./path-to-regexp-36ea9d8d.js";const J=g=>(fe("data-v-cf78ff9c"),g=g(),ye(),g),De={class:"bs-page-body"},xe=J(()=>c("div",{class:"mt10"},null,-1)),ke={class:"bs-page-table",style:{padding:"0px"}},Ce={class:"bs-table-btns"},Ne=["onClick"],Te={style:{color:"#00a0e9","text-decoration":"underline"}},Ee=J(()=>c("div",{slot:"header"},[c("span",{style:{"font-size":"20px"}},"字典详情")],-1)),Re="total, sizes, prev, pager, next",Je=ne({__name:"index",setup(g){const O=re(),s=N({tableTotal:0,tableLoading:!1,tableData:[],queryParams:{page:1,limit:20,keyword:""},selectedRows:[],selectedData:{}}),{tableTotal:v,tableLoading:L,tableData:P,queryParams:r,selectedRows:Oe,selectedData:B}=T(s),n=N({isShowDialog:!1,dialogType:"",dialogFormData:{}}),{isShowDialog:f,dialogType:F,dialogFormData:V}=T(n);de(()=>{m()});const m=()=>{var t=JSON.parse(JSON.stringify(s.queryParams));console.log(JSON.stringify(t)),s.tableLoading=!0,be(t).then(e=>{s.tableLoading=!1,e.code===2e4?(s.tableData=e.data,s.tableTotal=e.total):h.warning(e.msg)}).catch(e=>{s.tableLoading=!1,console.log(JSON.stringify(e))})},S=()=>{s.queryParams.page=1,m()},D=t=>t.builtin==="0",q=(t,e)=>{s.selectedData=JSON.parse(JSON.stringify(t))},I=()=>{n.dialogType="add",n.dialogFormData={},n.isShowDialog=!0},$=t=>{n.dialogType="edit",n.dialogFormData=JSON.parse(JSON.stringify(t)),n.isShowDialog=!0},z=t=>{n.dialogType="look",n.dialogFormData=JSON.parse(JSON.stringify(t)),n.isShowDialog=!0},A=t=>{var e="";t&&t.id?e=t.name:e=s.selectedRows.map(d=>d.name).join(","),X.confirm(`确定要删除字典类型 ${e} ，此操作将永久删除, 是否继续?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var d={ids:[]};if(t&&t.id)d.ids=[t.id];else{const u=s.selectedRows.map(p=>p.id);d.ids=u}M(d)})},M=t=>{console.log(JSON.stringify(t)),he(t).then(e=>{e.code===2e4?(h.success("删除成功!"),m()):h.warning(e.msg)})};return(t,e)=>{const d=Y,u=G,p=H,U=Z,y=ee,K=te,j=se,x=ae,k=oe,Q=le,b=ce("hasPerm"),W=ie;return w(),pe("div",De,[xe,a(Q,{gutter:10},{default:i(()=>[a(k,{span:8},{default:i(()=>[a(x,null,{default:i(()=>[a(U,{inline:!0,model:l(r),class:"bs-form-search"},{default:i(()=>[a(u,{style:{"margin-right":"25px"},class:"search-input"},{default:i(()=>[a(d,{modelValue:l(r).keyword,"onUpdate:modelValue":e[0]||(e[0]=o=>l(r).keyword=o),maxlength:"20",placeholder:"字典名称 / 类型",clearable:"",onKeyup:me(S,["enter","native"])},null,8,["modelValue","onKeyup"])]),_:1}),a(u,null,{default:i(()=>[a(p,{class:"bs-form-btn",style:{"margin-left":"0px"},type:"primary",onClick:S},{default:i(()=>[E("查询")]),_:1})]),_:1})]),_:1},8,["model"]),c("div",ke,[c("div",Ce,[_((w(),R(p,{type:"primary",icon:"i-ep-plus",onClick:I},{default:i(()=>[E(" 新增 ")]),_:1})),[[b,["dict-type-add"]]])]),_((w(),R(K,{ref_key:"tableRef",ref:O,class:"bs-table table-class","highlight-current-row":"",data:l(P),"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"},onCurrentChange:q},{default:i(()=>[a(y,{label:"字典名称",width:""},{default:i(o=>[c("span",{onClick:C=>z(o.row)},[c("a",Te,_e(o.row.name),1)],8,Ne)]),_:1}),a(y,{prop:"type",label:"字典类型",width:""}),a(y,{fixed:"right",label:"操作",width:"120"},{default:i(o=>[_(a(p,{size:"small",icon:"i-ep-edit",disabled:!D(o.row),onClick:C=>$(o.row)},null,8,["disabled","onClick"]),[[b,["dict-type-edit"]]]),_(a(p,{size:"small",icon:"i-ep-delete",type:"danger",disabled:!D(o.row),onClick:C=>A(o.row)},null,8,["disabled","onClick"]),[[b,["dict-type-delete"]]])]),_:1})]),_:1},8,["data"])),[[W,l(L)]]),_(a(j,{layout:Re,total:l(v),page:l(r).page,"onUpdate:page":e[1]||(e[1]=o=>l(r).page=o),limit:l(r).limit,"onUpdate:limit":e[2]||(e[2]=o=>l(r).limit=o),onPagination:m},null,8,["total","page","limit"]),[[ge,l(v)>0]])])]),_:1})]),_:1}),a(k,{span:16},{default:i(()=>[a(x,null,{default:i(()=>[Ee,a(we,{data:l(B)},null,8,["data"])]),_:1})]),_:1})]),_:1}),a(ve,{"dialog-type":l(F),"is-show":l(f),"onUpdate:isShow":e[3]||(e[3]=o=>ue(f)?f.value=o:null),"dialog-data":l(V),onSuccess:m},null,8,["dialog-type","is-show","dialog-data"])])}}});const ct=Se(Je,[["__scopeId","data-v-cf78ff9c"]]);export{ct as default};
