import{b as v,j as U,w as C,R as J,S as q,v as $,c as j,d as G}from"./element-plus-BsPKl9cL.js";import{f as M}from"./dict-iT3gdSYy.js";import{d as P,r as W,_ as w,$ as z,w as m,o as c,c as D,W as a,P as s,a as A,u as o,O as H,U as f,T as k,l as K}from"./@vue-Cr7qNLMI.js";const Q={class:"bs-dialog"},X={key:0,slot:"footer",class:"bs-dialog-footer"},le=P({__name:"addItemDialog",props:{isShow:{type:Boolean,default:!1},dialogType:{type:String,default:"add"},dialogData:{type:Object,default:()=>({})},title:{type:String,default:""}},emits:["update:isShow","closed","success"],setup(_,{emit:T}){const b=T,r=_,g=W(),t=w({dialogTitle:"提示",isShowDialog:!1,dialogSubmitBtnLoading:!1,dialogIsLook:!1,dialogFormData:{id:"",label:"",value:"",sort:"",type:"",builtin:"0",notes:""}}),{dialogTitle:B,isShowDialog:p,dialogSubmitBtnLoading:F,dialogIsLook:V,dialogFormData:d}=z(t),N=w({label:[{required:!0,message:"请输入",trigger:["blur"]},{min:1,max:32,message:"32字符以内",trigger:["blur"]}],value:[{required:!0,message:"请输入",trigger:["blur"]},{min:1,max:32,message:"32字符以内",trigger:["blur"]}],sort:[{required:!0,message:"请输入正确的排序号",trigger:["blur"]},{pattern:/^[1-9]\d{0,2}$/,message:"请输入0-999之间的正整数",trigger:["blur"]}]});m(()=>r.isShow,l=>{t.isShowDialog=l}),m(()=>t.isShowDialog,l=>{b("update:isShow",l)}),m(()=>r.title,l=>{t.dialogTitle=l.length?l:t.dialogTitle}),m(()=>r.dialogData,l=>{t.dialogFormData=JSON.parse(JSON.stringify(l))}),m(()=>r.dialogType,l=>{t.dialogTitle=r.title||(l==="add"?"新增":l==="edit"?"编辑":l==="look"?"查看":t.dialogTitle),t.dialogIsLook=l==="look"},{immediate:!0});const O=()=>{r.dialogType==="add"&&g.value.clearValidate()},h=()=>{t.dialogIsLook||g.value.resetFields(),b("closed",{})},x=()=>{g.value.validate(l=>{l&&E()})},E=()=>{const l=JSON.parse(JSON.stringify(t.dialogFormData));console.log(JSON.stringify(l));const e=r.dialogType==="add"?"新增成功!":"编辑成功!";t.dialogSubmitBtnLoading=!0,M(l).then(n=>{t.dialogSubmitBtnLoading=!1,n.code===2e4?(v.success(e),t.isShowDialog=!1,b("success",{})):v.warning(n.msg)}).catch(n=>{t.dialogSubmitBtnLoading=!1,console.log(JSON.stringify(n))})};return(l,e)=>{const n=U,u=C,y=J,L=q,R=$,S=j,I=G;return c(),D("div",null,[a(I,{title:o(B),modelValue:o(p),"onUpdate:modelValue":e[8]||(e[8]=i=>K(p)?p.value=i:null),top:"8vh",width:"55%","close-on-click-modal":!1,onOpened:O,onClosed:h},{default:s(()=>[A("div",Q,[a(R,{ref_key:"dialogFormRef",ref:g,model:o(d),inline:!0,rules:o(N),"label-width":"120px",disabled:o(V)},{default:s(()=>[a(u,{label:"字典标签:",prop:"label"},{default:s(()=>[a(n,{modelValue:o(d).label,"onUpdate:modelValue":e[0]||(e[0]=i=>o(d).label=i),placeholder:"请输入字典标签",clearable:""},null,8,["modelValue"])]),_:1}),a(u,{label:"字典值:",prop:"value"},{default:s(()=>[a(n,{modelValue:o(d).value,"onUpdate:modelValue":e[1]||(e[1]=i=>o(d).value=i),placeholder:"请输入字典值",clearable:""},null,8,["modelValue"])]),_:1}),a(u,{label:"排序:",prop:"sort"},{default:s(()=>[a(n,{modelValue:o(d).sort,"onUpdate:modelValue":e[2]||(e[2]=i=>o(d).sort=i),type:"number",placeholder:"请输入排序",clearable:""},null,8,["modelValue"])]),_:1}),a(u,{label:"所属字典:",prop:"type"},{default:s(()=>[a(n,{modelValue:o(d).type,"onUpdate:modelValue":e[3]||(e[3]=i=>o(d).type=i),placeholder:"",clearable:"",disabled:""},null,8,["modelValue"])]),_:1}),_.dialogType!=="add"?(c(),H(u,{key:0,label:"是否内置:",prop:"builtin"},{default:s(()=>[a(L,{modelValue:o(d).builtin,"onUpdate:modelValue":e[4]||(e[4]=i=>o(d).builtin=i)},{default:s(()=>[a(y,{value:"1",disabled:""},{default:s(()=>[f("是")]),_:1}),a(y,{value:"0",disabled:""},{default:s(()=>[f("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})):k("",!0),a(u,{label:"备注:",prop:"notes"},{default:s(()=>[a(n,{modelValue:o(d).notes,"onUpdate:modelValue":e[5]||(e[5]=i=>o(d).notes=i),placeholder:"请输入备注",type:"textarea",maxlength:"100","show-word-limit":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules","disabled"]),o(V)?k("",!0):(c(),D("div",X,[a(S,{onClick:e[6]||(e[6]=i=>p.value=!1)},{default:s(()=>[f(" 取消 ")]),_:1}),a(S,{loading:o(F),type:"primary",onClick:e[7]||(e[7]=i=>x())},{default:s(()=>[f(" 保存 ")]),_:1},8,["loading"])]))])]),_:1},8,["title","modelValue"])])}}});export{le as _};
