import{b as D,k as C,w as I,I as U,J as q,v as $,c as M,d as j}from"./element-plus-C1_tH_9n.js";import{s as G}from"./dict-AH912pMj.js";import{d as P,r as W,_ as w,$ as z,w as m,f as A,o as b,c as k,W as t,P as s,a as H,u as a,O as K,U as f,T,l as Q}from"./@vue-ROmf2CMa.js";const X={class:"bs-dialog"},Y={key:0,class:"bs-dialog-footer"},le=P({__name:"addTypeDialog",props:{isShow:{type:Boolean,default:!1},dialogType:{type:String,default:"add"},dialogData:{type:Object,default:()=>({})},title:{type:String,default:""}},emits:["update:isShow","closed","success"],setup(y,{emit:F}){const c=F,r=y,g=W(),e=w({dialogTitle:"提示",isShowDialog:!1,dialogSubmitBtnLoading:!1,dialogIsLook:!1,initFormData:{},dialogFormData:{id:"",name:"",type:"",sort:"",builtin:"0",notes:""}}),{dialogTitle:N,isShowDialog:p,dialogSubmitBtnLoading:O,dialogIsLook:_,dialogFormData:d}=z(e),v=w({name:[{required:!0,message:"请输入",trigger:["blur"]},{min:1,max:32,message:"32字符以内",trigger:["blur"]}],type:[{required:!0,message:"请输入",trigger:["blur"]},{min:1,max:32,message:"32字符以内",trigger:["blur"]}],sort:[{required:!0,message:"请输入正确的排序号",trigger:["blur"]},{pattern:/^[1-9]\d{0,2}$/,message:"请输入0-999之间的正整数",trigger:["blur"]}]});m(()=>r.isShow,o=>{e.isShowDialog=o}),m(()=>e.isShowDialog,o=>{c("update:isShow",o)}),m(()=>r.title,o=>{e.dialogTitle=o.length?o:e.dialogTitle}),m(()=>r.dialogData,o=>{r.dialogType==="add"?e.dialogFormData=JSON.parse(JSON.stringify(e.initFormData)):e.dialogFormData=JSON.parse(JSON.stringify(o))}),m(()=>r.dialogType,o=>{e.dialogTitle=r.title||(o==="add"?"新增":o==="edit"?"编辑":o==="look"?"查看":e.dialogTitle),e.dialogIsLook=o==="look"},{immediate:!0}),A(()=>{e.initFormData=JSON.parse(JSON.stringify(e.dialogFormData))});const B=()=>{r.dialogType==="add"&&g.value.clearValidate()},J=()=>{e.dialogIsLook||g.value.resetFields(),c("closed",{})},h=()=>{g.value.validate(o=>{o&&x()})},x=()=>{const o=JSON.parse(JSON.stringify(e.dialogFormData));console.log(JSON.stringify(o));const l=r.dialogType==="add"?"新增成功!":"编辑成功!";e.dialogSubmitBtnLoading=!0,G(o).then(n=>{e.dialogSubmitBtnLoading=!1,n.code===2e4?(D.success(l),e.isShowDialog=!1,c("success",{})):D.warning(n.msg)}).catch(n=>{e.dialogSubmitBtnLoading=!1,console.log(JSON.stringify(n))})};return(o,l)=>{const n=C,u=I,S=U,E=q,L=$,V=M,R=j;return b(),k("div",null,[t(R,{title:a(N),modelValue:a(p),"onUpdate:modelValue":l[7]||(l[7]=i=>Q(p)?p.value=i:null),top:"8vh",width:"55%","close-on-click-modal":!1,onOpened:B,onClosed:J},{default:s(()=>[H("div",X,[t(L,{ref_key:"dialogFormRef",ref:g,model:a(d),inline:!0,rules:a(v),"label-width":"120px",disabled:a(_)},{default:s(()=>[t(u,{label:"字典名称:",prop:"name"},{default:s(()=>[t(n,{modelValue:a(d).name,"onUpdate:modelValue":l[0]||(l[0]=i=>a(d).name=i),placeholder:"请输入字典名称",clearable:""},null,8,["modelValue"])]),_:1}),t(u,{label:"字典类型:",prop:"type"},{default:s(()=>[t(n,{modelValue:a(d).type,"onUpdate:modelValue":l[1]||(l[1]=i=>a(d).type=i),placeholder:"请输入字典类型",clearable:""},null,8,["modelValue"])]),_:1}),t(u,{label:"排序:",prop:"sort"},{default:s(()=>[t(n,{modelValue:a(d).sort,"onUpdate:modelValue":l[2]||(l[2]=i=>a(d).sort=i),type:"number",placeholder:"请输入排序",clearable:""},null,8,["modelValue"])]),_:1}),y.dialogType!=="add"?(b(),K(u,{key:0,label:"是否内置:",prop:"builtin"},{default:s(()=>[t(E,{modelValue:a(d).builtin,"onUpdate:modelValue":l[3]||(l[3]=i=>a(d).builtin=i)},{default:s(()=>[t(S,{value:"1",disabled:""},{default:s(()=>[f("是")]),_:1}),t(S,{value:"0",disabled:""},{default:s(()=>[f("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})):T("",!0),t(u,{label:"备注:",prop:"notes"},{default:s(()=>[t(n,{modelValue:a(d).notes,"onUpdate:modelValue":l[4]||(l[4]=i=>a(d).notes=i),placeholder:"请输入备注",type:"textarea",maxlength:"100","show-word-limit":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules","disabled"]),a(_)?T("",!0):(b(),k("div",Y,[t(V,{onClick:l[5]||(l[5]=i=>p.value=!1)},{default:s(()=>[f(" 取消 ")]),_:1}),t(V,{loading:a(O),type:"primary",onClick:l[6]||(l[6]=i=>h())},{default:s(()=>[f(" 保存 ")]),_:1},8,["loading"])]))])]),_:1},8,["title","modelValue"])])}}});export{le as _};
