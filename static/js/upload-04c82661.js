import{c as b,A as E,B as I,k as j,u as k,t as N}from"./element-plus-29f174c0.js";import{o as _,c as h,a as P,d as w,P as x,Q as c,u as m,X as u,l as v,r as g,w as S,F as $}from"./@vue-7d0fc2b4.js";import{u as B,d as q}from"./index-b1679230.js";import{w as H}from"./@vueuse-d1e6df39.js";import{_ as C}from"./plugin-vueexport-helper-c27b6911.js";import"./lodash-es-d29772ce.js";import"./async-validator-dee29e8b.js";import"./dayjs-78f57161.js";import"./@intlify-999e9484.js";import"./source-map-7d7e1c08.js";import"./@element-plus-975622b8.js";import"./@ctrl-f8748455.js";import"./@sxzz-c75af06c.js";import"./escape-html-bdfaebd7.js";import"./normalize-wheel-es-ed76fb12.js";import"./index-3358e511.js";import"./pinia-4649f5ad.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-98b533fa.js";import"./axios-4a70c6fc.js";import"./vue-i18n-625cf0a6.js";import"./vue-ff9293da.js";import"./js-cookie-edb2da2a.js";import"./nprogress-941844a1.js";import"./mockjs-3c670f17.js";import"./vite-plugin-mock-8bbc2346.js";import"./path-to-regexp-36ea9d8d.js";const L={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},R=P("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1),z=[R];function G(f,i){return _(),h("svg",L,z)}const F={name:"ep-plus",render:G},Q=["src"],Z=w({__name:"SingleUpload",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(f,{emit:i}){const n=H(f,"modelValue",i);async function a(p){const{data:r}=await B(p.file);n.value=r.url}function t(p){return p.size>2*1048*1048?(b.warning("上传图片不能大于2M"),!1):!0}return(p,r)=>{const V=F,y=E,l=I;return _(),x(l,{modelValue:m(n),"onUpdate:modelValue":r[0]||(r[0]=e=>v(n)?n.value=e:null),class:"single-uploader","show-file-list":!1,"list-type":"picture-card","before-upload":t,"http-request":a},{default:c(()=>[m(n)?(_(),h("img",{key:0,referrerPolicy:"no-referrer",src:m(n),class:"single"},null,8,Q)):(_(),x(y,{key:1,class:"single-uploader-icon"},{default:c(()=>[u(V)]),_:1}))]),_:1},8,["modelValue"])}}});const A=C(Z,[["__scopeId","data-v-600223ab"]]),D=["src"],W=w({__name:"MultiUpload",props:{modelValue:{type:Array,default:[]},limit:{type:Number,default:10}},emits:["update:modelValue"],setup(f,{emit:i}){const d=f,n=g(""),a=g(!1),t=g([]);S(()=>d.modelValue,l=>{const e=t.value.map(o=>o.url);e.length>0&&e.length===l.length&&e.every(o=>l.some(s=>s===o))&&l.every(o=>e.some(s=>s===o))||(t.value=l.map(o=>({url:o})))},{immediate:!0});async function p(l){const{data:e}=await B(l.file),o=t.value.findIndex(s=>s.uid==l.file.uid);t.value.splice(o,1,{name:e.name,url:e.url}),i("update:modelValue",t.value.map(s=>s.url))}function r(l){const e=l.url;e&&q(e).then(()=>{i("update:modelValue",t.value.map(o=>o.url))})}function V(l){return l.size>2*1048*1048?(b.warning("上传图片不能大于2M"),!1):!0}const y=l=>{n.value=l.url,a.value=!0};return(l,e)=>{const o=F,s=I,M=j;return _(),h($,null,[u(s,{"file-list":m(t),"onUpdate:fileList":e[0]||(e[0]=U=>v(t)?t.value=U:null),"list-type":"picture-card","before-upload":V,"http-request":p,"on-remove":r,"on-preview":y,limit:d.limit},{default:c(()=>[u(o)]),_:1},8,["file-list","limit"]),u(M,{modelValue:m(a),"onUpdate:modelValue":e[1]||(e[1]=U=>v(a)?a.value=U:null)},{default:c(()=>[P("img",{referrerPolicy:"no-referrer","w-full":"",src:m(n),alt:"Preview Image"},null,8,D)]),_:1},8,["modelValue"])],64)}}}),K={class:"app-container"},we=w({__name:"upload",setup(f){const i=g("https://gitee.com/iotjh/Picture/raw/master/GitHub/Vue3/gourdBaby.gif"),d=g(["https://s2.loli.net/2023/05/24/yNsxFC8rLHMZQcK.jpg","https://s2.loli.net/2023/05/24/RuHFMwW4rG5lIqs.jpg","https://s2.loli.net/2023/05/24/ZPiGbcpR91WqInB.jpg","https://s2.loli.net/2023/05/24/e1bcnEq3MFdmlNL.jpg","https://s2.loli.net/2023/05/24/wZTSPj1yDQNcuhU.jpg"]);return(n,a)=>{const t=k,p=N;return _(),h("div",K,[u(p,null,{default:c(()=>[u(t,{label:"单图上传"},{default:c(()=>[u(A,{modelValue:m(i),"onUpdate:modelValue":a[0]||(a[0]=r=>v(i)?i.value=r:null)},null,8,["modelValue"])]),_:1}),u(t,{label:"多图上传"},{default:c(()=>[u(W,{modelValue:m(d),"onUpdate:modelValue":a[1]||(a[1]=r=>v(d)?d.value=r:null)},null,8,["modelValue"])]),_:1})]),_:1})])}}});export{we as default};
