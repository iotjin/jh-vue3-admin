import{b as S,a as X,j as Y,w as G,c as H,v as Z,L as ee,i as te,M as ae,N as oe}from"./element-plus-f5d3fc50.js";import{_ as ie}from"./index-ac507ecb.js";import{d as le,r as se,$ as J,a0 as L,w as ne,ao as de,o as m,c as k,u as i,X as l,Q as s,af as re,V as h,a as g,R as _,P as w,W as P,Y as ce,l as pe,bh as me,bf as _e}from"./@vue-9ba90ccc.js";import{c as ge,e as ue}from"./dict-2a3aeed7.js";import{_ as fe}from"./addItemDialog.vuevuetypescriptsetuptruelang-45ad3dcc.js";import{_ as be}from"./index-f131ee7d.js";import"./lodash-es-d29772ce.js";import"./async-validator-dee29e8b.js";import"./@vueuse-f39d50a6.js";import"./dayjs-bff41acc.js";import"./@intlify-767c1c72.js";import"./source-map-7d7e1c08.js";import"./@element-plus-c398101b.js";import"./@ctrl-f8748455.js";import"./@sxzz-c75af06c.js";import"./escape-html-849d0975.js";import"./normalize-wheel-es-ed76fb12.js";import"./pinia-87603f94.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-c8173181.js";import"./crypto-js-49b96eff.js";import"./axios-4a70c6fc.js";import"./js-cookie-edb2da2a.js";import"./vue-i18n-1488b031.js";import"./vue-ef783175.js";import"./nprogress-84d8f06a.js";import"./mockjs-8d5feca7.js";import"./vite-plugin-mock-5220d95c.js";import"./path-to-regexp-36ea9d8d.js";const ye=u=>(me("data-v-37cb50af"),u=u(),_e(),u),he={key:0},we=ye(()=>g("div",{class:"vertical-line"},"点击字典查看详情",-1)),ve=[we],De={key:1},Se={class:"bs-page-table",style:{padding:"0px"}},ke={class:"bs-table-btns"},Te=["onClick"],xe={style:{color:"#00a0e9","text-decoration":"underline"}},Ce={class:"bs-tooltip-text"},Ne=le({__name:"dictDetails",props:{data:{type:Object,default:()=>({})}},setup(u){const B=u,I=se(),o=J({tableTotal:0,tableLoading:!1,tableData:[],queryParams:{page:1,limit:10,keyword:""},selectedRows:[],dictTypeData:{}}),{tableTotal:T,tableLoading:F,tableData:x,queryParams:r,selectedRows:C}=L(o),n=J({isShowDialog:!1,dialogType:"",dialogFormData:{}}),{isShowDialog:v,dialogType:V,dialogFormData:q}=L(n);ne(()=>B.data,e=>{e?(o.dictTypeData=JSON.parse(JSON.stringify(e)),f()):(o.tableData=[],o.tableTotal=0)});const f=()=>{var e=JSON.parse(JSON.stringify(o.queryParams));e.type=o.dictTypeData.type,console.log(JSON.stringify(e)),o.tableLoading=!0,ge(e).then(t=>{o.tableLoading=!1,t.code===2e4?(o.tableData=t.data,o.tableTotal=t.total):S.warning(t.msg)}).catch(t=>{o.tableLoading=!1,console.log(JSON.stringify(t))})},N=()=>{o.queryParams.page=1,f()},D=e=>e.builtin==="0",$=e=>{o.selectedRows=e},A=()=>{n.dialogType="add",n.dialogFormData={id:"",label:"",value:"",sort:"",type:o.dictTypeData.type,builtin:"0",notes:""},n.isShowDialog=!0},R=e=>{const t=JSON.parse(JSON.stringify(e&&e.id?e:o.selectedRows[0]));n.dialogType="edit",n.dialogFormData=t,n.isShowDialog=!0},E=e=>{var t="";e&&e.id?t=e.label:t=o.selectedRows.map(c=>c.label).join(","),X.confirm(`确定要删除字典项 ${t} ，此操作将永久删除, 是否继续?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var c={ids:[]};if(e&&e.id)c.ids=[e.id];else{const y=o.selectedRows.map(d=>d.id);c.ids=y}U(c)})},U=e=>{console.log(JSON.stringify(e)),ue(e).then(t=>{t.code===2e4?(S.success("删除成功!"),f()):S.warning(t.msg)})},j=e=>{n.dialogType="look",n.dialogFormData=JSON.parse(JSON.stringify(e)),n.isShowDialog=!0};return(e,t)=>{const c=Y,y=G,d=H,K=Z,p=ee,M=te,z=ae,Q=ie,b=de("hasPerm"),W=oe;return m(),k("div",null,[i(x).length?(m(),k("div",De,[l(K,{inline:!0,model:i(r),class:"bs-form-search"},{default:s(()=>[l(y,{style:{"margin-right":"25px"},class:"search-input"},{default:s(()=>[l(c,{modelValue:i(r).keyword,"onUpdate:modelValue":t[0]||(t[0]=a=>i(r).keyword=a),maxlength:"20",placeholder:"字典标签 / 字典值",clearable:"",onKeyup:re(N,["enter","native"])},null,8,["modelValue","onKeyup"])]),_:1}),l(y,null,{default:s(()=>[l(d,{class:"bs-form-btn",style:{"margin-left":"0px"},type:"primary",onClick:N},{default:s(()=>[h("查询")]),_:1})]),_:1})]),_:1},8,["model"]),g("div",Se,[g("div",ke,[_((m(),w(d,{type:"primary",icon:"i-ep-plus",onClick:A},{default:s(()=>[h(" 新增 ")]),_:1})),[[b,["dict-item-add"]]]),_((m(),w(d,{type:"primary",icon:"i-ep-edit",disabled:i(C).length!==1,onClick:R},{default:s(()=>[h(" 编辑 ")]),_:1},8,["disabled"])),[[b,["dict-item-edit"]]]),_((m(),w(d,{type:"danger",icon:"i-ep-delete",disabled:i(C).length==0,onClick:E},{default:s(()=>[h(" 删除 ")]),_:1},8,["disabled"])),[[b,["dict-item-delete"]]])]),_((m(),w(z,{ref_key:"tableRef",ref:I,class:"bs-table",data:i(x),stripe:!0,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"},onSelectionChange:$},{default:s(()=>[l(p,{type:"selection",width:"55",selectable:D}),l(p,{label:"字典标签",width:""},{default:s(a=>[g("span",{onClick:O=>j(a.row)},[g("a",xe,P(a.row.label),1)],8,Te)]),_:1}),l(p,{prop:"value",label:"字典值",width:""}),l(p,{prop:"type",label:"所属字典",width:""}),l(p,{prop:"sort",label:"排序"}),l(p,{label:"备注","min-width":"100"},{default:s(a=>[l(M,{"visible-arrow":!1,effect:"light",content:a.row.notes,placement:"bottom"},{default:s(()=>[g("span",Ce,P(a.row.notes),1)]),_:2},1032,["content"])]),_:1}),l(p,{fixed:"right",label:"操作",width:"120"},{default:s(a=>[_(l(d,{size:"small",icon:"i-ep-edit",disabled:!D(a.row),onClick:O=>R(a.row)},null,8,["disabled","onClick"]),[[b,["dict-item-edit"]]]),_(l(d,{size:"small",icon:"i-ep-delete",type:"danger",disabled:!D(a.row),onClick:O=>E(a.row)},null,8,["disabled","onClick"]),[[b,["dict-item-delete"]]])]),_:1})]),_:1},8,["data"])),[[W,i(F)]]),_(l(Q,{total:i(T),page:i(r).page,"onUpdate:page":t[1]||(t[1]=a=>i(r).page=a),limit:i(r).limit,"onUpdate:limit":t[2]||(t[2]=a=>i(r).limit=a),onPagination:f},null,8,["total","page","limit"]),[[ce,i(T)>0]])])])):(m(),k("div",he,ve)),l(fe,{"dialog-type":i(V),"is-show":i(v),"onUpdate:isShow":t[3]||(t[3]=a=>pe(v)?v.value=a:null),"dialog-data":i(q),onSuccess:f},null,8,["dialog-type","is-show","dialog-data"])])}}});const it=be(Ne,[["__scopeId","data-v-37cb50af"]]);export{it as default};
