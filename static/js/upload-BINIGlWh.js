import{b as I,q as j,G as P,d as q,w as N,v as $}from"./element-plus-BsPKl9cL.js";import{o as f,c as V,a as F,d as b,O as x,P as d,u as p,W as s,l as v,r as g,w as k,F as H}from"./@vue-Cr7qNLMI.js";import{u as B,d as C}from"./index-B4o-_MeG.js";import{x as G}from"./@vueuse-C4lJNpQw.js";import{_ as L}from"./index-DSZN33lD.js";import"./lodash-es-Blijzk1b.js";import"./async-validator-DKvM95Vc.js";import"./dayjs-C6J0yRL_.js";import"./@intlify-CHY6szXs.js";import"./@element-plus-BRXcaAil.js";import"./@ctrl-r5W6hzzQ.js";import"./@sxzz-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./pinia-uj-hNnAT.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CufQNpwK.js";import"./crypto-js-CYDAzdEe.js";import"./axios-B4uVmeYG.js";import"./js-cookie-Cz0CWeBA.js";import"./vue-i18n-Dt-hUQlq.js";import"./vue-Dml5yltN.js";import"./nprogress-E-flP1tB.js";import"./mockjs-DOFpbtyb.js";import"./vite-plugin-mock-WFsnnzUG.js";import"./path-to-regexp-mDz3xsrU.js";const R={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},S=F("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"},null,-1),z=[S];function W(_,u){return f(),V("svg",R,[...z])}const M={name:"ep-plus",render:W},Z=["src"],D=b({__name:"SingleUpload",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(_,{emit:u}){const t=G(_,"modelValue",u);async function r(n){const{data:c}=await B(n.file);t.value=c.url}function o(n){return n.size>2*1048*1048?(I.warning("上传图片不能大于2M"),!1):!0}return(n,c)=>{const y=M,U=j,l=P;return f(),x(l,{modelValue:p(t),"onUpdate:modelValue":c[0]||(c[0]=e=>v(t)?t.value=e:null),class:"single-uploader","show-file-list":!1,"list-type":"picture-card","before-upload":o,"http-request":r},{default:d(()=>[p(t)?(f(),V("img",{key:0,referrerPolicy:"no-referrer",src:p(t),class:"single"},null,8,Z)):(f(),x(U,{key:1,class:"single-uploader-icon"},{default:d(()=>[s(y)]),_:1}))]),_:1},8,["modelValue"])}}}),Q=L(D,[["__scopeId","data-v-600223ab"]]),A=["src"],K=b({__name:"MultiUpload",props:{modelValue:{type:Array,default:[]},limit:{type:Number,default:10}},emits:["update:modelValue"],setup(_,{emit:u}){const m=u,h=_,t=g(""),r=g(!1),o=g([]);k(()=>h.modelValue,l=>{const e=o.value.map(a=>a.url);e.length>0&&e.length===l.length&&e.every(a=>l.some(i=>i===a))&&l.every(a=>e.some(i=>i===a))||(o.value=l.map(a=>({url:a})))},{immediate:!0});async function n(l){const{data:e}=await B(l.file),a=o.value.findIndex(i=>i.uid==l.file.uid);o.value.splice(a,1,{name:e.name,url:e.url}),m("update:modelValue",o.value.map(i=>i.url))}function c(l){const e=l.url;e&&C(e).then(()=>{m("update:modelValue",o.value.map(a=>a.url))})}function y(l){return l.size>2*1048*1048?(I.warning("上传图片不能大于2M"),!1):!0}const U=l=>{t.value=l.url,r.value=!0};return(l,e)=>{const a=M,i=P,E=q;return f(),V(H,null,[s(i,{"file-list":p(o),"onUpdate:fileList":e[0]||(e[0]=w=>v(o)?o.value=w:null),"list-type":"picture-card","before-upload":y,"http-request":n,"on-remove":c,"on-preview":U,limit:h.limit},{default:d(()=>[s(a)]),_:1},8,["file-list","limit"]),s(E,{modelValue:p(r),"onUpdate:modelValue":e[1]||(e[1]=w=>v(r)?r.value=w:null)},{default:d(()=>[F("img",{referrerPolicy:"no-referrer","w-full":"",src:p(t),alt:"Preview Image"},null,8,A)]),_:1},8,["modelValue"])],64)}}}),O={class:"app-container"},Ue=b({__name:"upload",setup(_){const u=g("https://gitee.com/iotjh/Picture/raw/master/GitHub/Vue3/gourdBaby.gif"),m=g(["https://s2.loli.net/2023/05/24/yNsxFC8rLHMZQcK.jpg","https://s2.loli.net/2023/05/24/RuHFMwW4rG5lIqs.jpg","https://s2.loli.net/2023/05/24/ZPiGbcpR91WqInB.jpg","https://s2.loli.net/2023/05/24/e1bcnEq3MFdmlNL.jpg","https://s2.loli.net/2023/05/24/wZTSPj1yDQNcuhU.jpg"]);return(h,t)=>{const r=N,o=$;return f(),V("div",O,[s(o,null,{default:d(()=>[s(r,{label:"单图上传"},{default:d(()=>[s(Q,{modelValue:p(u),"onUpdate:modelValue":t[0]||(t[0]=n=>v(u)?u.value=n:null)},null,8,["modelValue"])]),_:1}),s(r,{label:"多图上传"},{default:d(()=>[s(K,{modelValue:p(m),"onUpdate:modelValue":t[1]||(t[1]=n=>v(m)?m.value=n:null)},null,8,["modelValue"])]),_:1})]),_:1})])}}});export{Ue as default};
