import{b as W,k as $,w as M,v as j,T as z,U as A,c as G,d as H}from"./element-plus-CS1bfuXs.js";import"./index-BSyJ-IJQ.js";import K from"./setStatus-CdR3OU4Y.js";import{d as Q,r as X,_ as c,$ as D,w as d,f as Y,o as T,c as w,W as l,P as i,a as Z,u as a,l as N,U as h,T as ee}from"./@vue-DBL8Ibom.js";const te={class:"bs-dialog input-width"},ae={key:0,class:"bs-dialog-footer",style:{"margin-top":"10px"}},ne=Q({__name:"dragSortDialog",props:{isShow:{type:Boolean,default:!1},dialogType:{type:String,default:"add"},dialogData:{type:Object,default:()=>({})},title:{type:String,default:""}},emits:["update:isShow","closed","success"],setup(S,{emit:F}){const m=F,s=S,r=X(),t=c({dialogTitle:"提示",isShowDialog:!1,dialogSubmitBtnLoading:!1,dialogIsLook:!1,initFormData:{},dialogFormData:{id:"",name:"",statusList:[]},activeName:"staffTab"}),{dialogTitle:O,isShowDialog:u,dialogSubmitBtnLoading:k,dialogIsLook:_,dialogFormData:g,activeName:p}=D(t),f=c({editStatusOptions:[]}),{editStatusOptions:v}=D(f),V=c({name:[{required:!0,message:"请输入",trigger:["blur","change"]},{min:1,max:10,message:"10字符以内",trigger:["blur","change"]}]});d(()=>s.isShow,e=>{t.isShowDialog=e}),d(()=>t.isShowDialog,e=>{m("update:isShow",e)}),d(()=>s.title,e=>{t.dialogTitle=e.length?e:t.dialogTitle}),d(()=>s.dialogData,e=>{s.dialogType==="add"?t.dialogFormData=JSON.parse(JSON.stringify(t.initFormData)):t.dialogFormData=JSON.parse(JSON.stringify(e))}),d(()=>s.dialogType,e=>{t.dialogTitle=s.title||(e==="add"?"新增":e==="edit"?"编辑":e==="look"?"查看":t.dialogTitle),t.dialogIsLook=e==="look"},{immediate:!0}),Y(()=>{t.initFormData=JSON.parse(JSON.stringify(t.dialogFormData))});const L=()=>{s.dialogType==="add"&&r.value.clearValidate(),f.editStatusOptions.length||E()},C=()=>{t.dialogIsLook||r.value.resetFields(),m("closed",{})},E=()=>{var e=[{statusId:"status2",statusName:"状态2",canRead:!0,canWrite:!0,order:1},{statusId:"status4",statusName:"状态4",canRead:!0,canWrite:!1,order:2}];f.editStatusOptions=s.dialogType==="add"?[]:e},I=e=>{t.dialogFormData.statusList=e},J=()=>{r.value.validate(e=>{e?B():W.warning("Please check staff info.")})},B=()=>{const e=JSON.parse(JSON.stringify(t.dialogFormData));console.log(JSON.stringify(e)),t.isShowDialog=!1,t.dialogSubmitBtnLoading=!1,m("success",{})};return(e,o)=>{const R=$,x=M,U=j,b=z,q=A,y=G,P=H;return T(),w("div",null,[l(P,{title:a(O),modelValue:a(u),"onUpdate:modelValue":o[4]||(o[4]=n=>N(u)?u.value=n:null),top:"8vh",width:"55%","close-on-click-modal":!1,onOpened:L,onClosed:C},{default:i(()=>[Z("div",te,[l(q,{modelValue:a(p),"onUpdate:modelValue":o[1]||(o[1]=n=>N(p)?p.value=n:null),type:"border-card"},{default:i(()=>[l(b,{label:"Staff Info",name:"staffTab"},{default:i(()=>[l(U,{ref_key:"dialogFormRef",ref:r,model:a(g),inline:!0,rules:a(V),"label-width":"120px",disabled:a(_)},{default:i(()=>[l(x,{label:"姓名:",prop:"name"},{default:i(()=>[l(R,{modelValue:a(g).name,"onUpdate:modelValue":o[0]||(o[0]=n=>a(g).name=n),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules","disabled"])]),_:1}),l(b,{label:"Set Status",name:"setStatusTab"},{default:i(()=>[l(K,{type:S.dialogType,"edit-status-list":a(v),onChange:I},null,8,["type","edit-status-list"])]),_:1})]),_:1},8,["modelValue"]),a(_)?ee("",!0):(T(),w("div",ae,[l(y,{onClick:o[2]||(o[2]=n=>u.value=!1)},{default:i(()=>[h(" 取消 ")]),_:1}),l(y,{loading:a(k),type:"primary",onClick:o[3]||(o[3]=n=>J())},{default:i(()=>[h(" 保存 ")]),_:1},8,["loading"])]))])]),_:1},8,["title","modelValue"])])}}});export{ne as _};
