import{a as L,b as pe,k as ge,w as fe,A as he,c as be,B as we,F as _e,G as Se,v as ve,d as ye,K as Ve}from"./element-plus-CS1bfuXs.js";import{d as xe,r as y,_ as V,$ as j,w as b,f as De,n as Fe,o as r,c as g,W as a,P as s,Q as H,u as o,F as x,ab as D,O as F,U as I,X as ke,l as Y,T as Ne,bm as Te,bk as Oe,a as w}from"./@vue-DBL8Ibom.js";import{_ as Be}from"./index-CN07mNdx.js";import"./lodash-es-Blijzk1b.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-BThtamsc.js";import"./dayjs-C6J0yRL_.js";import"./@intlify-CHY6szXs.js";import"./@sxzz-D9SI2xQl.js";import"./@element-plus-BmjHI8io.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./pinia-7g9vQp6f.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-fhvlCfPF.js";import"./crypto-js-CYDAzdEe.js";import"./axios-CCb-kr4I.js";import"./js-cookie-Cz0CWeBA.js";import"./vue-i18n-B8qYdFXi.js";import"./vue-rTnkxsfK.js";import"./vue-draggable-plus-BSvTyIk2.js";import"./nprogress-yi2QV7xY.js";import"./mockjs-DsSR4jwH.js";import"./vite-plugin-mock-CDJiH8Qs.js";import"./path-to-regexp-BzK_ZY7n.js";const _=S=>(Te("data-v-333d930d"),S=S(),Oe(),S),Re={class:"bs-dialog input-width"},Ce=_(()=>w("h2",null,"Form1",-1)),Je=_(()=>w("div",{style:{"margin-top":"20px"}},null,-1)),Le=_(()=>w("h2",null,"Form2",-1)),Ie=_(()=>w("div",{style:{"margin-top":"20px"}},null,-1)),Ee=_(()=>w("h2",null,"Form3",-1)),Ue=_(()=>w("div",{style:{"margin-top":"20px"}},null,-1)),Pe={key:0,class:"bs-dialog-footer"},$e=xe({__name:"addProductDialog",props:{isShow:{type:Boolean,default:!1},dialogType:{type:String,default:"add"},dialogData:{type:Object,default:()=>({})},title:{type:String,default:""},isRefresh:{type:Boolean,default:!1}},emits:["update:isShow","closed","success"],setup(S,{emit:Z}){const E=Z,c=S,k=y(),A=y(),M=y(),G=y(),K=y(),i=V({dialogTitle:"提示",isShowDialog:!1,dialogLoading:!1,dialogSubmitBtnLoading:!1,dialogIsLook:!1,initFormData:{},dialogFormData:{id:"",products:[{productId:"",productName:""}],notes:"",testSwitch0:"",testSwitch1:""}}),{dialogTitle:ee,isShowDialog:N,dialogLoading:le,dialogSubmitBtnLoading:te,dialogIsLook:T,dialogFormData:m}=j(i),f=V({optionList:[{label:"选项1",value:"value1"},{label:"选项2",value:"value2"},{label:"选项3",value:"value3"},{label:"选项4",value:"value4"},{label:"选项5",value:"value5"}],switchValue:"value3",lastSelect:""}),{optionList:O}=j(f),B=V({product:[{required:!0,message:"请输入产品",trigger:["blur","change"]},{min:1,max:10,message:"10字符以内",trigger:["blur","change"]}],notes:[{required:!1,message:"请输入",trigger:["blur","change"]},{min:1,max:100,message:"100字符以内",trigger:["blur","change"]}]});b(()=>c.isShow,t=>{i.isShowDialog=t}),b(()=>i.isShowDialog,t=>{E("update:isShow",t)}),b(()=>c.title,t=>{i.dialogTitle=t.length?t:i.dialogTitle}),b(()=>c.dialogData,t=>{c.dialogType==="add"?i.dialogFormData=JSON.parse(JSON.stringify(i.initFormData)):i.dialogFormData=JSON.parse(JSON.stringify(t))}),b(()=>c.dialogType,t=>{i.dialogTitle=c.title||(t==="add"?"新增":t==="edit"?"编辑":t==="look"?"查看":i.dialogTitle),i.dialogIsLook=t==="look"},{immediate:!0}),b(()=>c.isRefresh,t=>{console.log("Request data"),i.dialogLoading=!0,setTimeout(()=>{i.dialogLoading=!1},1e3)}),De(()=>{i.initFormData=JSON.parse(JSON.stringify(i.dialogFormData))});const oe=()=>{c.dialogType==="add"&&k.value.clearValidate()},ae=()=>{i.dialogIsLook||k.value.resetFields(),E("closed",{})},ie=()=>{i.dialogFormData.products.push({productId:"",productName:""})},se=t=>{i.dialogFormData.products.splice(t,1)},ne=()=>{f.lastSelect=i.dialogFormData.testSwitch0},de=t=>{t.value===f.switchValue&&L.confirm("是否切换到选项三","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{u()}).catch(()=>{i.dialogFormData.testSwitch0=f.lastSelect,u()})};b(()=>i.dialogFormData.testSwitch1,(t,e)=>{t===f.switchValue&&L.confirm("是否切换到选项三","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{u()}).catch(()=>{i.dialogFormData.testSwitch1=e,u()})});const re=()=>{console.log("form2",JSON.stringify(h)),console.log("form3",JSON.stringify(p)),k.value.validate(t=>{t&&ue()})},ue=()=>{const t=JSON.parse(JSON.stringify(i.dialogFormData));console.log("form1",JSON.stringify(t));const e=c.dialogType==="add"?"新增成功!":"编辑成功!";i.dialogSubmitBtnLoading=!0,setTimeout(()=>{i.dialogSubmitBtnLoading=!1,pe.success(e),i.isShowDialog=!1,E("success",{})},1500)};let h=V({testSwitch2:"",note2:""});const{testSwitch2:qe,note2:U}=j(h);h=new Proxy(h,{set:(t,e,d)=>(console.log("target",JSON.stringify(t)),console.log("key",JSON.stringify(e)),console.log("value",JSON.stringify(d)),e==="testSwitch2"&&d===f.switchValue?L.confirm("是否切换到选项三","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{t[e]=d,u()}).catch(()=>{u()}):t[e]=d,!0)});function Q(t){console.log("visible",JSON.stringify(t)),t||u()}function W(t){console.log("onChange - val:",t),u()}function u(){Fe(()=>{A.value.blur(),M.value.blur(),G.value.blur(),K.value.blur()})}let p=V({dialogFormData3:{testSwitch3:"",note3:""}});p=P(p);function P(t){return new Proxy(t,{set(e,d,n){return console.log("target",JSON.stringify(e)),console.log("key",JSON.stringify(d)),console.log("value",JSON.stringify(n)),d==="testSwitch3"&&n===f.switchValue?L.confirm("是否切换到选项三","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{e[d]=n,u()}).catch(()=>{u()}):e[d]=n,typeof n=="object"&&n!==null&&(e[d]=P(n)),!0},get(e,d){const n=e[d];return typeof n=="object"&&n!==null?P(n):n}})}return(t,e)=>{const d=ge,n=fe,$=he,R=be,X=we,C=_e,J=Se,q=ve,ce=ye,me=Ve;return r(),g("div",null,[a(ce,{title:o(ee),modelValue:o(N),"onUpdate:modelValue":e[10]||(e[10]=l=>Y(N)?N.value=l:null),top:"8vh",width:"60%","close-on-click-modal":!1,onOpened:oe,onClosed:ae},{default:s(()=>[H((r(),g("div",Re,[Ce,a(q,{ref_key:"dialogFormRef",ref:k,model:o(m),inline:!1,rules:o(B),"label-width":"120px",disabled:o(T)},{default:s(()=>[(r(!0),g(x,null,D(o(m).products,(l,v)=>(r(),F(X,{key:v},{default:s(()=>[a($,{span:15},{default:s(()=>[a(n,{label:"product "+(v+1),prop:`products.${v}.productName`,"label-width":"130px",rules:o(B).product},{default:s(()=>[a(d,{modelValue:l.productName,"onUpdate:modelValue":z=>l.productName=z,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]),_:2},1024),a($,{span:4},{default:s(()=>[H(a(R,{icon:"i-ep-delete",type:"danger",onClick:z=>se(v)},{default:s(()=>[I("Remove")]),_:2},1032,["onClick"]),[[ke,o(m).products.length>1]])]),_:2},1024)]),_:2},1024))),128)),a(X,null,{default:s(()=>[a($,{lg:3,md:5,style:{"margin-left":"60px"}},{default:s(()=>[a(R,{icon:"i-ep-plus",type:"primary",onClick:ie},{default:s(()=>[I("Add new product")]),_:1})]),_:1})]),_:1}),Je,a(n,{label:"备注:",prop:"notes"},{default:s(()=>[a(d,{modelValue:o(m).notes,"onUpdate:modelValue":e[0]||(e[0]=l=>o(m).notes=l),placeholder:"请输入备注",type:"textarea",maxlength:"100","show-word-limit":"",clearable:"",class:"input-width"},null,8,["modelValue"])]),_:1}),a(n,{label:"测试拦截切换1 - 记录最后选中值","label-width":"300px"},{default:s(()=>[a(J,{ref_key:"selectRef1",ref:A,modelValue:o(m).testSwitch0,"onUpdate:modelValue":e[1]||(e[1]=l=>o(m).testSwitch0=l),placeholder:"请选择",filterable:"",clearable:"",onClick:e[2]||(e[2]=l=>ne()),onVisibleChange:Q},{default:s(()=>[(r(!0),g(x,null,D(o(O),l=>(r(),F(C,{key:l.value,label:l.label,value:l.value,onClick:v=>de(l)},null,8,["label","value","onClick"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(n,{label:"测试拦截切换2 - watch监听","label-width":"300px"},{default:s(()=>[a(J,{ref_key:"selectRef2",ref:M,modelValue:o(m).testSwitch1,"onUpdate:modelValue":e[3]||(e[3]=l=>o(m).testSwitch1=l),placeholder:"请选择",filterable:"",clearable:"",onVisibleChange:Q},{default:s(()=>[(r(!0),g(x,null,D(o(O),l=>(r(),F(C,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules","disabled"]),Le,Ie,a(q,{ref:"dialogFormRef3",model:o(h),inline:!1,rules:o(B),"label-width":"120px",disabled:o(T)},{default:s(()=>[a(n,{label:"测试拦截切换3 - Proxy","label-width":"300px"},{default:s(()=>[a(J,{ref_key:"selectRef3",ref:G,modelValue:o(h).testSwitch2,"onUpdate:modelValue":e[4]||(e[4]=l=>o(h).testSwitch2=l),placeholder:"请选择",filterable:"",clearable:"",onChange:W},{default:s(()=>[(r(!0),g(x,null,D(o(O),l=>(r(),F(C,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(n,{label:"备注:","label-width":"300px"},{default:s(()=>[a(d,{modelValue:o(U),"onUpdate:modelValue":e[5]||(e[5]=l=>Y(U)?U.value=l:null),placeholder:"请输入备注",type:"textarea",maxlength:"100","show-word-limit":"",clearable:"",class:"input-width"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules","disabled"]),Ee,Ue,a(q,{ref:"dialogFormRef4",model:o(p),inline:!1,rules:o(B),"label-width":"120px",disabled:o(T)},{default:s(()=>[a(n,{label:"测试拦截切换3 - Proxy","label-width":"300px"},{default:s(()=>[a(J,{ref_key:"selectRef4",ref:K,modelValue:o(p).dialogFormData3.testSwitch3,"onUpdate:modelValue":e[6]||(e[6]=l=>o(p).dialogFormData3.testSwitch3=l),placeholder:"请选择",filterable:"",clearable:"",onChange:W},{default:s(()=>[(r(!0),g(x,null,D(o(O),l=>(r(),F(C,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(n,{label:"备注:","label-width":"300px"},{default:s(()=>[a(d,{modelValue:o(p).dialogFormData3.note3,"onUpdate:modelValue":e[7]||(e[7]=l=>o(p).dialogFormData3.note3=l),placeholder:"请输入备注",type:"textarea",maxlength:"100","show-word-limit":"",clearable:"",class:"input-width"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules","disabled"]),o(T)?Ne("",!0):(r(),g("div",Pe,[a(R,{onClick:e[8]||(e[8]=l=>N.value=!1)},{default:s(()=>[I(" 取消 ")]),_:1}),a(R,{loading:o(te),type:"primary",onClick:e[9]||(e[9]=l=>re())},{default:s(()=>[I(" 保存 ")]),_:1},8,["loading"])]))])),[[me,o(le)]])]),_:1},8,["title","modelValue"])])}}}),pl=Be($e,[["__scopeId","data-v-333d930d"]]);export{pl as default};
