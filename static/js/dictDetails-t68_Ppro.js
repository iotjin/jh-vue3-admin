import{b as k,a as X,k as G,w as H,c as Y,v as Z,P as ee,j as te,Q as ae,R as oe}from"./element-plus-C1_tH_9n.js";import{_ as ie}from"./index-XscN0ITR.js";import{d as le,r as se,_ as J,$ as P,w as ne,am as de,o as m,c as S,u as i,W as l,P as s,ae as re,U as h,a as g,Q as _,O as w,V as B,X as ce,l as pe,bm as me,bk as _e}from"./@vue-ROmf2CMa.js";import{c as ge,e as ue}from"./dict-AH912pMj.js";import{_ as be}from"./addItemDialog.vuevuetypescriptsetuptruelang-C8fPP3aP.js";import{_ as fe}from"./index-B8W-cxH9.js";import"./lodash-es-Blijzk1b.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-Cv4Wji3s.js";import"./dayjs-C6J0yRL_.js";import"./@intlify-CHY6szXs.js";import"./@element-plus-Ds9axIkZ.js";import"./@ctrl-r5W6hzzQ.js";import"./@sxzz-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./pinia-CNAM5qpy.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CP6FQFzT.js";import"./crypto-js-CYDAzdEe.js";import"./axios-mH-cpkvd.js";import"./js-cookie-Cz0CWeBA.js";import"./vue-i18n-BHOT87Ho.js";import"./vue-DoOO_nKc.js";import"./nprogress-E-flP1tB.js";import"./mockjs-DOFpbtyb.js";import"./vite-plugin-mock-B2SH9_m9.js";import"./path-to-regexp-Cdn6gXUT.js";const ye=u=>(me("data-v-37cb50af"),u=u(),_e(),u),he={key:0},we=ye(()=>g("div",{class:"vertical-line"},"点击字典查看详情",-1)),ve=[we],De={key:1},ke={class:"bs-page-table",style:{padding:"0px"}},Se={class:"bs-table-btns"},Te=["onClick"],Ce={style:{color:"#00a0e9","text-decoration":"underline"}},xe={class:"bs-tooltip-text"},Ne=le({__name:"dictDetails",props:{data:{type:Object,default:()=>({})}},setup(u){const I=u,L=se(),o=J({tableTotal:0,tableLoading:!1,tableData:[],queryParams:{page:1,limit:10,keyword:""},selectedRows:[],dictTypeData:{}}),{tableTotal:T,tableLoading:F,tableData:C,queryParams:r,selectedRows:x}=P(o),n=J({isShowDialog:!1,dialogType:"",dialogFormData:{}}),{isShowDialog:v,dialogType:V,dialogFormData:q}=P(n);ne(()=>I.data,e=>{e?(o.dictTypeData=JSON.parse(JSON.stringify(e)),b()):(o.tableData=[],o.tableTotal=0)});const b=()=>{var e=JSON.parse(JSON.stringify(o.queryParams));e.type=o.dictTypeData.type,console.log(JSON.stringify(e)),o.tableLoading=!0,ge(e).then(t=>{o.tableLoading=!1,t.code===2e4?(o.tableData=t.data,o.tableTotal=t.total):k.warning(t.msg)}).catch(t=>{o.tableLoading=!1,console.log(JSON.stringify(t))})},N=()=>{o.queryParams.page=1,b()},D=e=>e.builtin==="0",$=e=>{o.selectedRows=e},U=()=>{n.dialogType="add",n.dialogFormData={id:"",label:"",value:"",sort:"",type:o.dictTypeData.type,builtin:"0",notes:""},n.isShowDialog=!0},O=e=>{const t=JSON.parse(JSON.stringify(e&&e.id?e:o.selectedRows[0]));n.dialogType="edit",n.dialogFormData=t,n.isShowDialog=!0},R=e=>{var t="";e&&e.id?t=e.label:t=o.selectedRows.map(c=>c.label).join(","),X.confirm(`确定要删除字典项 ${t} ，此操作将永久删除, 是否继续?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var c={ids:[]};if(e&&e.id)c.ids=[e.id];else{const y=o.selectedRows.map(d=>d.id);c.ids=y}A(c)})},A=e=>{console.log(JSON.stringify(e)),ue(e).then(t=>{t.code===2e4?(k.success("删除成功!"),b()):k.warning(t.msg)})},j=e=>{n.dialogType="look",n.dialogFormData=JSON.parse(JSON.stringify(e)),n.isShowDialog=!0};return(e,t)=>{const c=G,y=H,d=Y,z=Z,p=ee,K=te,M=ae,Q=ie,f=de("hasPerm"),W=oe;return m(),S("div",null,[i(C).length?(m(),S("div",De,[l(z,{inline:!0,model:i(r),class:"bs-form-search"},{default:s(()=>[l(y,{style:{"margin-right":"25px"},class:"search-input"},{default:s(()=>[l(c,{modelValue:i(r).keyword,"onUpdate:modelValue":t[0]||(t[0]=a=>i(r).keyword=a),maxlength:"20",placeholder:"字典标签 / 字典值",clearable:"",onKeyup:re(N,["enter","native"])},null,8,["modelValue"])]),_:1}),l(y,null,{default:s(()=>[l(d,{class:"bs-form-btn",style:{"margin-left":"0px"},type:"primary",onClick:N},{default:s(()=>[h("查询")]),_:1})]),_:1})]),_:1},8,["model"]),g("div",ke,[g("div",Se,[_((m(),w(d,{type:"primary",icon:"i-ep-plus",onClick:U},{default:s(()=>[h(" 新增 ")]),_:1})),[[f,["dict-item-add"]]]),_((m(),w(d,{type:"primary",icon:"i-ep-edit",disabled:i(x).length!==1,onClick:O},{default:s(()=>[h(" 编辑 ")]),_:1},8,["disabled"])),[[f,["dict-item-edit"]]]),_((m(),w(d,{type:"danger",icon:"i-ep-delete",disabled:i(x).length==0,onClick:R},{default:s(()=>[h(" 删除 ")]),_:1},8,["disabled"])),[[f,["dict-item-delete"]]])]),_((m(),w(M,{ref_key:"tableRef",ref:L,class:"bs-table",data:i(C),stripe:!0,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"},onSelectionChange:$},{default:s(()=>[l(p,{type:"selection",width:"55",selectable:D}),l(p,{label:"字典标签",width:""},{default:s(a=>[g("span",{onClick:E=>j(a.row)},[g("a",Ce,B(a.row.label),1)],8,Te)]),_:1}),l(p,{prop:"value",label:"字典值",width:""}),l(p,{prop:"type",label:"所属字典",width:""}),l(p,{prop:"sort",label:"排序"}),l(p,{label:"备注","min-width":"100"},{default:s(a=>[l(K,{"visible-arrow":!1,effect:"light",content:a.row.notes,placement:"bottom"},{default:s(()=>[g("span",xe,B(a.row.notes),1)]),_:2},1032,["content"])]),_:1}),l(p,{fixed:"right",label:"操作",width:"120"},{default:s(a=>[_(l(d,{size:"small",icon:"i-ep-edit",disabled:!D(a.row),onClick:E=>O(a.row)},null,8,["disabled","onClick"]),[[f,["dict-item-edit"]]]),_(l(d,{size:"small",icon:"i-ep-delete",type:"danger",disabled:!D(a.row),onClick:E=>R(a.row)},null,8,["disabled","onClick"]),[[f,["dict-item-delete"]]])]),_:1})]),_:1},8,["data"])),[[W,i(F)]]),_(l(Q,{total:i(T),page:i(r).page,"onUpdate:page":t[1]||(t[1]=a=>i(r).page=a),limit:i(r).limit,"onUpdate:limit":t[2]||(t[2]=a=>i(r).limit=a),onPagination:b},null,8,["total","page","limit"]),[[ce,i(T)>0]])])])):(m(),S("div",he,ve)),l(be,{"dialog-type":i(V),"is-show":i(v),"onUpdate:isShow":t[3]||(t[3]=a=>pe(v)?v.value=a:null),"dialog-data":i(q),onSuccess:b},null,8,["dialog-type","is-show","dialog-data"])])}}}),at=fe(Ne,[["__scopeId","data-v-37cb50af"]]);export{at as default};
