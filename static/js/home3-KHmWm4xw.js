import{c as G,C as W,B as q,D as P,F as Q,G as Y,d as j}from"./element-plus-BU6BJsxI.js";import{i as I}from"./echarts-DEBPe8DL.js";import{d as V}from"./common-DbvZmLvv.js";import{M as C}from"./mockjs-CidrXOpc.js";import{d as K,r as X,_ as Z,$ as ee,w as te,i as ae,G as oe,n as re,c as R,o as p,W as c,Q as se,P as d,U as _,u as l,a as f,O as g,S as x,F as ie,ab as le,R as ne,V as ce,l as de,bm as me,bk as pe}from"./@vue-KIsu0X2L.js";import{_ as ue}from"./index-BmXouCwi.js";import"./lodash-es-gvlvjXa_.js";import"./async-validator-9PlIezaS.js";import"./@vueuse-D4qJsfSX.js";import"./dayjs-CIy0qJcO.js";import"./@intlify-CLUpp_Iz.js";import"./@sxzz-D_chPuIy.js";import"./@element-plus-BQ5DqatN.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DCSZm2Jn.js";import"./icon5-BqRZfiTV.js";import"./pinia-B7D0yCDv.js";import"./vue-router-Zv4ZtmtT.js";import"./crypto-js-DkIsdnw7.js";import"./axios-Br0q4W-C.js";import"./js-cookie-Cz0CWeBA.js";import"./vue-i18n-CSWdtZJ9.js";import"./vue-tv3Mw8Sw.js";import"./vue-draggable-plus-DB7mI_zb.js";import"./nprogress-5SZ_0UJX.js";import"./vite-plugin-mock-Ckf4sHq3.js";import"./path-to-regexp-BzK_ZY7n.js";const A=h=>(me("data-v-579829e2"),h=h(),pe(),h),fe={class:"app-container"},he={class:"box-card"},be=A(()=>f("span",{style:{"margin-right":"20px"}},"Hide Column:",-1)),ge=["id","onClick"],ye=A(()=>f("div",{id:"bigChart",style:{width:"100%",height:"400px"}},null,-1)),Ce=K({__name:"home3",setup(h){const B=X(),t=Z({tableLoading:!1,tableData:[],dateList:[],chartList:[],hideColumnData:{colors:!1,times:!1},isShowDialog:!1,currentChartData:null,bigChartInstance:null,bigChartResizeHandler:null}),{tableLoading:w,tableData:H,dateList:O,hideColumnData:m,isShowDialog:y}=ee(t);te(t.hideColumnData,()=>{S()},{deep:!0}),ae(()=>{L()}),oe(()=>{D(),v()});const D=()=>{t.chartList.forEach(e=>{e.chart&&e.chart.dispose(),e.resizeHandler&&window.removeEventListener("resize",e.resizeHandler)}),t.chartList=[]},v=()=>{t.bigChartInstance&&(t.bigChartInstance.dispose(),t.bigChartInstance=null),t.bigChartResizeHandler&&(window.removeEventListener("resize",t.bigChartResizeHandler),t.bigChartResizeHandler=null)},N=e=>e>300?"cellClass1":e>200&&e<=300?"cellClass2":"cellClass3",T=({row:e,column:a,rowIndex:r,columnIndex:o})=>{if(t.dateList.includes(a.property)){const s=e[a.property];if(typeof s!="number")return{textAlign:"center"};if(s>300)return{textAlign:"center","background-color":"#fff2f0",color:"#f56c6c"};if(s>200&&s<=300)return{textAlign:"center","background-color":"#fffbee",color:"#faad14"}}return{textAlign:"center"}},L=()=>{t.dateList=[],t.tableLoading=!0,setTimeout(()=>{const e=()=>[1980,1990,2e3,2010,2020];var a=C.mock({"items|10":[{id:()=>C.Random.guid(),name:"产品@increment","sales|50-500":1,chartData(){const o=e();return C.mock({"items|5":[{date:()=>o.shift().toString(),"value|100-500":1,money:"@float(0, 1000, 1, 2)"}]}).items}}]}).items;const r=Array.from(new Set(a.flatMap(o=>o.chartData.map(n=>n.date))));a.forEach(o=>o.chartData.forEach(n=>{o[n.date]=n.value})),t.dateList=JSON.parse(JSON.stringify(r)),t.tableData=JSON.parse(JSON.stringify(a)),t.tableLoading=!1,S()},1e3)},S=()=>{D(),re(()=>{setTimeout(()=>{t.tableData.forEach((e,a)=>{$(a,e.chartData)})},200)})},$=(e,a)=>{const r=document.getElementById(`myChart_${e}`);if(!r)return;const o={xData:a.map(u=>u.date),seriesData:a.map(u=>u.value)},n=I(r),s=e%2===1?M(o):k(o);n.setOption(s);const b=V(()=>n.resize(),300);window.addEventListener("resize",b),t.chartList.push({chart:n,resizeHandler:b})},U=e=>{t.currentChartData=e.chartData,t.isShowDialog=!0},J=()=>{v();const e=document.getElementById("bigChart");if(!e)return;var a={xData:[],seriesData:[]};t.currentChartData.forEach(o=>{a.xData.push(o.date),a.seriesData.push(o.value)}),t.bigChartInstance=I(e);const r=k(a);t.bigChartInstance.setOption(r),t.bigChartResizeHandler=V(()=>{t.bigChartInstance&&t.bigChartInstance.resize()},300),window.addEventListener("resize",t.bigChartResizeHandler)};function M(e){return{tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:"3%",top:"3%",containLabel:!0},xAxis:{type:"category",show:!1,data:e.xData},yAxis:{type:"value",show:!1},series:[{data:e.seriesData,type:"line",smooth:!0,symbol:"emptyCircle",symbolSize:6,lineStyle:{width:3,color:"#5b8ff9"}}]}}function k(e){return{tooltip:{trigger:"axis",backgroundColor:"rgba(255, 255, 255, 0.9)",borderColor:"#ddd",borderWidth:1,textStyle:{color:"#333"},formatter:function(a){const r=a[0];return`<div style="font-weight: bold;">${r.name}</div>
                      <div>回报率: <span style="color: ${r.color}">${r.value}%</span></div>`}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e.xData,axisLine:{lineStyle:{color:"#ccc"}}},yAxis:{type:"value",axisLabel:{formatter:"{value}%"},splitLine:{lineStyle:{color:"#f0f0f0"}},axisLine:{lineStyle:{color:"#ccc"}}},series:[{name:"投资回报率",type:"line",data:e.seriesData,symbol:"circle",symbolSize:8,smooth:!0,emphasis:{scale:!0,symbolSize:10},lineStyle:{width:3,color:"#5b8ff9"},itemStyle:{color:"#5b8ff9",borderColor:"#fff",borderWidth:2},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(91, 143, 249, 0.3)"},{offset:1,color:"rgba(91, 143, 249, 0)"}]}}}]}}return(e,a)=>{const r=G,o=W,n=q,s=Q,b=Y,u=j,F=P;return p(),R("div",fe,[c(r,{type:"primary",icon:"i-ep-refresh",loading:l(w),onClick:L},{default:d(()=>[_(" 刷新数据 ")]),_:1},8,["loading"]),c(n,{style:{margin:"15px"}},{default:d(()=>[f("div",he,[be,c(o,{modelValue:l(m).colors,"onUpdate:modelValue":a[0]||(a[0]=i=>l(m).colors=i)},{default:d(()=>[_("Colors")]),_:1},8,["modelValue"]),c(o,{modelValue:l(m).times,"onUpdate:modelValue":a[1]||(a[1]=i=>l(m).times=i)},{default:d(()=>[_("Times")]),_:1},8,["modelValue"])])]),_:1}),se((p(),g(b,{ref_key:"tableRef",ref:B,data:l(H),stripe:"",border:"","header-cell-style":{textAlign:"center"},"cell-style":T,style:{width:"100%"}},{default:d(()=>[c(s,{prop:"name",label:"名称"}),c(s,{prop:"sales",label:"总销售额"}),l(m).colors?x("",!0):(p(),g(s,{key:0,prop:"sales",label:"测试颜色","class-name":"customColumnHeader",width:"55"})),l(m).colors?x("",!0):(p(),g(s,{key:1,prop:"sales",label:"测试颜色","class-name":"customColumnCell",width:"55"})),c(s,{label:"折线图",width:"400"},{default:d(i=>[f("div",{id:"myChart_"+i.$index,style:{width:"100%",height:"150px"},onClick:z=>U(i.row)},null,8,ge)]),_:1}),l(m).times?x("",!0):(p(!0),R(ie,{key:2},le(l(O),(i,z)=>(p(),g(s,{key:z,label:i,prop:i,width:"100"},{default:d(E=>[f("div",{class:ne(N(E.row[i]))},ce(E.row[i]),3)]),_:2},1032,["label","prop"]))),128))]),_:1},8,["data"])),[[F,l(w)]]),c(u,{modelValue:l(y),"onUpdate:modelValue":a[2]||(a[2]=i=>de(y)?y.value=i:null),width:"60%",title:"折线图",onOpened:J},{default:d(()=>[ye]),_:1},8,["modelValue"])])}}}),Ye=ue(Ce,[["__scopeId","data-v-579829e2"]]);export{Ye as default};
