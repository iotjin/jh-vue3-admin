import{b as h,a as X,j as G,w as H,c as Y,v as Z,L as ee,M as te,P as ae,x as oe,y as le,N as se}from"./element-plus-BsPKl9cL.js";import{_ as ie}from"./index-CEc3fs9X.js";import{d as ne,r as re,_ as N,$ as T,i as de,am as ce,o as w,c as pe,W as a,P as s,u as l,ae as me,U as E,a as c,Q as _,O,V as _e,X as ge,l as ue,bm as fe,bk as ye}from"./@vue-Cr7qNLMI.js";import{b as be,d as he}from"./dict-O3nlc2b9.js";import we from"./dictDetails-BxxQ7OBZ.js";import{_ as ve}from"./addTypeDialog.vuevuetypescriptsetuptruelang-xnByjEvb.js";import{_ as Se}from"./index-DSZN33lD.js";import"./lodash-es-Blijzk1b.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-C4lJNpQw.js";import"./dayjs-C6J0yRL_.js";import"./@intlify-CHY6szXs.js";import"./@element-plus-BRXcaAil.js";import"./@ctrl-r5W6hzzQ.js";import"./@sxzz-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./addItemDialog.vuevuetypescriptsetuptruelang-CAMNYqFx.js";import"./pinia-uj-hNnAT.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CufQNpwK.js";import"./crypto-js-CYDAzdEe.js";import"./axios-B4uVmeYG.js";import"./js-cookie-Cz0CWeBA.js";import"./vue-i18n-Dt-hUQlq.js";import"./vue-Dml5yltN.js";import"./nprogress-E-flP1tB.js";import"./mockjs-DOFpbtyb.js";import"./vite-plugin-mock-WFsnnzUG.js";import"./path-to-regexp-mDz3xsrU.js";const J=g=>(fe("data-v-cf78ff9c"),g=g(),ye(),g),De={class:"bs-page-body"},ke=J(()=>c("div",{class:"mt10"},null,-1)),xe={class:"bs-page-table",style:{padding:"0px"}},Ce={class:"bs-table-btns"},Ne=["onClick"],Te={style:{color:"#00a0e9","text-decoration":"underline"}},Ee=J(()=>c("div",{slot:"header"},[c("span",{style:{"font-size":"20px"}},"字典详情")],-1)),Oe="total, sizes, prev, pager, next",Je=ne({__name:"index",setup(g){const R=re(),i=N({tableTotal:0,tableLoading:!1,tableData:[],queryParams:{page:1,limit:20,keyword:""},selectedRows:[],selectedData:{}}),{tableTotal:v,tableLoading:L,tableData:P,queryParams:r,selectedRows:Re,selectedData:B}=T(i),n=N({isShowDialog:!1,dialogType:"",dialogFormData:{}}),{isShowDialog:f,dialogType:F,dialogFormData:V}=T(n);de(()=>{m()});const m=()=>{var t=JSON.parse(JSON.stringify(i.queryParams));console.log(JSON.stringify(t)),i.tableLoading=!0,be(t).then(e=>{i.tableLoading=!1,e.code===2e4?(i.tableData=e.data,i.tableTotal=e.total):h.warning(e.msg)}).catch(e=>{i.tableLoading=!1,console.log(JSON.stringify(e))})},S=()=>{i.queryParams.page=1,m()},D=t=>t.builtin==="0",q=(t,e)=>{i.selectedData=JSON.parse(JSON.stringify(t))},I=()=>{n.dialogType="add",n.dialogFormData={},n.isShowDialog=!0},$=t=>{n.dialogType="edit",n.dialogFormData=JSON.parse(JSON.stringify(t)),n.isShowDialog=!0},U=t=>{n.dialogType="look",n.dialogFormData=JSON.parse(JSON.stringify(t)),n.isShowDialog=!0},z=t=>{var e="";t&&t.id?e=t.name:e=i.selectedRows.map(d=>d.name).join(","),X.confirm(`确定要删除字典类型 ${e} ，此操作将永久删除, 是否继续?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var d={ids:[]};if(t&&t.id)d.ids=[t.id];else{const u=i.selectedRows.map(p=>p.id);d.ids=u}A(d)})},A=t=>{console.log(JSON.stringify(t)),he(t).then(e=>{e.code===2e4?(h.success("删除成功!"),m()):h.warning(e.msg)})};return(t,e)=>{const d=G,u=H,p=Y,M=Z,y=ee,j=te,K=ie,k=ae,x=oe,Q=le,b=ce("hasPerm"),W=se;return w(),pe("div",De,[ke,a(Q,{gutter:10},{default:s(()=>[a(x,{span:8},{default:s(()=>[a(k,null,{default:s(()=>[a(M,{inline:!0,model:l(r),class:"bs-form-search"},{default:s(()=>[a(u,{style:{"margin-right":"25px"},class:"search-input"},{default:s(()=>[a(d,{modelValue:l(r).keyword,"onUpdate:modelValue":e[0]||(e[0]=o=>l(r).keyword=o),maxlength:"20",placeholder:"字典名称 / 类型",clearable:"",onKeyup:me(S,["enter","native"])},null,8,["modelValue"])]),_:1}),a(u,null,{default:s(()=>[a(p,{class:"bs-form-btn",style:{"margin-left":"0px"},type:"primary",onClick:S},{default:s(()=>[E("查询")]),_:1})]),_:1})]),_:1},8,["model"]),c("div",xe,[c("div",Ce,[_((w(),O(p,{type:"primary",icon:"i-ep-plus",onClick:I},{default:s(()=>[E(" 新增 ")]),_:1})),[[b,["dict-type-add"]]])]),_((w(),O(j,{ref_key:"tableRef",ref:R,class:"bs-table table-class","highlight-current-row":"",data:l(P),"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"},onCurrentChange:q},{default:s(()=>[a(y,{label:"字典名称",width:""},{default:s(o=>[c("span",{onClick:C=>U(o.row)},[c("a",Te,_e(o.row.name),1)],8,Ne)]),_:1}),a(y,{prop:"type",label:"字典类型",width:""}),a(y,{fixed:"right",label:"操作",width:"120"},{default:s(o=>[_(a(p,{size:"small",icon:"i-ep-edit",disabled:!D(o.row),onClick:C=>$(o.row)},null,8,["disabled","onClick"]),[[b,["dict-type-edit"]]]),_(a(p,{size:"small",icon:"i-ep-delete",type:"danger",disabled:!D(o.row),onClick:C=>z(o.row)},null,8,["disabled","onClick"]),[[b,["dict-type-delete"]]])]),_:1})]),_:1},8,["data"])),[[W,l(L)]]),_(a(K,{layout:Oe,total:l(v),page:l(r).page,"onUpdate:page":e[1]||(e[1]=o=>l(r).page=o),limit:l(r).limit,"onUpdate:limit":e[2]||(e[2]=o=>l(r).limit=o),onPagination:m},null,8,["total","page","limit"]),[[ge,l(v)>0]])])]),_:1})]),_:1}),a(x,{span:16},{default:s(()=>[a(k,null,{default:s(()=>[Ee,a(we,{data:l(B)},null,8,["data"])]),_:1})]),_:1})]),_:1}),a(ve,{"dialog-type":l(F),"is-show":l(f),"onUpdate:isShow":e[3]||(e[3]=o=>ue(f)?f.value=o:null),"dialog-data":l(V),onSuccess:m},null,8,["dialog-type","is-show","dialog-data"])])}}}),rt=Se(Je,[["__scopeId","data-v-cf78ff9c"]]);export{rt as default};
