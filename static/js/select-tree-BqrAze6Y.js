import{k as T,_ as R,F as E,G as I}from"./element-plus-CS1bfuXs.js";import{d as N,r as _,_ as A,$ as B,w as s,n as D,o as O,c as F,W as c,P as V,u as r,l as k,a1 as U}from"./@vue-DBL8Ibom.js";import{_ as j}from"./index-CN07mNdx.js";import"./lodash-es-Blijzk1b.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-BThtamsc.js";import"./dayjs-C6J0yRL_.js";import"./@intlify-CHY6szXs.js";import"./@sxzz-D9SI2xQl.js";import"./@element-plus-BmjHI8io.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./pinia-7g9vQp6f.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-fhvlCfPF.js";import"./crypto-js-CYDAzdEe.js";import"./axios-CCb-kr4I.js";import"./js-cookie-Cz0CWeBA.js";import"./vue-i18n-B8qYdFXi.js";import"./vue-rTnkxsfK.js";import"./vue-draggable-plus-BSvTyIk2.js";import"./nprogress-yi2QV7xY.js";import"./mockjs-DsSR4jwH.js";import"./vite-plugin-mock-CDJiH8Qs.js";import"./path-to-regexp-BzK_ZY7n.js";const z=N({__name:"select-tree",props:{modelValue:{type:[String,Array],default:null},data:{type:Array,default:()=>[]},props:{type:Object,default:()=>({value:"id",label:"name",children:"children",parentId:"parentId"})},placeholder:{type:String,default:"请选择"},inputPlaceholder:{type:String,default:"检索关键字"},width:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","closed","selected"],setup(n,{emit:b}){const y=b,d=n,h=_(),p=_(),t=A({treeData:[],treeProps:{},keyword:"",selectText:"",selectValue:""}),{treeData:g,treeProps:i,keyword:u,selectText:m,selectValue:G}=B(t);s(()=>t.selectText,e=>{const l=t.selectValue||null;y("update:modelValue",l)}),s(()=>d.modelValue,e=>{if(e&&e.length){const l=Array.isArray(e)?e:[e];D(()=>{p.value.setCheckedKeys(l);const a=p.value.getCheckedNodes();a&&a.length>0?o(a[0][t.treeProps.label],a[0][t.treeProps.value]):o("","")})}else o("","")},{immediate:!0}),s(()=>d.data,e=>{t.treeData=e&&e.length?e:[]},{immediate:!0}),s(()=>d.props,e=>{t.treeProps=e},{immediate:!0}),s(()=>t.keyword,e=>{p.value.filter(e)});const P=(e,l)=>e?l[t.treeProps.label].indexOf(e)!==-1:!0,v=()=>{o("","")},x=e=>{h.value.blur(),o(e[t.treeProps.label],e[t.treeProps.value]),y("selected",e[t.treeProps.value],e)};function o(e,l){t.selectText=e,t.selectValue=l}return(e,l)=>{const a=T,w=R,S=E,C=I;return O(),F("div",null,[c(C,{ref_key:"selectRef",ref:h,modelValue:r(m),"onUpdate:modelValue":l[1]||(l[1]=f=>k(m)?m.value=f:null),placeholder:n.placeholder,style:U("width:"+n.width),clearable:"",onClear:v},{default:V(()=>[c(a,{modelValue:r(u),"onUpdate:modelValue":l[0]||(l[0]=f=>k(u)?u.value=f:null),class:"select-input",placeholder:n.inputPlaceholder,clearable:""},null,8,["modelValue","placeholder"]),c(S,{value:r(i).value,label:r(i).label,class:"tree-bg"},{default:V(()=>[c(w,{ref_key:"treeRef",ref:p,"node-key":r(i).value,data:r(g),"highlight-current":"","filter-node-method":P,props:r(i),onNodeClick:x},null,8,["node-key","data","props"])]),_:1},8,["value","label"])]),_:1},8,["modelValue","placeholder","style"])])}}}),me=j(z,[["__scopeId","data-v-c86ac940"]]);export{me as default};
