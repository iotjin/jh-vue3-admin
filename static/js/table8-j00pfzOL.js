import{F as O,G as J}from"./element-plus-BU6BJsxI.js";import{d as B,_ as V,$ as C,k as g,i as F,c as p,o as l,a as u,W as c,P as i,F as b,ab as d,u as n,O as h,U as T,V as f}from"./@vue-KIsu0X2L.js";import"./lodash-es-gvlvjXa_.js";import"./async-validator-9PlIezaS.js";import"./@vueuse-D4qJsfSX.js";import"./dayjs-CIy0qJcO.js";import"./@intlify-CLUpp_Iz.js";import"./@sxzz-D_chPuIy.js";import"./@element-plus-BQ5DqatN.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";const v={style:{margin:"50px"}},M=u("h2",{style:{padding:"20px"}},"实现一",-1),G=u("h2",{style:{padding:"20px"}},"实现二",-1),L=u("h2",{style:{padding:"20px"}},"实现三",-1),P=u("span",{style:{color:"red","padding-right":"3px"}},"*",-1),R=u("h2",{style:{padding:"20px"}},"实现四",-1),ee=B({__name:"table8",setup(U){const a=V({scoreData:[{name:"张三",scores:[{subject:"语文",score:80},{subject:"数学",score:90},{subject:"英语",score:85}]},{name:"李四",scores:[{subject:"语文",score:75},{subject:"数学",score:88}]},{name:"王五",scores:[{subject:"语文",score:92},{subject:"数学",score:87},{subject:"英语",score:95},{subject:"物理",score:90}]}],tableData1:[],subjects1:[],tableData2:[],subjects2:[],scoreData2:[{name:"张三",math:90,english:85},{name:"李四",math:88,physics:92,chemistry:78},{name:"王五",english:75,history:82}]}),{scoreData:_,tableData1:j,subjects1:y,tableData2:D,subjects2:x,scoreData2:S}=C(a),A=g(()=>{const t=[];return a.scoreData.forEach(r=>{r.scores.forEach(e=>{t.find(o=>o.subject===e.subject)||t.push({subject:e.subject})})}),console.log("allSubjects",JSON.stringify(t)),t}),E=g(()=>{const t=[];return a.scoreData2.forEach(r=>{t.push(...Object.keys(r).filter(e=>e!=="name"&&!t.includes(e)))}),t});F(()=>{w(),k()});const w=()=>{a.subjects1=Array.from(new Set(a.scoreData.flatMap(t=>t.scores.map(r=>r.subject)))),console.log("this.subjects1",JSON.stringify(a.subjects1)),a.tableData1=a.scoreData.map(t=>(t.scores.forEach(r=>{t[r.subject]=r.score}),t)),console.log("this.tableData1",JSON.stringify(a.tableData1))},k=()=>{const t=new Set;a.scoreData.forEach(r=>{r.scores.forEach(e=>{t.add(e.subject)})}),a.subjects2=Array.from(t),console.log("this.subjects2",JSON.stringify(a.subjects2)),a.tableData2=a.scoreData.map(r=>{const e={name:r.name};return a.subjects2.forEach(o=>{const s=r.scores.find(m=>m.subject===o);e[o]=s?s.score:""}),e}),console.log("this.tableData2",JSON.stringify(a.tableData2))},N=(t,r)=>{const e=t.scores.find(o=>o.subject===r);return e?e.score:""};return(t,r)=>{const e=O,o=J;return l(),p("div",v,[M,c(o,{data:n(j),"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"},border:"",stripe:"",fit:"","highlight-current-row":""},{default:i(()=>[c(e,{prop:"name",label:"姓名"}),(l(!0),p(b,null,d(n(y),s=>(l(),h(e,{key:s,prop:s,label:s},null,8,["prop","label"]))),128))]),_:1},8,["data"]),G,c(o,{data:n(D),"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"},border:"",stripe:"",fit:"","highlight-current-row":""},{default:i(()=>[c(e,{prop:"name",label:"姓名"}),(l(!0),p(b,null,d(n(x),s=>(l(),h(e,{key:s,prop:s,label:s},null,8,["prop","label"]))),128))]),_:1},8,["data"]),L,c(o,{data:n(_),"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"},border:"",stripe:"",fit:"","highlight-current-row":""},{default:i(()=>[c(e,{prop:"name",label:"姓名"}),(l(!0),p(b,null,d(n(A),s=>(l(),h(e,{key:s.subject,prop:s.subject,label:s.subject},{header:i(()=>[P,u("span",null,f(s.subject),1)]),default:i(m=>[T(f(N(m.row,s.subject)),1)]),_:2},1032,["prop","label"]))),128))]),_:1},8,["data"]),R,c(o,{data:n(S),"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"},border:"",stripe:"",fit:"","highlight-current-row":""},{default:i(()=>[c(e,{prop:"name",label:"姓名"}),(l(!0),p(b,null,d(n(E),s=>(l(),h(e,{key:s,prop:s,label:s},null,8,["prop","label"]))),128))]),_:1},8,["data"])])}}});export{ee as default};
