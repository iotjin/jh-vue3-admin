import{b as m,a as ne,k as se,w as ie,F as de,G as re,c as ce,v as pe,L as me,I as ge,j as ue,J as fe,K as _e}from"./element-plus-CS1bfuXs.js";import{_ as be}from"./index-BVxL4qyA.js";import{d as he,r as ve,_ as O,$ as T,f as we,n as ye,o as v,c as U,a as r,W as l,P as s,u as i,af as xe,F as Ee,ab as Ce,O as V,U as u,l as ke,Q as A,V as g,a1 as De,R as Re,X as Le,bm as Se,bk as Oe}from"./@vue-DBL8Ibom.js";import{g as Te,a as Ue,b as Ve,d as Ae}from"./tables-Dxk5sS-t.js";import Be from"./tableFold-Ddh9e7Or.js";import{T as B}from"./timeUtils-CwNtu00v.js";import{M as Ne}from"./mockjs-DsSR4jwH.js";import{_ as Ie}from"./index-BSyJ-IJQ.js";import"./lodash-es-Blijzk1b.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-BThtamsc.js";import"./dayjs-C6J0yRL_.js";import"./@intlify-CHY6szXs.js";import"./@sxzz-D9SI2xQl.js";import"./@element-plus-BmjHI8io.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./dict-BGtSf7-R.js";import"./pinia-7g9vQp6f.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-fhvlCfPF.js";import"./crypto-js-CYDAzdEe.js";import"./axios-CCb-kr4I.js";import"./js-cookie-Cz0CWeBA.js";import"./vue-i18n-B8qYdFXi.js";import"./vue-rTnkxsfK.js";import"./vue-draggable-plus-BSvTyIk2.js";import"./nprogress-yi2QV7xY.js";import"./vite-plugin-mock-CDJiH8Qs.js";import"./path-to-regexp-BzK_ZY7n.js";const f=_=>(Se("data-v-e8d5332a"),_=_(),Oe(),_),Je={class:"bs-page-body"},Fe=f(()=>r("span",{class:"bs-form-label",style:{width:"80px"}},[r("span",{class:"icon"},"姓名:")],-1)),qe=f(()=>r("span",{class:"bs-form-label",style:{width:"80px"}},[r("span",{class:"icon"},"级别:")],-1)),Pe={class:"bs-page-table"},Me={class:"bs-table-btns"},$e=f(()=>r("span",{style:{"margin-left":"20px"}},null,-1)),ze=["onClick"],Ke={style:{color:"#00a0e9","text-decoration":"underline"}},je=f(()=>r("div",null,"启用",-1)),Ge=f(()=>r("div",null,"状态",-1)),Qe={class:"bs-tooltip-text"},We=he({__name:"index",setup(_){const E=ve(),o=O({tableTotal:0,tableLoading:!1,tableData:[],queryParams:{page:1,limit:10,startDate:"",endDate:"",name:"",level:""},dateRange:[],selectedRows:[],cellBtnLoading:"",isExpandAll:!1,detailData:{}}),{tableTotal:C,tableLoading:N,tableData:I,queryParams:p,dateRange:Xe,selectedRows:He,cellBtnLoading:Ye,isExpandAll:w}=T(o),k=O({deptOptions:[],levelOptions:[]}),{deptOptions:Ze,levelOptions:D}=T(k);we(()=>{J(),b()});const J=()=>{Te().then(t=>{t.code===2e4?k.levelOptions=t.data:m.warning(t.msg)})},b=()=>{var t=JSON.parse(JSON.stringify(o.queryParams));t.startDate=o.dateRange?B.startOfDay(o.dateRange[0]):"",t.endDate=o.dateRange?B.endOfDay(o.dateRange[1]):"",console.log(JSON.stringify(t)),o.tableLoading=!0,Ue(t).then(e=>{o.tableLoading=!1,e.code===2e4?(o.tableData=F(e.data),o.tableTotal=e.total,L()):m.warning(e.msg)}).catch(e=>{o.tableLoading=!1,console.log(JSON.stringify(e))})},F=t=>{var e=t;for(let n=0;n<e.length;n++){const c=Ne.mock({"items|1-8":[{id:"@id",name:"产品名称"+n,money:"@float(0, 1000, 1, 2)","content|1-18":"这是产品描述","isUse|1":["0","1"]}]});e[n].foldList=c.items}return e},R=()=>{o.queryParams.page=1,b()},y=t=>!0,q=t=>{console.log("row",JSON.stringify(t)),m.warning(t.name)},P=t=>{o.selectedRows=t},L=()=>{ye(()=>{M(o.tableData,o.isExpandAll)})},M=(t,e)=>{t.forEach(n=>{E.value.toggleRowExpansion(n,e)})},$=()=>{console.log("onRemove")},z=(t,e)=>{const n=e.some(c=>c.id===t.id);console.log("isExpend",n),n&&K(t.id)},K=t=>{console.log("展开params: "+t),o.tableLoading=!0,Ve(t).then(e=>{o.tableLoading=!1,e.code===2e4?o.detailData=e.data:m.warning("Failed to get table detail. Error details: "+e.msg)}).catch(e=>{o.tableLoading=!1,console.log("e",JSON.stringify(e)),m.error("Failed to get table detail. Error details: ",e)})},j=(t,e)=>{const n=e.findIndex(c=>c.value===t);if(n!==-1)return e[n].label},G=t=>t.status==="0"?"#E6A23C":"#67C23A",Q=()=>{console.log("新增")},W=t=>{const e=JSON.parse(JSON.stringify(t&&t.id?t:o.selectedRows[0]));console.log("params",JSON.stringify(e))},X=t=>{var e="";t&&t.id?e=t.name:e=o.selectedRows.map(n=>n.name).join(","),ne.confirm(`确定要删除用户 ${e} ，此操作将永久删除, 是否继续?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var n={ids:[]};if(t&&t.id)n.ids=[t.id];else{const c=o.selectedRows.map(x=>x.id);n.ids=c}H(n)})},H=t=>{Ae(t).then(e=>{e.code===2e4?(m.success("删除成功!"),b()):m.warning(e.msg)})};return(t,e)=>{const n=se,c=ie,x=de,Y=re,h=ce,Z=pe,ee=me,d=ge,te=ue,ae=fe,le=be,oe=_e;return v(),U("div",null,[r("div",Je,[l(Z,{inline:!0,model:i(p),class:"bs-form-search mt10"},{default:s(()=>[l(c,null,{default:s(()=>[Fe,l(n,{modelValue:i(p).name,"onUpdate:modelValue":e[0]||(e[0]=a=>i(p).name=a),maxlength:"20",placeholder:"请输入",clearable:"",onKeyup:xe(R,["enter","native"])},null,8,["modelValue"])]),_:1}),l(c,null,{default:s(()=>[qe,l(Y,{modelValue:i(p).level,"onUpdate:modelValue":e[1]||(e[1]=a=>i(p).level=a),placeholder:"请选择",filterable:"",clearable:""},{default:s(()=>[(v(!0),U(Ee,null,Ce(i(D),a=>(v(),V(x,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(c,null,{default:s(()=>[l(h,{class:"bs-form-btn",type:"primary",onClick:R},{default:s(()=>[u("查询")]),_:1})]),_:1})]),_:1},8,["model"]),r("div",Pe,[r("div",Me,[l(ee,{modelValue:i(w),"onUpdate:modelValue":e[2]||(e[2]=a=>ke(w)?w.value=a:null),style:{padding:"3px 0"},onChange:L},{default:s(()=>[u("Unfold All")]),_:1},8,["modelValue"]),$e,l(h,{type:"primary",icon:"i-ep-plus",onClick:Q},{default:s(()=>[u(" 新增 ")]),_:1})]),A((v(),V(ae,{ref_key:"tableRef",ref:E,class:"bs-table",data:i(I),stripe:!0,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"},onSelectionChange:P,onExpandChange:z},{default:s(()=>[l(d,{type:"expand"},{default:s(a=>[l(Be,{"fold-list":a.row.foldList,onChange:$},null,8,["fold-list"])]),_:1}),l(d,{prop:"number",type:"index",label:"序号","min-width":"60"}),l(d,{type:"selection",width:"55",selectable:y}),l(d,{label:"操作人","min-width":"100"},{default:s(a=>[r("span",{onClick:S=>q(a.row)},[r("a",Ke,g(a.row.name),1)],8,ze)]),_:1}),l(d,{label:"状态"},{default:s(a=>[r("div",{style:De({background:G(a.row)}),class:"tagClass"},g(a.row.status==="0"?"停用":"启用"),5)]),_:1}),l(d,{prop:"isUse",label:"启用状态"},{header:s(()=>[je,Ge]),default:s(a=>[u(g(a.row.isUse==0?"停用":"启用"),1)]),_:1}),l(d,{label:"级别","min-width":"100"},{default:s(a=>[r("div",{class:Re(a.row.level=="1"?"b-tag-success":a.row.level=="2"?"b-tag-warning":"b-tag-error")},g(j(a.row.level,i(D))),3)]),_:1}),l(d,{prop:"isUse",label:"启用"},{default:s(a=>[u(g(a.row.isUse==0?"停用":"启用"),1)]),_:1}),l(d,{prop:"phone",label:"手机号","min-width":"200"}),l(d,{prop:"money",label:"金额",sortable:""}),l(d,{prop:"age",label:"年龄",sortable:""}),l(d,{prop:"createDate",label:"创建时间","min-width":"180"}),l(d,{prop:"updateDate",label:"更新时间","min-width":"180"}),l(d,{label:"备注","min-width":"200"},{default:s(a=>[l(te,{"visible-arrow":!1,effect:"light",content:a.row.content,placement:"bottom"},{default:s(()=>[r("span",Qe,g(a.row.content),1)]),_:2},1032,["content"])]),_:1}),l(d,{fixed:"right",label:"操作",width:"200"},{default:s(a=>[l(h,{size:"small",icon:"i-ep-edit",disabled:!y(a.row),onClick:S=>W(a.row)},null,8,["disabled","onClick"]),l(h,{size:"small",icon:"i-ep-delete",type:"danger",disabled:!y(a.row),onClick:S=>X(a.row)},null,8,["disabled","onClick"])]),_:1})]),_:1},8,["data"])),[[oe,i(N)]]),A(l(le,{total:i(C),page:i(p).page,"onUpdate:page":e[3]||(e[3]=a=>i(p).page=a),limit:i(p).limit,"onUpdate:limit":e[4]||(e[4]=a=>i(p).limit=a),onPagination:b},null,8,["total","page","limit"]),[[Le,i(C)>0]])])])])}}}),Ot=Ie(We,[["__scopeId","data-v-e8d5332a"]]);export{Ot as default};
