import{b as I,f as E,L as P,d as k,w as N,v as $}from"./element-plus-C1_tH_9n.js";import{aj as q,o as f,c as V,a as F,d as b,O as x,P as d,u as p,W as s,l as v,r as g,w as H,F as L}from"./@vue-ROmf2CMa.js";import{u as B,d as R}from"./index-CU4XysvA.js";import{x as C}from"./@vueuse-Cv4Wji3s.js";import{_ as S}from"./index-B8W-cxH9.js";import"./lodash-es-Blijzk1b.js";import"./async-validator-DKvM95Vc.js";import"./dayjs-C6J0yRL_.js";import"./@intlify-CHY6szXs.js";import"./@element-plus-Ds9axIkZ.js";import"./@ctrl-r5W6hzzQ.js";import"./@sxzz-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./pinia-CNAM5qpy.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CP6FQFzT.js";import"./crypto-js-CYDAzdEe.js";import"./axios-mH-cpkvd.js";import"./js-cookie-Cz0CWeBA.js";import"./vue-i18n-BHOT87Ho.js";import"./vue-DoOO_nKc.js";import"./nprogress-E-flP1tB.js";import"./mockjs-DOFpbtyb.js";import"./vite-plugin-mock-B2SH9_m9.js";import"./path-to-regexp-Cdn6gXUT.js";const z={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},G=F("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"},null,-1),W=[G];function Z(_,u){return f(),V("svg",z,[...W])}const M=q({name:"ep-plus",render:Z}),D=["src"],Q=b({__name:"SingleUpload",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(_,{emit:u}){const t=C(_,"modelValue",u);async function r(n){const{data:c}=await B(n.file);t.value=c.url}function o(n){return n.size>2*1048*1048?(I.warning("上传图片不能大于2M"),!1):!0}return(n,c)=>{const w=M,y=E,l=P;return f(),x(l,{modelValue:p(t),"onUpdate:modelValue":c[0]||(c[0]=e=>v(t)?t.value=e:null),class:"single-uploader","show-file-list":!1,"list-type":"picture-card","before-upload":o,"http-request":r},{default:d(()=>[p(t)?(f(),V("img",{key:0,referrerPolicy:"no-referrer",src:p(t),class:"single"},null,8,D)):(f(),x(y,{key:1,class:"single-uploader-icon"},{default:d(()=>[s(w)]),_:1}))]),_:1},8,["modelValue"])}}}),A=S(Q,[["__scopeId","data-v-600223ab"]]),K=["src"],O=b({__name:"MultiUpload",props:{modelValue:{type:Array,default:[]},limit:{type:Number,default:10}},emits:["update:modelValue"],setup(_,{emit:u}){const m=u,h=_,t=g(""),r=g(!1),o=g([]);H(()=>h.modelValue,l=>{const e=o.value.map(a=>a.url);e.length>0&&e.length===l.length&&e.every(a=>l.some(i=>i===a))&&l.every(a=>e.some(i=>i===a))||(o.value=l.map(a=>({url:a})))},{immediate:!0});async function n(l){const{data:e}=await B(l.file),a=o.value.findIndex(i=>i.uid==l.file.uid);o.value.splice(a,1,{name:e.name,url:e.url}),m("update:modelValue",o.value.map(i=>i.url))}function c(l){const e=l.url;e&&R(e).then(()=>{m("update:modelValue",o.value.map(a=>a.url))})}function w(l){return l.size>2*1048*1048?(I.warning("上传图片不能大于2M"),!1):!0}const y=l=>{t.value=l.url,r.value=!0};return(l,e)=>{const a=M,i=P,j=k;return f(),V(L,null,[s(i,{"file-list":p(o),"onUpdate:fileList":e[0]||(e[0]=U=>v(o)?o.value=U:null),"list-type":"picture-card","before-upload":w,"http-request":n,"on-remove":c,"on-preview":y,limit:h.limit},{default:d(()=>[s(a)]),_:1},8,["file-list","limit"]),s(j,{modelValue:p(r),"onUpdate:modelValue":e[1]||(e[1]=U=>v(r)?r.value=U:null)},{default:d(()=>[F("img",{referrerPolicy:"no-referrer","w-full":"",src:p(t),alt:"Preview Image"},null,8,K)]),_:1},8,["modelValue"])],64)}}}),T={class:"app-container"},Ue=b({__name:"upload",setup(_){const u=g("https://gitee.com/iotjh/Picture/raw/master/GitHub/Vue3/gourdBaby.gif"),m=g(["https://s2.loli.net/2023/05/24/yNsxFC8rLHMZQcK.jpg","https://s2.loli.net/2023/05/24/RuHFMwW4rG5lIqs.jpg","https://s2.loli.net/2023/05/24/ZPiGbcpR91WqInB.jpg","https://s2.loli.net/2023/05/24/e1bcnEq3MFdmlNL.jpg","https://s2.loli.net/2023/05/24/wZTSPj1yDQNcuhU.jpg"]);return(h,t)=>{const r=N,o=$;return f(),V("div",T,[s(o,null,{default:d(()=>[s(r,{label:"单图上传"},{default:d(()=>[s(A,{modelValue:p(u),"onUpdate:modelValue":t[0]||(t[0]=n=>v(u)?u.value=n:null)},null,8,["modelValue"])]),_:1}),s(r,{label:"多图上传"},{default:d(()=>[s(O,{modelValue:p(m),"onUpdate:modelValue":t[1]||(t[1]=n=>v(m)?m.value=n:null)},null,8,["modelValue"])]),_:1})]),_:1})])}}});export{Ue as default};
