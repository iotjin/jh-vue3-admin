import{j as S,T as C,I,J as R}from"./element-plus-d9b7f19c.js";import{d as E,r as h,$ as N,a0 as A,w as s,n as B,o as D,c as O,X as d,Q as V,u as r,l as b,a2 as j}from"./@vue-9ba90ccc.js";import{_ as U}from"./index-fed18894.js";import"./lodash-es-d29772ce.js";import"./async-validator-dee29e8b.js";import"./@vueuse-f39d50a6.js";import"./dayjs-bff41acc.js";import"./@intlify-767c1c72.js";import"./source-map-7d7e1c08.js";import"./@element-plus-c398101b.js";import"./@ctrl-f8748455.js";import"./@sxzz-c75af06c.js";import"./escape-html-849d0975.js";import"./normalize-wheel-es-ed76fb12.js";import"./pinia-87603f94.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-c8173181.js";import"./crypto-js-49b96eff.js";import"./axios-4a70c6fc.js";import"./js-cookie-edb2da2a.js";import"./vue-i18n-1488b031.js";import"./vue-ef783175.js";import"./nprogress-84d8f06a.js";import"./mockjs-8d5feca7.js";import"./vite-plugin-mock-5220d95c.js";import"./path-to-regexp-36ea9d8d.js";const z=E({__name:"select-tree",props:{modelValue:{type:[String,Array],default:null},data:{type:Array,default:()=>[]},props:{type:Object,default:()=>({value:"id",label:"name",children:"children",parentId:"parentId"})},placeholder:{type:String,default:"请选择"},inputPlaceholder:{type:String,default:"检索关键字"},width:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","closed","selected"],setup(n,{emit:_}){const i=n,y=h(),p=h(),t=N({treeData:[],treeProps:{},keyword:"",selectText:"",selectValue:""}),{treeData:k,treeProps:c,keyword:u,selectText:m,selectValue:F}=A(t);s(()=>t.selectText,e=>{const l=t.selectValue||null;_("update:modelValue",l)}),s(()=>i.modelValue,e=>{if(e&&e.length){const l=Array.isArray(e)?e:[e];B(()=>{p.value.setCheckedKeys(l);const a=p.value.getCheckedNodes();a&&a.length>0?o(a[0][t.treeProps.label],a[0][t.treeProps.value]):o("","")})}else o("","")},{immediate:!0}),s(()=>i.data,e=>{t.treeData=e&&e.length?e:[]},{immediate:!0}),s(()=>i.props,e=>{t.treeProps=e},{immediate:!0}),s(()=>t.keyword,e=>{p.value.filter(e)});const g=(e,l)=>e?l[t.treeProps.label].indexOf(e)!==-1:!0,v=()=>{o("","")},x=e=>{y.value.blur(),o(e[t.treeProps.label],e[t.treeProps.value]),_("selected",e[t.treeProps.value],e)};function o(e,l){t.selectText=e,t.selectValue=l}return(e,l)=>{const a=S,P=C,w=I,T=R;return D(),O("div",null,[d(T,{ref_key:"selectRef",ref:y,modelValue:r(m),"onUpdate:modelValue":l[1]||(l[1]=f=>b(m)?m.value=f:null),placeholder:n.placeholder,style:j("width:"+n.width),clearable:"",onClear:v},{default:V(()=>[d(a,{modelValue:r(u),"onUpdate:modelValue":l[0]||(l[0]=f=>b(u)?u.value=f:null),class:"select-input",placeholder:n.inputPlaceholder,clearable:""},null,8,["modelValue","placeholder"]),d(w,{value:r(c).value,label:r(c).label,class:"tree-bg"},{default:V(()=>[d(P,{ref_key:"treeRef",ref:p,"node-key":r(c).value,data:r(k),"highlight-current":"","filter-node-method":g,props:r(c),onNodeClick:x},null,8,["node-key","data","props"])]),_:1},8,["value","label"])]),_:1},8,["modelValue","placeholder","style"])])}}});const me=U(z,[["__scopeId","data-v-c86ac940"]]);export{me as default};
