import{b as N,I as H,J as K,w as W,j as Y,i as Z,R as ee,S as le,v as ae,c as oe,d as te}from"./element-plus-d9b7f19c.js";import{o as p,c as T,a as D,d as ne,r as de,$ as V,a0 as I,w as c,i as ie,X as d,Q as i,u as l,F as re,ab as se,P as h,U as S,V as _,l as ue,bh as pe,bf as me}from"./@vue-9ba90ccc.js";import{n as ce,_ as ge}from"./index-fed18894.js";import fe from"./select-tree-e29f47c6.js";const _e=[{value:"catalog",label:"目录"},{value:"menu",label:"菜单"},{value:"button",label:"按钮"}],be={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},ye=D("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896a448 448 0 0 1 0-896zm23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352c-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992c13.376-19.712 35.2-28.864 66.176-28.864c23.936 0 42.944 6.336 56.32 19.712c12.672 13.376 19.712 31.68 19.712 54.912c0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408c-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76c6.336-12.672 15.488-24.64 28.16-35.2c33.792-29.568 54.208-48.576 60.544-55.616c16.896-22.528 26.048-51.392 26.048-86.592c0-42.944-14.08-76.736-42.24-101.376c-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784a49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72a51.968 51.968 0 0 0-15.488-38.016a55.936 55.936 0 0 0-39.424-14.784z"},null,-1),he=[ye];function Se(m,b){return p(),T("svg",be,he)}const Te={name:"ep-question-filled",render:Se},De=m=>(pe("data-v-07ad20f1"),m=m(),me(),m),Ve={class:"bs-dialog"},ve=De(()=>D("span",null,"菜单编码:",-1)),Fe={key:0,class:"bs-dialog-footer"},Oe=ne({__name:"addDialog",props:{isShow:{type:Boolean,default:!1},dialogType:{type:String,default:"add"},dialogData:{type:Object,default:()=>({})},title:{type:String,default:""},dialogTreeData:{type:Array,default:()=>[]}},emits:["update:isShow","closed","success"],setup(m,{emit:b}){const s=m,g=de(),o=V({dialogTitle:"提示",isShowDialog:!1,dialogSubmitBtnLoading:!1,dialogIsLook:!1,initFormData:{},dialogFormData:{id:"",menuType:"menu",title:"",parentId:"",parentTitle:"",sort:"",code:"",component:"",icon:"",hidden:""}}),{dialogTitle:J,isShowDialog:y,dialogSubmitBtnLoading:x,dialogIsLook:v,dialogFormData:n}=I(o),F=V({menuTypeOptions:_e,menuTreeData:[],treeProps:{value:"id",label:"title",children:"children"}}),{menuTypeOptions:B,menuTreeData:E,treeProps:L}=I(F),q=V({menuType:[{required:!0,message:"请选择",trigger:["blur","change"]}],title:[{required:!0,message:"请输入",trigger:["blur","change"]},{min:1,max:32,message:"32字符以内",trigger:["blur","change"]}],parentId:[{required:!1,message:"请选择",trigger:["blur","change"]}],sort:[{required:!0,message:"请输入正确的排序号",trigger:["blur"]},{pattern:/^[1-9]\d{0,2}$/,message:"请输入0-999之间的正整数",trigger:["blur"]}],code:[{required:!0,message:"请输入",trigger:"blur"},{min:1,max:32,message:"32字符以内",trigger:"blur"}],component:[{required:!0,message:"请输入",trigger:["blur","change"]},{min:1,max:32,message:"32字符以内",trigger:["blur","change"]}],hidden:[{required:!0,message:"请选择",trigger:"blur"}]});c(()=>s.isShow,a=>{o.isShowDialog=a}),c(()=>o.isShowDialog,a=>{b("update:isShow",a)}),c(()=>s.title,a=>{o.dialogTitle=a.length?a:o.dialogTitle}),c(()=>s.dialogData,a=>{s.dialogType==="add"?o.dialogFormData=JSON.parse(JSON.stringify(o.initFormData)):o.dialogFormData=JSON.parse(JSON.stringify(a))}),c(()=>s.dialogType,a=>{o.dialogTitle=s.title||(a==="add"?"新增":a==="edit"?"编辑":a==="look"?"查看":o.dialogTitle),o.dialogIsLook=a==="look"},{immediate:!0}),c(()=>s.dialogTreeData,a=>{const e=JSON.parse(JSON.stringify(a));F.menuTreeData=O(e,"button")}),ie(()=>{o.initFormData=JSON.parse(JSON.stringify(o.dialogFormData))});const U=()=>{s.dialogType==="add"&&g.value.clearValidate()},C=()=>{o.dialogIsLook||g.value.resetFields(),b("closed",{})},O=(a,e)=>a.filter(r=>r.menuType===e?!1:(r.children&&r.children.length>0&&(r.children=O(r.children,e)),!0)),R=()=>{o.dialogFormData.parentId="",o.dialogFormData.parentTitle="",o.dialogFormData.code="",o.dialogFormData.component="",o.dialogFormData.hidden="",g.value.clearValidate()},$=(a,e)=>{console.log(JSON.stringify(a)),console.log(JSON.stringify(e))},M=()=>{g.value.validate(a=>{a&&j()})},j=()=>{const a=JSON.parse(JSON.stringify(o.dialogFormData));o.dialogFormData.menuType==="catalog"&&(a.component="Layout"),s.dialogType==="edit"&&delete a.children,console.log(JSON.stringify(a));const e=s.dialogType==="add"?"新增成功!":"编辑成功!";o.dialogSubmitBtnLoading=!0,ce(a).then(r=>{o.dialogSubmitBtnLoading=!1,r.code===2e4?(N.success(e),o.isShowDialog=!1,b("success",{})):N.warning(r.msg)}).catch(r=>{o.dialogSubmitBtnLoading=!1,console.log(JSON.stringify(r))})};return(a,e)=>{const r=H,z=K,u=W,f=Y,A=Te,P=Z,w=ee,G=le,Q=ae,k=oe,X=te;return p(),T("div",null,[d(X,{title:l(J),modelValue:l(y),"onUpdate:modelValue":e[10]||(e[10]=t=>ue(y)?y.value=t:null),top:"8vh",width:"55%","destroy-on-close":"","close-on-click-modal":!1,onOpened:U,onClosed:C},{default:i(()=>[D("div",Ve,[d(Q,{ref_key:"dialogFormRef",ref:g,model:l(n),inline:!0,rules:l(q),"label-width":"120px",disabled:l(v)},{default:i(()=>[d(u,{label:"菜单类型:",prop:"menuType"},{default:i(()=>[d(z,{modelValue:l(n).menuType,"onUpdate:modelValue":e[0]||(e[0]=t=>l(n).menuType=t),placeholder:"请选择菜单类型",disabled:m.dialogType!=="add","collapse-tags":"",clearable:"",onChange:R},{default:i(()=>[(p(!0),T(re,null,se(l(B),t=>(p(),h(r,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),d(u,{label:"菜单名称:",prop:"title"},{default:i(()=>[d(f,{modelValue:l(n).title,"onUpdate:modelValue":e[1]||(e[1]=t=>l(n).title=t),placeholder:"请输入菜单名称",clearable:""},null,8,["modelValue"])]),_:1}),l(n).menuType!=="catalog"?(p(),h(u,{key:0,label:"上级菜单:",prop:"parentId"},{default:i(()=>[d(fe,{modelValue:l(n).parentId,"onUpdate:modelValue":e[2]||(e[2]=t=>l(n).parentId=t),placeholder:"请选择上级菜单",props:l(L),data:l(E),onSelected:$},null,8,["modelValue","props","data"])]),_:1})):S("",!0),d(u,{label:"排序:",prop:"sort"},{default:i(()=>[d(f,{modelValue:l(n).sort,"onUpdate:modelValue":e[3]||(e[3]=t=>l(n).sort=t),type:"number",placeholder:"请输入排序",clearable:""},null,8,["modelValue"])]),_:1}),d(u,{label:"菜单编码:",prop:"code"},{label:i(()=>[D("div",null,[ve,d(P,{content:l(n).menuType!=="button"?"对应路由path和name":"定义的按钮权限标识",effect:"dark"},{default:i(()=>[d(A)]),_:1},8,["content"])])]),default:i(()=>[d(f,{modelValue:l(n).code,"onUpdate:modelValue":e[4]||(e[4]=t=>l(n).code=t),placeholder:"请输入菜单编码",clearable:""},null,8,["modelValue"])]),_:1}),l(n).menuType==="menu"?(p(),h(u,{key:1,label:"组件路径:",prop:"component",class:"input-width"},{default:i(()=>[d(f,{modelValue:l(n).component,"onUpdate:modelValue":e[5]||(e[5]=t=>l(n).component=t),placeholder:"请输入组件路径",clearable:""},{prepend:i(()=>[_("src/views/")]),_:1},8,["modelValue"])]),_:1})):S("",!0),d(u,{label:"图标:",prop:"icon"},{default:i(()=>[d(f,{modelValue:l(n).icon,"onUpdate:modelValue":e[6]||(e[6]=t=>l(n).icon=t),placeholder:"请输入图标",clearable:""},null,8,["modelValue"])]),_:1}),l(n).menuType!=="button"?(p(),h(u,{key:2,label:"状态:",prop:"hidden"},{default:i(()=>[d(G,{modelValue:l(n).hidden,"onUpdate:modelValue":e[7]||(e[7]=t=>l(n).hidden=t)},{default:i(()=>[d(w,{label:!0},{default:i(()=>[_("隐藏")]),_:1}),d(w,{label:!1},{default:i(()=>[_("显示")]),_:1})]),_:1},8,["modelValue"])]),_:1})):S("",!0)]),_:1},8,["model","rules","disabled"]),l(v)?S("",!0):(p(),T("div",Fe,[d(k,{onClick:e[8]||(e[8]=t=>y.value=!1)},{default:i(()=>[_("取消")]),_:1}),d(k,{loading:l(x),type:"primary",onClick:e[9]||(e[9]=t=>M())},{default:i(()=>[_("保存")]),_:1},8,["loading"])]))])]),_:1},8,["title","modelValue"])])}}});const we=ge(Oe,[["__scopeId","data-v-07ad20f1"]]),xe=Object.freeze(Object.defineProperty({__proto__:null,default:we},Symbol.toStringTag,{value:"Module"}));export{we as A,xe as a,_e as d};
