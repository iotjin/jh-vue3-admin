import{v as W,w as X,k as H,c as Y,D as Z,F as ee,j as te,G as ae,b as k,a as oe}from"./element-plus-BTXRAC_-.js";import{_ as ie}from"./index-ZlgNM_hh.js";import{d as le,r as se,_ as J,$ as P,w as ne,an as de,c as S,o as m,W as i,u as l,a as g,P as s,af as re,U as h,Q as _,O as w,V as B,X as ce,l as pe,bm as me,bk as _e}from"./@vue-KIsu0X2L.js";import{c as ge,e as ue}from"./dict-D2y79XyQ.js";import{_ as be}from"./addItemDialog.vuevuetypescriptsetuptruelang-B9kF_ix0.js";import{_ as fe}from"./index-eLds9Yb_.js";import"./lodash-es-gvlvjXa_.js";import"./async-validator-9PlIezaS.js";import"./@vueuse-D4qJsfSX.js";import"./dayjs-CIy0qJcO.js";import"./@intlify-CLUpp_Iz.js";import"./@sxzz-D_chPuIy.js";import"./@element-plus-BQ5DqatN.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./pinia-B7D0yCDv.js";import"./vue-router-Zv4ZtmtT.js";import"./crypto-js-DkIsdnw7.js";import"./axios-Br0q4W-C.js";import"./js-cookie-Cz0CWeBA.js";import"./vue-i18n-CSWdtZJ9.js";import"./vue-tv3Mw8Sw.js";import"./vue-draggable-plus-DB7mI_zb.js";import"./nprogress-5SZ_0UJX.js";import"./mockjs-CidrXOpc.js";import"./vite-plugin-mock-Ckf4sHq3.js";import"./path-to-regexp-BzK_ZY7n.js";const ye=u=>(me("data-v-37cb50af"),u=u(),_e(),u),he={key:0},we=ye(()=>g("div",{class:"vertical-line"},"点击字典查看详情",-1)),ve=[we],De={key:1},ke={class:"bs-page-table",style:{padding:"0px"}},Se={class:"bs-table-btns"},Te=["onClick"],Ce={style:{color:"#00a0e9","text-decoration":"underline"}},xe={class:"bs-tooltip-text"},Ne=le({__name:"dictDetails",props:{data:{type:Object,default:()=>({})}},setup(u){const F=u,I=se(),o=J({tableTotal:0,tableLoading:!1,tableData:[],queryParams:{page:1,limit:10,keyword:""},selectedRows:[],dictTypeData:{}}),{tableTotal:T,tableLoading:L,tableData:C,queryParams:r,selectedRows:x}=P(o),n=J({isShowDialog:!1,dialogType:"",dialogFormData:{}}),{isShowDialog:v,dialogType:V,dialogFormData:q}=P(n);ne(()=>F.data,e=>{e?(o.dictTypeData=JSON.parse(JSON.stringify(e)),b()):(o.tableData=[],o.tableTotal=0)});const b=()=>{var e=JSON.parse(JSON.stringify(o.queryParams));e.type=o.dictTypeData.type,console.log(JSON.stringify(e)),o.tableLoading=!0,ge(e).then(t=>{o.tableLoading=!1,t.code===2e4?(o.tableData=t.data,o.tableTotal=t.total):k.warning(t.msg)}).catch(t=>{o.tableLoading=!1,console.log(JSON.stringify(t))})},N=()=>{o.queryParams.page=1,b()},D=e=>e.builtin==="0",$=e=>{o.selectedRows=e},U=()=>{n.dialogType="add",n.dialogFormData={id:"",label:"",value:"",sort:"",type:o.dictTypeData.type,builtin:"0",notes:""},n.isShowDialog=!0},O=e=>{const t=JSON.parse(JSON.stringify(e&&e.id?e:o.selectedRows[0]));n.dialogType="edit",n.dialogFormData=t,n.isShowDialog=!0},E=e=>{var t="";e&&e.id?t=e.label:t=o.selectedRows.map(c=>c.label).join(","),oe.confirm(`确定要删除字典项 ${t} ，此操作将永久删除, 是否继续?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var c={ids:[]};if(e&&e.id)c.ids=[e.id];else{const y=o.selectedRows.map(d=>d.id);c.ids=y}A(c)})},A=e=>{console.log(JSON.stringify(e)),ue(e).then(t=>{t.code===2e4?(k.success("删除成功!"),b()):k.warning(t.msg)})},j=e=>{n.dialogType="look",n.dialogFormData=JSON.parse(JSON.stringify(e)),n.isShowDialog=!0};return(e,t)=>{const c=H,y=X,d=Y,z=W,p=ee,K=te,M=ae,G=ie,f=de("hasPerm"),Q=Z;return m(),S("div",null,[l(C).length?(m(),S("div",De,[i(z,{inline:!0,model:l(r),class:"bs-form-search"},{default:s(()=>[i(y,{style:{"margin-right":"25px"},class:"search-input"},{default:s(()=>[i(c,{modelValue:l(r).keyword,"onUpdate:modelValue":t[0]||(t[0]=a=>l(r).keyword=a),maxlength:"20",placeholder:"字典标签 / 字典值",clearable:"",onKeyup:re(N,["enter","native"])},null,8,["modelValue"])]),_:1}),i(y,null,{default:s(()=>[i(d,{class:"bs-form-btn",style:{"margin-left":"0px"},type:"primary",onClick:N},{default:s(()=>[h("查询")]),_:1})]),_:1})]),_:1},8,["model"]),g("div",ke,[g("div",Se,[_((m(),w(d,{type:"primary",icon:"i-ep-plus",onClick:U},{default:s(()=>[h(" 新增 ")]),_:1})),[[f,["dict-item-add"]]]),_((m(),w(d,{type:"primary",icon:"i-ep-edit",disabled:l(x).length!==1,onClick:O},{default:s(()=>[h(" 编辑 ")]),_:1},8,["disabled"])),[[f,["dict-item-edit"]]]),_((m(),w(d,{type:"danger",icon:"i-ep-delete",disabled:l(x).length==0,onClick:E},{default:s(()=>[h(" 删除 ")]),_:1},8,["disabled"])),[[f,["dict-item-delete"]]])]),_((m(),w(M,{ref_key:"tableRef",ref:I,class:"bs-table",data:l(C),stripe:!0,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"},onSelectionChange:$},{default:s(()=>[i(p,{type:"selection",width:"55",selectable:D}),i(p,{label:"字典标签",width:""},{default:s(a=>[g("span",{onClick:R=>j(a.row)},[g("a",Ce,B(a.row.label),1)],8,Te)]),_:1}),i(p,{prop:"value",label:"字典值",width:""}),i(p,{prop:"type",label:"所属字典",width:""}),i(p,{prop:"sort",label:"排序"}),i(p,{label:"备注","min-width":"100"},{default:s(a=>[i(K,{"visible-arrow":!1,effect:"light",content:a.row.notes,placement:"bottom"},{default:s(()=>[g("span",xe,B(a.row.notes),1)]),_:2},1032,["content"])]),_:1}),i(p,{fixed:"right",label:"操作",width:"120"},{default:s(a=>[_(i(d,{size:"small",icon:"i-ep-edit",disabled:!D(a.row),onClick:R=>O(a.row)},null,8,["disabled","onClick"]),[[f,["dict-item-edit"]]]),_(i(d,{size:"small",icon:"i-ep-delete",type:"danger",disabled:!D(a.row),onClick:R=>E(a.row)},null,8,["disabled","onClick"]),[[f,["dict-item-delete"]]])]),_:1})]),_:1},8,["data"])),[[Q,l(L)]]),_(i(G,{total:l(T),page:l(r).page,"onUpdate:page":t[1]||(t[1]=a=>l(r).page=a),limit:l(r).limit,"onUpdate:limit":t[2]||(t[2]=a=>l(r).limit=a),onPagination:b},null,8,["total","page","limit"]),[[ce,l(T)>0]])])])):(m(),S("div",he,ve)),i(be,{"dialog-type":l(V),"is-show":l(v),"onUpdate:isShow":t[3]||(t[3]=a=>pe(v)?v.value=a:null),"dialog-data":l(q),onSuccess:b},null,8,["dialog-type","is-show","dialog-data"])])}}}),at=fe(Ne,[["__scopeId","data-v-37cb50af"]]);export{at as default};
