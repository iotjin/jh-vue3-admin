import{b as v,d as z,v as A,w as W,k as K,F as Q,G as Z,H as ee,M as le,N as ae,c as te}from"./element-plus-DZ2IrBrA.js";import{g as oe,a as de}from"./base-cuaEHV6j.js";import{s as re}from"./user-CtCc-6KO.js";import{R as ie,a as se}from"./checkUtils-D9STjg8r.js";import{d as ne,r as ue,_ as w,$ as T,w as D,i as me,c as Y,o as u,W as o,u as a,l as pe,P as r,a as ge,S as f,O as g,F as U,ab as x,U as S}from"./@vue-KIsu0X2L.js";import{_ as fe}from"./index-tUrT1slD.js";import"./lodash-es-gvlvjXa_.js";import"./async-validator-9PlIezaS.js";import"./@vueuse-D4qJsfSX.js";import"./dayjs-CIy0qJcO.js";import"./@intlify-CLUpp_Iz.js";import"./@sxzz-D_chPuIy.js";import"./@element-plus-BU8E8ZTx.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./dict-DCH3enxd.js";import"./pinia-B7D0yCDv.js";import"./vue-router-Zv4ZtmtT.js";import"./crypto-js-CpHmt7sX.js";import"./axios-Br0q4W-C.js";import"./js-cookie-Cz0CWeBA.js";import"./vue-i18n-CSWdtZJ9.js";import"./vue-tv3Mw8Sw.js";import"./vue-draggable-plus-DB7mI_zb.js";import"./nprogress-5SZ_0UJX.js";import"./mockjs-BGWc0pdN.js";import"./vite-plugin-mock-CF_1yVIv.js";import"./path-to-regexp-BzK_ZY7n.js";const be={class:"bs-dialog input-width"},De={key:0,class:"bs-dialog-footer"},ce=ne({__name:"addDialog",props:{isShow:{type:Boolean,default:!1},dialogType:{type:String,default:"add"},dialogData:{type:Object,default:()=>({})},title:{type:String,default:""}},emits:["update:isShow","closed","success"],setup(p,{emit:I}){const _=I,m=p,c=ue(),i=w({dialogTitle:"提示",isShowDialog:!1,dialogSubmitBtnLoading:!1,dialogIsLook:!1,initFormData:{},dialogFormData:{id:"",name:"",loginName:"",userNumber:"",userExpiryDate:"",deptId:"",status:"",notes:"",phone:"",age:"",money:"",level:"",loginDate:"",loginIp:"",createDate:"",updateDate:"",updateBy:""}}),{dialogTitle:B,isShowDialog:y,dialogSubmitBtnLoading:q,dialogIsLook:h,dialogFormData:t}=T(i),b=w({deptOptions:[],levelOptions:[]}),{deptOptions:H,levelOptions:R}=T(b),L=w({name:[{required:!0,message:"请输入",trigger:["blur","change"]},{min:1,max:10,message:"10字符以内",trigger:["blur","change"]}],loginName:[{required:!0,message:"请输入",trigger:["blur","change"]},{min:1,max:10,message:"10字符以内",trigger:["blur","change"]}],userNumber:[{required:!0,message:"请输入",trigger:["blur","change"]},{type:"number",message:"请输入8位数字1",trigger:["blur","change"]},{validator:(d,e,s)=>{e?(e.toString().length!==8&&s(new Error("请输入8位数字")),s()):s(new Error("请输入"))},trigger:["blur","change"]}],userExpiryDate:[{required:!0,message:"请选择",trigger:["blur","change"]}],deptId:[{required:!0,message:"请选择",trigger:["blur","change"]}],status:[{required:!0,message:"请选择",trigger:["blur","change"]}],phone:[{required:!0,message:"请输入",trigger:"blur"},{pattern:se,message:"请输入正确手机号"}],level:[{required:!0,message:"请选择",trigger:["blur","change"]}],notes:[{required:!1,message:"请输入",trigger:["blur","change"]},{min:1,max:100,message:"100字符以内",trigger:["blur","change"]}],age:[{required:!1,message:"请输入",trigger:"blur"},{pattern:/^[1-9]\d*$/,message:"仅支持录入正整数"}],money:[{required:!1,message:"请输入",trigger:"blur"},{pattern:ie,message:"请输入最多两位小数金额"}]});D(()=>m.isShow,d=>{i.isShowDialog=d}),D(()=>i.isShowDialog,d=>{_("update:isShow",d)}),D(()=>m.title,d=>{i.dialogTitle=d.length?d:i.dialogTitle}),D(()=>m.dialogData,d=>{m.dialogType==="add"?i.dialogFormData=JSON.parse(JSON.stringify(i.initFormData)):i.dialogFormData=JSON.parse(JSON.stringify(d))}),D(()=>m.dialogType,d=>{i.dialogTitle=m.title||(d==="add"?"新增":d==="edit"?"编辑":d==="look"?"查看":i.dialogTitle),i.dialogIsLook=d==="look"},{immediate:!0}),me(()=>{i.initFormData=JSON.parse(JSON.stringify(i.dialogFormData)),E(),O()});const E=()=>{oe().then(d=>{d.code===2e4?b.deptOptions=d.data:v.warning(d.msg)})},O=()=>{de().then(d=>{d.code===2e4?b.levelOptions=d.data:v.warning(d.msg)})},J=()=>{m.dialogType==="add"&&c.value.clearValidate(),b.deptOptions.length||E(),b.levelOptions.length||O()},C=()=>{i.dialogIsLook||c.value.resetFields(),_("closed",{})},G=()=>{c.value.validate(d=>{d&&$()})},$=()=>{const d=JSON.parse(JSON.stringify(i.dialogFormData));console.log(JSON.stringify(d));const e=m.dialogType==="add"?"新增成功!":"编辑成功!";i.dialogSubmitBtnLoading=!0,re(d).then(s=>{i.dialogSubmitBtnLoading=!1,s.code===2e4?(v.success(e),i.isShowDialog=!1,_("success",{})):v.warning(s.msg)}).catch(s=>{i.dialogSubmitBtnLoading=!1,console.log(JSON.stringify(s))})};return(d,e)=>{const s=K,n=W,k=Z,N=Q,V=ee,M=ae,P=le,X=A,F=te,j=z;return u(),Y("div",null,[o(j,{title:a(B),modelValue:a(y),"onUpdate:modelValue":e[17]||(e[17]=l=>pe(y)?y.value=l:null),top:"8vh",width:"55%","close-on-click-modal":!1,onOpened:J,onClosed:C},{default:r(()=>[ge("div",be,[o(X,{ref_key:"dialogFormRef",ref:c,model:a(t),inline:!0,rules:a(L),"label-width":"120px",disabled:a(h)},{default:r(()=>[o(n,{label:"姓名:",prop:"name"},{default:r(()=>[o(s,{modelValue:a(t).name,"onUpdate:modelValue":e[0]||(e[0]=l=>a(t).name=l),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"级别:",prop:"level"},{default:r(()=>[o(N,{modelValue:a(t).level,"onUpdate:modelValue":e[1]||(e[1]=l=>a(t).level=l),placeholder:"请选择级别",filterable:"",clearable:""},{default:r(()=>[(u(!0),Y(U,null,x(a(R),l=>(u(),g(k,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"手机号:",prop:"phone"},{default:r(()=>[o(s,{modelValue:a(t).phone,"onUpdate:modelValue":e[2]||(e[2]=l=>a(t).phone=l),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"金额:",prop:"money"},{default:r(()=>[o(s,{modelValue:a(t).money,"onUpdate:modelValue":e[3]||(e[3]=l=>a(t).money=l),placeholder:"请输入金额",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"年龄:",prop:"age"},{default:r(()=>[o(s,{modelValue:a(t).age,"onUpdate:modelValue":e[4]||(e[4]=l=>a(t).age=l),placeholder:"请输入年龄",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"员工编号:",prop:"userNumber"},{default:r(()=>[o(s,{modelValue:a(t).userNumber,"onUpdate:modelValue":e[5]||(e[5]=l=>a(t).userNumber=l),modelModifiers:{number:!0},disabled:p.dialogType!=="add",placeholder:"请输入员工编号",clearable:""},null,8,["modelValue","disabled"])]),_:1}),o(n,{label:"部门:",prop:"deptId"},{default:r(()=>[o(N,{modelValue:a(t).deptId,"onUpdate:modelValue":e[6]||(e[6]=l=>a(t).deptId=l),placeholder:"请选择部门",filterable:"",clearable:""},{default:r(()=>[(u(!0),Y(U,null,x(a(H),l=>(u(),g(k,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"用户有效期至:",prop:"userExpiryDate"},{default:r(()=>[o(V,{modelValue:a(t).userExpiryDate,"onUpdate:modelValue":e[7]||(e[7]=l=>a(t).userExpiryDate=l),type:"date",placeholder:"选择日期","value-format":"YYYY-MM-DD",format:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),p.dialogType!=="add"?(u(),g(n,{key:0,label:"登录时间:",prop:"loginDate"},{default:r(()=>[o(V,{modelValue:a(t).loginDate,"onUpdate:modelValue":e[8]||(e[8]=l=>a(t).loginDate=l),disabled:"",type:"datetime",placeholder:"选择日期","value-format":"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})):f("",!0),p.dialogType!=="add"?(u(),g(n,{key:1,label:"登录IP:",prop:"loginIp"},{default:r(()=>[o(s,{modelValue:a(t).loginIp,"onUpdate:modelValue":e[9]||(e[9]=l=>a(t).loginIp=l),disabled:""},null,8,["modelValue"])]),_:1})):f("",!0),p.dialogType!=="add"?(u(),g(n,{key:2,label:"创建时间:",prop:"createDate"},{default:r(()=>[o(V,{modelValue:a(t).createDate,"onUpdate:modelValue":e[10]||(e[10]=l=>a(t).createDate=l),disabled:"",type:"datetime",placeholder:"选择日期","value-format":"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})):f("",!0),p.dialogType!=="add"?(u(),g(n,{key:3,label:"更新时间:",prop:"updateDate"},{default:r(()=>[o(V,{modelValue:a(t).updateDate,"onUpdate:modelValue":e[11]||(e[11]=l=>a(t).updateDate=l),disabled:"",type:"datetime",placeholder:"选择日期","value-format":"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})):f("",!0),p.dialogType!=="add"?(u(),g(n,{key:4,label:"操作人:",prop:"updateBy"},{default:r(()=>[o(s,{modelValue:a(t).updateBy,"onUpdate:modelValue":e[12]||(e[12]=l=>a(t).updateBy=l),disabled:""},null,8,["modelValue"])]),_:1})):f("",!0),o(n,{label:"备注:",prop:"notes"},{default:r(()=>[o(s,{modelValue:a(t).notes,"onUpdate:modelValue":e[13]||(e[13]=l=>a(t).notes=l),autosize:{minRows:5,maxRows:5},placeholder:"请输入备注",type:"textarea",maxlength:"100","show-word-limit":"",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"状态:",prop:"status"},{default:r(()=>[o(P,{modelValue:a(t).status,"onUpdate:modelValue":e[14]||(e[14]=l=>a(t).status=l)},{default:r(()=>[o(M,{value:"1"},{default:r(()=>[S("启用")]),_:1}),o(M,{value:"0"},{default:r(()=>[S("停用")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules","disabled"]),a(h)?f("",!0):(u(),Y("div",De,[o(F,{onClick:e[15]||(e[15]=l=>y.value=!1)},{default:r(()=>[S(" 取消 ")]),_:1}),o(F,{loading:a(q),type:"primary",onClick:e[16]||(e[16]=l=>G())},{default:r(()=>[S(" 保存 ")]),_:1},8,["loading"])]))])]),_:1},8,["title","modelValue"])])}}}),je=fe(ce,[["__scopeId","data-v-50a98f38"]]);export{je as default};
