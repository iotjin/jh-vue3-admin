import{b as I,I as Q,J as X,w as Y,j as Z,i as ee,R as le,S as ae,v as oe,c as te,d as ne}from"./element-plus-BsPKl9cL.js";import{o as m,c as h,a as T,d as ie,r as de,_ as V,$ as J,w as c,i as re,W as i,P as d,u as l,F as se,aa as ue,O as y,T as S,U as _,l as me,bm as pe,bk as ce}from"./@vue-Cr7qNLMI.js";import{n as ge,_ as fe}from"./index-DSZN33lD.js";import _e from"./select-tree-C4_H0Fw2.js";const be=[{value:"catalog",label:"目录"},{value:"menu",label:"菜单"},{value:"button",label:"按钮"}],ye={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Se=T("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896a448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352c-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992c13.376-19.712 35.2-28.864 66.176-28.864c23.936 0 42.944 6.336 56.32 19.712c12.672 13.376 19.712 31.68 19.712 54.912c0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408c-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76c6.336-12.672 15.488-24.64 28.16-35.2c33.792-29.568 54.208-48.576 60.544-55.616c16.896-22.528 26.048-51.392 26.048-86.592q0-64.416-42.24-101.376c-28.16-25.344-65.472-37.312-111.232-37.312m-12.672 406.208a54.27 54.27 0 0 0-38.72 14.784a49.4 49.4 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.85 54.85 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72a51.97 51.97 0 0 0-15.488-38.016a55.94 55.94 0 0 0-39.424-14.784"},null,-1),he=[Se];function Te(p,v){return m(),h("svg",ye,[...he])}const De={name:"ep-question-filled",render:Te},Ve=p=>(pe("data-v-7b439d64"),p=p(),ce(),p),ve={class:"bs-dialog"},Fe=Ve(()=>T("span",null,"菜单编码:",-1)),Oe={key:0,class:"bs-dialog-footer"},we=ie({__name:"addDialog",props:{isShow:{type:Boolean,default:!1},dialogType:{type:String,default:"add"},dialogData:{type:Object,default:()=>({})},title:{type:String,default:""},dialogTreeData:{type:Array,default:()=>[]}},emits:["update:isShow","closed","success"],setup(p,{emit:v}){const D=v,s=p,g=de(),o=V({dialogTitle:"提示",isShowDialog:!1,dialogSubmitBtnLoading:!1,dialogIsLook:!1,initFormData:{},dialogFormData:{id:"",menuType:"menu",title:"",parentId:"",parentTitle:"",sort:"",code:"",component:"",icon:"",hidden:""}}),{dialogTitle:B,isShowDialog:b,dialogSubmitBtnLoading:E,dialogIsLook:F,dialogFormData:n}=J(o),O=V({menuTypeOptions:be,menuTreeData:[],treeProps:{value:"id",label:"title",children:"children"}}),{menuTypeOptions:q,menuTreeData:x,treeProps:L}=J(O),U=V({menuType:[{required:!0,message:"请选择",trigger:["blur","change"]}],title:[{required:!0,message:"请输入",trigger:["blur","change"]},{min:1,max:32,message:"32字符以内",trigger:["blur","change"]}],parentId:[{required:!1,message:"请选择",trigger:["blur","change"]}],sort:[{required:!0,message:"请输入正确的排序号",trigger:["blur"]},{pattern:/^[1-9]\d{0,2}$/,message:"请输入0-999之间的正整数",trigger:["blur"]}],code:[{required:!0,message:"请输入",trigger:"blur"},{min:1,max:32,message:"32字符以内",trigger:"blur"}],component:[{required:!0,message:"请输入",trigger:["blur","change"]},{min:1,max:32,message:"32字符以内",trigger:["blur","change"]}],hidden:[{required:!0,message:"请选择",trigger:"blur"}]});c(()=>s.isShow,a=>{o.isShowDialog=a}),c(()=>o.isShowDialog,a=>{D("update:isShow",a)}),c(()=>s.title,a=>{o.dialogTitle=a.length?a:o.dialogTitle}),c(()=>s.dialogData,a=>{s.dialogType==="add"?o.dialogFormData=JSON.parse(JSON.stringify(o.initFormData)):o.dialogFormData=JSON.parse(JSON.stringify(a))}),c(()=>s.dialogType,a=>{o.dialogTitle=s.title||(a==="add"?"新增":a==="edit"?"编辑":a==="look"?"查看":o.dialogTitle),o.dialogIsLook=a==="look"},{immediate:!0}),c(()=>s.dialogTreeData,a=>{const e=JSON.parse(JSON.stringify(a));O.menuTreeData=w(e,"button")}),re(()=>{o.initFormData=JSON.parse(JSON.stringify(o.dialogFormData))});const C=()=>{s.dialogType==="add"&&g.value.clearValidate()},R=()=>{o.dialogIsLook||g.value.resetFields(),D("closed",{})},w=(a,e)=>a.filter(r=>r.menuType===e?!1:(r.children&&r.children.length>0&&(r.children=w(r.children,e)),!0)),$=()=>{o.dialogFormData.parentId="",o.dialogFormData.parentTitle="",o.dialogFormData.code="",o.dialogFormData.component="",o.dialogFormData.hidden="",g.value.clearValidate()},M=(a,e)=>{console.log(JSON.stringify(a)),console.log(JSON.stringify(e))},j=()=>{g.value.validate(a=>{a&&A()})},A=()=>{const a=JSON.parse(JSON.stringify(o.dialogFormData));o.dialogFormData.menuType==="catalog"&&(a.component="Layout"),s.dialogType==="edit"&&delete a.children,console.log(JSON.stringify(a));const e=s.dialogType==="add"?"新增成功!":"编辑成功!";o.dialogSubmitBtnLoading=!0,ge(a).then(r=>{o.dialogSubmitBtnLoading=!1,r.code===2e4?(I.success(e),o.isShowDialog=!1,D("success",{})):I.warning(r.msg)}).catch(r=>{o.dialogSubmitBtnLoading=!1,console.log(JSON.stringify(r))})};return(a,e)=>{const r=Q,P=X,u=Y,f=Z,z=De,G=ee,k=le,W=ae,H=oe,N=te,K=ne;return m(),h("div",null,[i(K,{title:l(B),modelValue:l(b),"onUpdate:modelValue":e[10]||(e[10]=t=>me(b)?b.value=t:null),top:"8vh",width:"55%","destroy-on-close":"","close-on-click-modal":!1,onOpened:C,onClosed:R},{default:d(()=>[T("div",ve,[i(H,{ref_key:"dialogFormRef",ref:g,model:l(n),inline:!0,rules:l(U),"label-width":"120px",disabled:l(F)},{default:d(()=>[i(u,{label:"菜单类型:",prop:"menuType"},{default:d(()=>[i(P,{modelValue:l(n).menuType,"onUpdate:modelValue":e[0]||(e[0]=t=>l(n).menuType=t),placeholder:"请选择菜单类型",disabled:p.dialogType!=="add","collapse-tags":"",clearable:"",onChange:$},{default:d(()=>[(m(!0),h(se,null,ue(l(q),t=>(m(),y(r,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),i(u,{label:"菜单名称:",prop:"title"},{default:d(()=>[i(f,{modelValue:l(n).title,"onUpdate:modelValue":e[1]||(e[1]=t=>l(n).title=t),placeholder:"请输入菜单名称",clearable:""},null,8,["modelValue"])]),_:1}),l(n).menuType!=="catalog"?(m(),y(u,{key:0,label:"上级菜单:",prop:"parentId"},{default:d(()=>[i(_e,{modelValue:l(n).parentId,"onUpdate:modelValue":e[2]||(e[2]=t=>l(n).parentId=t),placeholder:"请选择上级菜单",props:l(L),data:l(x),onSelected:M},null,8,["modelValue","props","data"])]),_:1})):S("",!0),i(u,{label:"排序:",prop:"sort"},{default:d(()=>[i(f,{modelValue:l(n).sort,"onUpdate:modelValue":e[3]||(e[3]=t=>l(n).sort=t),type:"number",placeholder:"请输入排序",clearable:""},null,8,["modelValue"])]),_:1}),i(u,{label:"菜单编码:",prop:"code"},{label:d(()=>[T("div",null,[Fe,i(G,{content:l(n).menuType!=="button"?"对应路由path和name":"定义的按钮权限标识",effect:"dark"},{default:d(()=>[i(z)]),_:1},8,["content"])])]),default:d(()=>[i(f,{modelValue:l(n).code,"onUpdate:modelValue":e[4]||(e[4]=t=>l(n).code=t),placeholder:"请输入菜单编码",clearable:""},null,8,["modelValue"])]),_:1}),l(n).menuType==="menu"?(m(),y(u,{key:1,label:"组件路径:",prop:"component",class:"input-width"},{default:d(()=>[i(f,{modelValue:l(n).component,"onUpdate:modelValue":e[5]||(e[5]=t=>l(n).component=t),placeholder:"请输入组件路径",clearable:""},{prepend:d(()=>[_("src/views/")]),_:1},8,["modelValue"])]),_:1})):S("",!0),i(u,{label:"图标:",prop:"icon"},{default:d(()=>[i(f,{modelValue:l(n).icon,"onUpdate:modelValue":e[6]||(e[6]=t=>l(n).icon=t),placeholder:"请输入图标",clearable:""},null,8,["modelValue"])]),_:1}),l(n).menuType!=="button"?(m(),y(u,{key:2,label:"状态:",prop:"hidden"},{default:d(()=>[i(W,{modelValue:l(n).hidden,"onUpdate:modelValue":e[7]||(e[7]=t=>l(n).hidden=t)},{default:d(()=>[i(k,{value:!0},{default:d(()=>[_("隐藏")]),_:1}),i(k,{value:!1},{default:d(()=>[_("显示")]),_:1})]),_:1},8,["modelValue"])]),_:1})):S("",!0)]),_:1},8,["model","rules","disabled"]),l(F)?S("",!0):(m(),h("div",Oe,[i(N,{onClick:e[8]||(e[8]=t=>b.value=!1)},{default:d(()=>[_("取消")]),_:1}),i(N,{loading:l(E),type:"primary",onClick:e[9]||(e[9]=t=>j())},{default:d(()=>[_("保存")]),_:1},8,["loading"])]))])]),_:1},8,["title","modelValue"])])}}}),ke=fe(we,[["__scopeId","data-v-7b439d64"]]),Ee=Object.freeze(Object.defineProperty({__proto__:null,default:ke},Symbol.toStringTag,{value:"Module"}));export{ke as A,Ee as a,be as d};
