import{b as v,k as z,w as A,F as W,G as K,H as Q,M as Z,N as ee,v as le,c as ae,d as oe}from"./element-plus-CS1bfuXs.js";import{g as te,a as de}from"./base-B467QsZN.js";import{s as re}from"./user-Bqq77hWN.js";import{R as ie,a as se}from"./checkUtils-DBVKUKAZ.js";import{d as ne,r as ue,_ as N,$ as U,w as D,f as me,o as u,c as Y,W as t,P as r,a as pe,u as a,F,ab as x,O as g,T as f,U as S,l as ge}from"./@vue-DBL8Ibom.js";import{_ as fe}from"./index-CN07mNdx.js";import"./lodash-es-Blijzk1b.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-BThtamsc.js";import"./dayjs-C6J0yRL_.js";import"./@intlify-CHY6szXs.js";import"./@sxzz-D9SI2xQl.js";import"./@element-plus-BmjHI8io.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./dict-D1f1JrB1.js";import"./pinia-7g9vQp6f.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-fhvlCfPF.js";import"./crypto-js-CYDAzdEe.js";import"./axios-CCb-kr4I.js";import"./js-cookie-Cz0CWeBA.js";import"./vue-i18n-B8qYdFXi.js";import"./vue-rTnkxsfK.js";import"./vue-draggable-plus-BSvTyIk2.js";import"./nprogress-yi2QV7xY.js";import"./mockjs-DsSR4jwH.js";import"./vite-plugin-mock-CDJiH8Qs.js";import"./path-to-regexp-BzK_ZY7n.js";const be={class:"bs-dialog input-width"},De={key:0,class:"bs-dialog-footer"},Ve=ne({__name:"addDialog",props:{isShow:{type:Boolean,default:!1},dialogType:{type:String,default:"add"},dialogData:{type:Object,default:()=>({})},title:{type:String,default:""}},emits:["update:isShow","closed","success"],setup(m,{emit:I}){const w=I,p=m,V=ue(),i=N({dialogTitle:"提示",isShowDialog:!1,dialogSubmitBtnLoading:!1,dialogIsLook:!1,initFormData:{},dialogFormData:{id:"",name:"",loginName:"",userNumber:"",userExpiryDate:"",deptId:"",status:"",notes:"",phone:"",age:"",money:"",level:"",loginDate:"",loginIp:"",createDate:"",updateDate:"",updateBy:""}}),{dialogTitle:B,isShowDialog:y,dialogSubmitBtnLoading:q,dialogIsLook:_,dialogFormData:o}=U(i),b=N({deptOptions:[],levelOptions:[]}),{deptOptions:H,levelOptions:R}=U(b),L=N({name:[{required:!0,message:"请输入",trigger:["blur","change"]},{min:1,max:10,message:"10字符以内",trigger:["blur","change"]}],loginName:[{required:!0,message:"请输入",trigger:["blur","change"]},{min:1,max:10,message:"10字符以内",trigger:["blur","change"]}],userNumber:[{required:!0,message:"请输入",trigger:["blur","change"]},{type:"number",message:"请输入8位数字1",trigger:["blur","change"]},{validator:(d,e,s)=>{e?(e.toString().length!==8&&s(new Error("请输入8位数字")),s()):s(new Error("请输入"))},trigger:["blur","change"]}],userExpiryDate:[{required:!0,message:"请选择",trigger:["blur","change"]}],deptId:[{required:!0,message:"请选择",trigger:["blur","change"]}],status:[{required:!0,message:"请选择",trigger:["blur","change"]}],phone:[{required:!0,message:"请输入",trigger:"blur"},{pattern:ie,message:"请输入正确手机号"}],level:[{required:!0,message:"请选择",trigger:["blur","change"]}],notes:[{required:!1,message:"请输入",trigger:["blur","change"]},{min:1,max:100,message:"100字符以内",trigger:["blur","change"]}],age:[{required:!1,message:"请输入",trigger:"blur"},{pattern:/^[1-9]\d*$/,message:"仅支持录入正整数"}],money:[{required:!1,message:"请输入",trigger:"blur"},{pattern:se,message:"请输入最多两位小数金额"}]});D(()=>p.isShow,d=>{i.isShowDialog=d}),D(()=>i.isShowDialog,d=>{w("update:isShow",d)}),D(()=>p.title,d=>{i.dialogTitle=d.length?d:i.dialogTitle}),D(()=>p.dialogData,d=>{p.dialogType==="add"?i.dialogFormData=JSON.parse(JSON.stringify(i.initFormData)):i.dialogFormData=JSON.parse(JSON.stringify(d))}),D(()=>p.dialogType,d=>{i.dialogTitle=p.title||(d==="add"?"新增":d==="edit"?"编辑":d==="look"?"查看":i.dialogTitle),i.dialogIsLook=d==="look"},{immediate:!0}),me(()=>{i.initFormData=JSON.parse(JSON.stringify(i.dialogFormData)),E(),O()});const E=()=>{te().then(d=>{d.code===2e4?b.deptOptions=d.data:v.warning(d.msg)})},O=()=>{de().then(d=>{d.code===2e4?b.levelOptions=d.data:v.warning(d.msg)})},J=()=>{p.dialogType==="add"&&V.value.clearValidate(),b.deptOptions.length||E(),b.levelOptions.length||O()},C=()=>{i.dialogIsLook||V.value.resetFields(),w("closed",{})},G=()=>{V.value.validate(d=>{d&&$()})},$=()=>{const d=JSON.parse(JSON.stringify(i.dialogFormData));console.log(JSON.stringify(d));const e=p.dialogType==="add"?"新增成功!":"编辑成功!";i.dialogSubmitBtnLoading=!0,re(d).then(s=>{i.dialogSubmitBtnLoading=!1,s.code===2e4?(v.success(e),i.isShowDialog=!1,w("success",{})):v.warning(s.msg)}).catch(s=>{i.dialogSubmitBtnLoading=!1,console.log(JSON.stringify(s))})};return(d,e)=>{const s=z,n=A,h=W,k=K,c=Q,M=Z,P=ee,X=le,T=ae,j=oe;return u(),Y("div",null,[t(j,{title:a(B),modelValue:a(y),"onUpdate:modelValue":e[18]||(e[18]=l=>ge(y)?y.value=l:null),top:"8vh",width:"55%","close-on-click-modal":!1,onOpened:J,onClosed:C},{default:r(()=>[pe("div",be,[t(X,{ref_key:"dialogFormRef",ref:V,model:a(o),inline:!0,rules:a(L),"label-width":"120px",disabled:a(_)},{default:r(()=>[t(n,{label:"姓名:",prop:"name"},{default:r(()=>[t(s,{modelValue:a(o).name,"onUpdate:modelValue":e[0]||(e[0]=l=>a(o).name=l),placeholder:"请输入姓名",clearable:""},null,8,["modelValue"])]),_:1}),t(n,{label:"用户名:",prop:"loginName"},{default:r(()=>[t(s,{modelValue:a(o).loginName,"onUpdate:modelValue":e[1]||(e[1]=l=>a(o).loginName=l),disabled:m.dialogType!=="add",placeholder:"请输入用户名",clearable:""},null,8,["modelValue","disabled"])]),_:1}),t(n,{label:"员工编号:",prop:"userNumber"},{default:r(()=>[t(s,{modelValue:a(o).userNumber,"onUpdate:modelValue":e[2]||(e[2]=l=>a(o).userNumber=l),modelModifiers:{number:!0},disabled:m.dialogType!=="add",placeholder:"请输入员工编号",clearable:""},null,8,["modelValue","disabled"])]),_:1}),t(n,{label:"部门:",prop:"deptId"},{default:r(()=>[t(k,{modelValue:a(o).deptId,"onUpdate:modelValue":e[3]||(e[3]=l=>a(o).deptId=l),placeholder:"请选择部门",filterable:"",clearable:""},{default:r(()=>[(u(!0),Y(F,null,x(a(H),l=>(u(),g(h,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(n,{label:"用户有效期至:",prop:"userExpiryDate"},{default:r(()=>[t(c,{modelValue:a(o).userExpiryDate,"onUpdate:modelValue":e[4]||(e[4]=l=>a(o).userExpiryDate=l),type:"date",placeholder:"选择日期","value-format":"YYYY-MM-DD",format:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),t(n,{label:"手机号:",prop:"phone"},{default:r(()=>[t(s,{modelValue:a(o).phone,"onUpdate:modelValue":e[5]||(e[5]=l=>a(o).phone=l),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),_:1}),t(n,{label:"级别:",prop:"level"},{default:r(()=>[t(k,{modelValue:a(o).level,"onUpdate:modelValue":e[6]||(e[6]=l=>a(o).level=l),placeholder:"请选择级别",filterable:"",clearable:""},{default:r(()=>[(u(!0),Y(F,null,x(a(R),l=>(u(),g(h,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(n,{label:"补助:",prop:"money"},{default:r(()=>[t(s,{modelValue:a(o).money,"onUpdate:modelValue":e[7]||(e[7]=l=>a(o).money=l),placeholder:"请输入金额",clearable:""},null,8,["modelValue"])]),_:1}),t(n,{label:"年龄:",prop:"age"},{default:r(()=>[t(s,{modelValue:a(o).age,"onUpdate:modelValue":e[8]||(e[8]=l=>a(o).age=l),placeholder:"请输入年龄",clearable:""},null,8,["modelValue"])]),_:1}),m.dialogType!=="add"?(u(),g(n,{key:0,label:"登录时间:",prop:"loginDate"},{default:r(()=>[t(c,{modelValue:a(o).loginDate,"onUpdate:modelValue":e[9]||(e[9]=l=>a(o).loginDate=l),disabled:"",type:"datetime",placeholder:"选择日期","value-format":"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})):f("",!0),m.dialogType!=="add"?(u(),g(n,{key:1,label:"登录IP:",prop:"loginIp"},{default:r(()=>[t(s,{modelValue:a(o).loginIp,"onUpdate:modelValue":e[10]||(e[10]=l=>a(o).loginIp=l),disabled:""},null,8,["modelValue"])]),_:1})):f("",!0),m.dialogType!=="add"?(u(),g(n,{key:2,label:"创建时间:",prop:"createDate"},{default:r(()=>[t(c,{modelValue:a(o).createDate,"onUpdate:modelValue":e[11]||(e[11]=l=>a(o).createDate=l),disabled:"",type:"datetime",placeholder:"选择日期","value-format":"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})):f("",!0),m.dialogType!=="add"?(u(),g(n,{key:3,label:"更新时间:",prop:"updateDate"},{default:r(()=>[t(c,{modelValue:a(o).updateDate,"onUpdate:modelValue":e[12]||(e[12]=l=>a(o).updateDate=l),disabled:"",type:"datetime",placeholder:"选择日期","value-format":"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})):f("",!0),m.dialogType!=="add"?(u(),g(n,{key:4,label:"操作人:",prop:"updateBy"},{default:r(()=>[t(s,{modelValue:a(o).updateBy,"onUpdate:modelValue":e[13]||(e[13]=l=>a(o).updateBy=l),disabled:""},null,8,["modelValue"])]),_:1})):f("",!0),t(n,{label:"备注:",prop:"notes"},{default:r(()=>[t(s,{modelValue:a(o).notes,"onUpdate:modelValue":e[14]||(e[14]=l=>a(o).notes=l),autosize:{minRows:5,maxRows:5},placeholder:"请输入备注",type:"textarea",maxlength:"100","show-word-limit":"",clearable:""},null,8,["modelValue"])]),_:1}),t(n,{label:"状态:",prop:"status"},{default:r(()=>[t(P,{modelValue:a(o).status,"onUpdate:modelValue":e[15]||(e[15]=l=>a(o).status=l)},{default:r(()=>[t(M,{value:"1"},{default:r(()=>[S("启用")]),_:1}),t(M,{value:"0"},{default:r(()=>[S("停用")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules","disabled"]),a(_)?f("",!0):(u(),Y("div",De,[t(T,{onClick:e[16]||(e[16]=l=>y.value=!1)},{default:r(()=>[S(" 取消 ")]),_:1}),t(T,{loading:a(q),type:"primary",onClick:e[17]||(e[17]=l=>G())},{default:r(()=>[S(" 保存 ")]),_:1},8,["loading"])]))])]),_:1},8,["title","modelValue"])])}}}),ze=fe(Ve,[["__scopeId","data-v-51a08fe6"]]);export{ze as default};
