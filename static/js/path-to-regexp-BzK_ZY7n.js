function B(t){for(var n=[],e=0;e<t.length;){var a=t[e];if(a==="*"||a==="+"||a==="?"){n.push({type:"MODIFIER",index:e,value:t[e++]});continue}if(a==="\\"){n.push({type:"ESCAPED_CHAR",index:e++,value:t[e++]});continue}if(a==="{"){n.push({type:"OPEN",index:e,value:t[e++]});continue}if(a==="}"){n.push({type:"CLOSE",index:e,value:t[e++]});continue}if(a===":"){for(var i="",r=e+1;r<t.length;){var c=t.charCodeAt(r);if(c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||c===95){i+=t[r++];continue}break}if(!i)throw new TypeError("Missing parameter name at ".concat(e));n.push({type:"NAME",index:e,value:i}),e=r;continue}if(a==="("){var o=1,s="",r=e+1;if(t[r]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(r));for(;r<t.length;){if(t[r]==="\\"){s+=t[r++]+t[r++];continue}if(t[r]===")"){if(o--,o===0){r++;break}}else if(t[r]==="("&&(o++,t[r+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(r));s+=t[r++]}if(o)throw new TypeError("Unbalanced pattern at ".concat(e));if(!s)throw new TypeError("Missing pattern at ".concat(e));n.push({type:"PATTERN",index:e,value:s}),e=r;continue}n.push({type:"CHAR",index:e,value:t[e++]})}return n.push({type:"END",index:e,value:""}),n}function G(t,n){n===void 0&&(n={});for(var e=B(t),a=n.prefixes,i=a===void 0?"./":a,r=n.delimiter,c=r===void 0?"/#?":r,o=[],s=0,f=0,l="",u=function(h){if(f<e.length&&e[f].type===h)return e[f++].value},m=function(h){var v=u(h);if(v!==void 0)return v;var x=e[f],O=x.type,V=x.index;throw new TypeError("Unexpected ".concat(O," at ").concat(V,", expected ").concat(h))},d=function(){for(var h="",v;v=u("CHAR")||u("ESCAPED_CHAR");)h+=v;return h},A=function(h){for(var v=0,x=c;v<x.length;v++){var O=x[v];if(h.indexOf(O)>-1)return!0}return!1},w=function(h){var v=o[o.length-1],x=h||(v&&typeof v=="string"?v:"");if(v&&!x)throw new TypeError('Must have text between two parameters, missing text after "'.concat(v.name,'"'));return!x||A(x)?"[^".concat(T(c),"]+?"):"(?:(?!".concat(T(x),")[^").concat(T(c),"])+?")};f<e.length;){var C=u("CHAR"),y=u("NAME"),S=u("PATTERN");if(y||S){var g=C||"";i.indexOf(g)===-1&&(l+=g,g=""),l&&(o.push(l),l=""),o.push({name:y||s++,prefix:g,suffix:"",pattern:S||w(g),modifier:u("MODIFIER")||""});continue}var p=C||u("ESCAPED_CHAR");if(p){l+=p;continue}l&&(o.push(l),l="");var D=u("OPEN");if(D){var g=d(),$=u("NAME")||"",I=u("PATTERN")||"",N=d();m("CLOSE"),o.push({name:$||(I?s++:""),pattern:$&&!I?w(g):I,prefix:g,suffix:N,modifier:u("MODIFIER")||""});continue}m("END")}return o}function T(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function j(t){return t&&t.sensitive?"":"i"}function J(t,n){return t}function K(t,n,e){var a=t.map(function(i){return X(i,n,e).source});return new RegExp("(?:".concat(a.join("|"),")"),j(e))}function z(t,n,e){return Q(G(t,e),n,e)}function Q(t,n,e){e===void 0&&(e={});for(var a=e.strict,i=a===void 0?!1:a,r=e.start,c=r===void 0?!0:r,o=e.end,s=o===void 0?!0:o,f=e.encode,l=f===void 0?function(v){return v}:f,u=e.delimiter,m=u===void 0?"/#?":u,d=e.endsWith,A=d===void 0?"":d,w="[".concat(T(A),"]|$"),C="[".concat(T(m),"]"),y=c?"^":"",S=0,g=t;S<g.length;S++){var p=g[S];if(typeof p=="string")y+=T(l(p));else{var D=T(l(p.prefix)),$=T(l(p.suffix));if(p.pattern)if(D||$)if(p.modifier==="+"||p.modifier==="*"){var I=p.modifier==="*"?"?":"";y+="(?:".concat(D,"((?:").concat(p.pattern,")(?:").concat($).concat(D,"(?:").concat(p.pattern,"))*)").concat($,")").concat(I)}else y+="(?:".concat(D,"(").concat(p.pattern,")").concat($,")").concat(p.modifier);else{if(p.modifier==="+"||p.modifier==="*")throw new TypeError('Can not repeat "'.concat(p.name,'" without a prefix and suffix'));y+="(".concat(p.pattern,")").concat(p.modifier)}else y+="(?:".concat(D).concat($,")").concat(p.modifier)}}if(s)i||(y+="".concat(C,"?")),y+=e.endsWith?"(?=".concat(w,")"):"$";else{var N=t[t.length-1],h=typeof N=="string"?C.indexOf(N[N.length-1])>-1:N===void 0;i||(y+="(?:".concat(C,"(?=").concat(w,"))?")),h||(y+="(?=".concat(C,"|").concat(w,")"))}return new RegExp(y,j(e))}function X(t,n,e){return t instanceof RegExp?J(t):Array.isArray(t)?K(t,n,e):z(t,n,e)}var R={};Object.defineProperty(R,"__esModule",{value:!0});R.TokenData=void 0;R.parse=H;var se=R.compile=te;R.match=re;R.pathToRegexp=q;R.stringify=oe;const U="/",b=t=>t,F=/^[$_\p{ID_Start}]$/u,L=/^[$\u200c\u200d\p{ID_Continue}]$/u,_="https://git.new/pathToRegexpError",Y={"{":"{","}":"}","(":"(",")":")","[":"[","]":"]","+":"+","?":"?","!":"!"};function Z(t){return t.replace(/[{}()\[\]+?!:*]/g,"\\$&")}function E(t){return t.replace(/[.+*?^${}()[\]|/\\]/g,"\\$&")}function*k(t){const n=[...t];let e=0;function a(){let i="";if(F.test(n[++e]))for(i+=n[e];L.test(n[++e]);)i+=n[e];else if(n[e]==='"'){let r=e;for(;e<n.length;){if(n[++e]==='"'){e++,r=0;break}n[e]==="\\"?i+=n[++e]:i+=n[e]}if(r)throw new TypeError(`Unterminated quote at ${r}: ${_}`)}if(!i)throw new TypeError(`Missing parameter name at ${e}: ${_}`);return i}for(;e<n.length;){const i=n[e],r=Y[i];if(r)yield{type:r,index:e++,value:i};else if(i==="\\")yield{type:"ESCAPED",index:e++,value:n[e++]};else if(i===":"){const c=a();yield{type:"PARAM",index:e,value:c}}else if(i==="*"){const c=a();yield{type:"WILDCARD",index:e,value:c}}else yield{type:"CHAR",index:e,value:n[e++]}}return{type:"END",index:e,value:""}}class ee{constructor(n){this.tokens=n}peek(){if(!this._peek){const n=this.tokens.next();this._peek=n.value}return this._peek}tryConsume(n){const e=this.peek();if(e.type===n)return this._peek=void 0,e.value}consume(n){const e=this.tryConsume(n);if(e!==void 0)return e;const{type:a,index:i}=this.peek();throw new TypeError(`Unexpected ${a} at ${i}, expected ${n}: ${_}`)}text(){let n="",e;for(;e=this.tryConsume("CHAR")||this.tryConsume("ESCAPED");)n+=e;return n}}class M{constructor(n){this.tokens=n}}R.TokenData=M;function H(t,n={}){const{encodePath:e=b}=n,a=new ee(k(t));function i(c){const o=[];for(;;){const s=a.text();s&&o.push({type:"text",value:e(s)});const f=a.tryConsume("PARAM");if(f){o.push({type:"param",name:f});continue}const l=a.tryConsume("WILDCARD");if(l){o.push({type:"wildcard",name:l});continue}if(a.tryConsume("{")){o.push({type:"group",tokens:i("}")});continue}return a.consume(c),o}}const r=i("END");return new M(r)}function te(t,n={}){const{encode:e=encodeURIComponent,delimiter:a=U}=n,i=t instanceof M?t:H(t,n),r=W(i.tokens,a,e);return function(o={}){const[s,...f]=r(o);if(f.length)throw new TypeError(`Missing parameters: ${f.join(", ")}`);return s}}function W(t,n,e){const a=t.map(i=>ne(i,n,e));return i=>{const r=[""];for(const c of a){const[o,...s]=c(i);r[0]+=o,r.push(...s)}return r}}function ne(t,n,e){if(t.type==="text")return()=>[t.value];if(t.type==="group"){const i=W(t.tokens,n,e);return r=>{const[c,...o]=i(r);return o.length?[""]:[c]}}const a=e||b;return t.type==="wildcard"&&e!==!1?i=>{const r=i[t.name];if(r==null)return["",t.name];if(!Array.isArray(r)||r.length===0)throw new TypeError(`Expected "${t.name}" to be a non-empty array`);return[r.map((c,o)=>{if(typeof c!="string")throw new TypeError(`Expected "${t.name}/${o}" to be a string`);return a(c)}).join(n)]}:i=>{const r=i[t.name];if(r==null)return["",t.name];if(typeof r!="string")throw new TypeError(`Expected "${t.name}" to be a string`);return[a(r)]}}function re(t,n={}){const{decode:e=decodeURIComponent,delimiter:a=U}=n,{regexp:i,keys:r}=q(t,n),c=r.map(o=>e===!1?b:o.type==="param"?e:s=>s.split(a).map(e));return function(s){const f=i.exec(s);if(!f)return!1;const l=f[0],u=Object.create(null);for(let m=1;m<f.length;m++){if(f[m]===void 0)continue;const d=r[m-1],A=c[m-1];u[d.name]=A(f[m])}return{path:l,params:u}}}function q(t,n={}){const{delimiter:e=U,end:a=!0,sensitive:i=!1,trailing:r=!0}=n,c=[],o=[],s=i?"":"i",l=(Array.isArray(t)?t:[t]).map(d=>d instanceof M?d:H(d,n));for(const{tokens:d}of l)for(const A of P(d,0,[])){const w=ie(A,e,c);o.push(w)}let u=`^(?:${o.join("|")})`;return r&&(u+=`(?:${E(e)}$)?`),u+=a?"$":`(?=${E(e)}|$)`,{regexp:new RegExp(u,s),keys:c}}function*P(t,n,e){if(n===t.length)return yield e;const a=t[n];if(a.type==="group"){const i=e.slice();for(const r of P(a.tokens,0,i))yield*P(t,n+1,r)}else e.push(a);yield*P(t,n+1,e)}function ie(t,n,e){let a="",i="",r=!0;for(let c=0;c<t.length;c++){const o=t[c];if(o.type==="text"){a+=E(o.value),i+=o.value,r||(r=o.value.includes(n));continue}if(o.type==="param"||o.type==="wildcard"){if(!r&&!i)throw new TypeError(`Missing text after "${o.name}": ${_}`);o.type==="param"?a+=`(${ae(n,r?"":i)}+)`:a+="([\\s\\S]+)",e.push(o),i="",r=!1;continue}}return a}function ae(t,n){return n.length<2?t.length<2?`[^${E(t+n)}]`:`(?:(?!${E(t)})[^${E(n)}])`:t.length<2?`(?:(?!${E(n)})[^${E(t)}])`:`(?:(?!${E(n)}|${E(t)})[\\s\\S])`}function oe(t){return t.tokens.map(function n(e,a,i){if(e.type==="text")return Z(e.value);if(e.type==="group")return`{${e.tokens.map(n).join("")}}`;const c=ce(e.name)&&ue(i[a+1])?e.name:JSON.stringify(e.name);if(e.type==="param")return`:${c}`;if(e.type==="wildcard")return`*${c}`;throw new TypeError(`Unexpected token: ${e}`)}).join("")}function ce(t){const[n,...e]=t;return F.test(n)?e.every(a=>L.test(a)):!1}function ue(t){return(t==null?void 0:t.type)!=="text"?!0:!L.test(t.value[0])}export{se as c,X as p};
