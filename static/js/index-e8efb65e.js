import{u as U,h as B,v as C,w as I}from"./element-plus-afa9f445.js";import{d as S,r as l,w as q,o as x,c as P,X as n,Q as m,u as a,a as s,W as p,P as K,af as M,a5 as N,V as O,n as V}from"./@vue-7d0fc2b4.js";import{b as L,r as Q}from"./index-980e0a7f.js";import{b as j}from"./vue-router-98b533fa.js";import{u as D}from"./vue-i18n-625cf0a6.js";import{_ as W}from"./index.vuevuetypescriptsetuptruelang-9434e2ea.js";import{S as f}from"./index-24a8e899.js";import{_ as X}from"./plugin-vueexport-helper-c27b6911.js";import"./lodash-es-d29772ce.js";import"./async-validator-dee29e8b.js";import"./@vueuse-d1e6df39.js";import"./dayjs-78f57161.js";import"./@intlify-999e9484.js";import"./source-map-7d7e1c08.js";import"./@element-plus-975622b8.js";import"./@ctrl-f8748455.js";import"./@sxzz-c75af06c.js";import"./escape-html-bdfaebd7.js";import"./normalize-wheel-es-ed76fb12.js";import"./pinia-4649f5ad.js";import"./vue-demi-71ba0ef2.js";import"./axios-4a70c6fc.js";import"./js-cookie-edb2da2a.js";import"./nprogress-941844a1.js";import"./mockjs-3c670f17.js";import"./vite-plugin-mock-8bbc2346.js";import"./path-to-regexp-36ea9d8d.js";import"./vue-ff9293da.js";function z(g){return["admin","editor","editor2"].indexOf(g.trim())>=0}const A={class:"login-container"},G={class:"title-container"},H={class:"title"},J={class:"svg-container"},Y={class:"svg-container"},Z={class:"tips"},ee={class:"tips"},oe={class:"tips"},te=S({__name:"index",setup(g){const{t:u,locale:k}=D(),v=j(),b=L(),d=l(!1),c=l(),w=l(),r=l("password"),i=l({username:"admin",password:"123456"}),$=l({username:[{required:!0,trigger:["blur","change"],validator:(e,o,t)=>{z(o)?t():t(new Error(u("login.usernameMsg")))}}],password:[{required:!0,trigger:["blur","change"],validator:(e,o,t)=>{o.length<6?t(new Error(u("login.passwordMsg"))):t()}}]});q(()=>k.value,e=>{V(()=>{c.value.resetFields()})});function E(){r.value==="password"?r.value="":r.value="password",V(()=>{w.value.focus()})}function h(){c.value.validate(e=>{e&&(d.value=!0,b.login(i.value).then(()=>{const o=v.query.redirect??"/";Q.push({path:o,query:F(v.query)}).then(()=>{d.value=!1})}).catch(()=>{d.value=!1}).finally(()=>{}))})}const F=e=>Object.keys(e).reduce((o,t)=>(t!=="redirect"&&(o[t]=e[t]),o),{});return(e,o)=>{const t=B,y=C,R=I,T=U;return x(),P("div",A,[n(T,{ref_key:"loginFormRef",ref:c,model:a(i),rules:a($),class:"login-form","auto-complete":"on","label-position":"left"},{default:m(()=>[s("div",G,[s("h3",H,p(e.$t("login.title")),1),n(W,{class:"text"})]),n(y,{prop:"username"},{default:m(()=>[s("span",J,[n(f,{"icon-class":"user"})]),n(t,{ref:"username",modelValue:a(i).username,"onUpdate:modelValue":o[0]||(o[0]=_=>a(i).username=_),placeholder:e.$t("login.username"),name:"username",type:"text",tabindex:"1","auto-complete":"on"},null,8,["modelValue","placeholder"])]),_:1}),n(y,{prop:"password"},{default:m(()=>[s("span",Y,[n(f,{"icon-class":"password"})]),(x(),K(t,{ref_key:"passwordRef",ref:w,key:a(r),modelValue:a(i).password,"onUpdate:modelValue":o[1]||(o[1]=_=>a(i).password=_),type:a(r),placeholder:e.$t("login.password"),name:"password",tabindex:"2","auto-complete":"on",onKeyup:M(h,["enter","native"])},null,8,["modelValue","type","placeholder","onKeyup"])),s("span",{class:"show-pwd",onClick:E},[n(f,{"icon-class":a(r)==="password"?"eye":"eye-open"},null,8,["icon-class"])])]),_:1}),n(R,{loading:a(d),type:"primary",style:{width:"100%","margin-bottom":"30px"},onClick:N(h,["prevent"])},{default:m(()=>[O(p(e.$t("login.login")),1)]),_:1},8,["loading","onClick"]),s("div",Z,[s("span",null,p(e.$t("login.textTip1")),1)]),s("div",ee,[s("span",null,p(e.$t("login.textTip2")),1)]),s("div",oe,[s("span",null,p(e.$t("login.textTip3")),1)])]),_:1},8,["model","rules"])])}}});const Ie=X(te,[["__scopeId","data-v-30d84fc7"]]);export{Ie as default};
