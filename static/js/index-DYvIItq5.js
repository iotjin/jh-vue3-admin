import{b as h,a as X,k as G,w as H,c as Y,v as Z,I as ee,J as te,R as ae,A as oe,B as le,K as se}from"./element-plus-CS1bfuXs.js";import{_ as ie}from"./index-BVxL4qyA.js";import{d as ne,r as re,_ as T,$ as E,f as de,an as ce,o as w,c as pe,W as a,P as s,u as l,af as me,U as N,a as c,Q as _,O as J,V as _e,X as ge,l as ue,bm as fe,bk as ye}from"./@vue-DBL8Ibom.js";import{b as be,d as he}from"./dict-BGtSf7-R.js";import we from"./dictDetails-BUprf2YZ.js";import{_ as ve}from"./addTypeDialog.vuevuetypescriptsetuptruelang-CYoBeWVC.js";import{_ as Se}from"./index-BSyJ-IJQ.js";import"./lodash-es-Blijzk1b.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-BThtamsc.js";import"./dayjs-C6J0yRL_.js";import"./@intlify-CHY6szXs.js";import"./@sxzz-D9SI2xQl.js";import"./@element-plus-BmjHI8io.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./addItemDialog.vuevuetypescriptsetuptruelang-BEbZTonT.js";import"./pinia-7g9vQp6f.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-fhvlCfPF.js";import"./crypto-js-CYDAzdEe.js";import"./axios-CCb-kr4I.js";import"./js-cookie-Cz0CWeBA.js";import"./vue-i18n-B8qYdFXi.js";import"./vue-rTnkxsfK.js";import"./vue-draggable-plus-BSvTyIk2.js";import"./nprogress-yi2QV7xY.js";import"./mockjs-DsSR4jwH.js";import"./vite-plugin-mock-CDJiH8Qs.js";import"./path-to-regexp-BzK_ZY7n.js";const O=g=>(fe("data-v-cf78ff9c"),g=g(),ye(),g),De={class:"bs-page-body"},ke=O(()=>c("div",{class:"mt10"},null,-1)),xe={class:"bs-page-table",style:{padding:"0px"}},Ce={class:"bs-table-btns"},Te=["onClick"],Ee={style:{color:"#00a0e9","text-decoration":"underline"}},Ne=O(()=>c("div",{slot:"header"},[c("span",{style:{"font-size":"20px"}},"字典详情")],-1)),Je="total, sizes, prev, pager, next",Oe=ne({__name:"index",setup(g){const R=re(),i=T({tableTotal:0,tableLoading:!1,tableData:[],queryParams:{page:1,limit:20,keyword:""},selectedRows:[],selectedData:{}}),{tableTotal:v,tableLoading:B,tableData:L,queryParams:r,selectedRows:Re,selectedData:P}=E(i),n=T({isShowDialog:!1,dialogType:"",dialogFormData:{}}),{isShowDialog:f,dialogType:F,dialogFormData:I}=E(n);de(()=>{m()});const m=()=>{var t=JSON.parse(JSON.stringify(i.queryParams));console.log(JSON.stringify(t)),i.tableLoading=!0,be(t).then(e=>{i.tableLoading=!1,e.code===2e4?(i.tableData=e.data,i.tableTotal=e.total):h.warning(e.msg)}).catch(e=>{i.tableLoading=!1,console.log(JSON.stringify(e))})},S=()=>{i.queryParams.page=1,m()},D=t=>t.builtin==="0",V=(t,e)=>{i.selectedData=JSON.parse(JSON.stringify(t))},q=()=>{n.dialogType="add",n.dialogFormData={},n.isShowDialog=!0},$=t=>{n.dialogType="edit",n.dialogFormData=JSON.parse(JSON.stringify(t)),n.isShowDialog=!0},A=t=>{n.dialogType="look",n.dialogFormData=JSON.parse(JSON.stringify(t)),n.isShowDialog=!0},U=t=>{var e="";t&&t.id?e=t.name:e=i.selectedRows.map(d=>d.name).join(","),X.confirm(`确定要删除字典类型 ${e} ，此操作将永久删除, 是否继续?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var d={ids:[]};if(t&&t.id)d.ids=[t.id];else{const u=i.selectedRows.map(p=>p.id);d.ids=u}z(d)})},z=t=>{console.log(JSON.stringify(t)),he(t).then(e=>{e.code===2e4?(h.success("删除成功!"),m()):h.warning(e.msg)})};return(t,e)=>{const d=G,u=H,p=Y,K=Z,y=ee,M=te,j=ie,k=ae,x=oe,Q=le,b=ce("hasPerm"),W=se;return w(),pe("div",De,[ke,a(Q,{gutter:10},{default:s(()=>[a(x,{span:8},{default:s(()=>[a(k,null,{default:s(()=>[a(K,{inline:!0,model:l(r),class:"bs-form-search"},{default:s(()=>[a(u,{style:{"margin-right":"25px"},class:"search-input"},{default:s(()=>[a(d,{modelValue:l(r).keyword,"onUpdate:modelValue":e[0]||(e[0]=o=>l(r).keyword=o),maxlength:"20",placeholder:"字典名称 / 类型",clearable:"",onKeyup:me(S,["enter","native"])},null,8,["modelValue"])]),_:1}),a(u,null,{default:s(()=>[a(p,{class:"bs-form-btn",style:{"margin-left":"0px"},type:"primary",onClick:S},{default:s(()=>[N("查询")]),_:1})]),_:1})]),_:1},8,["model"]),c("div",xe,[c("div",Ce,[_((w(),J(p,{type:"primary",icon:"i-ep-plus",onClick:q},{default:s(()=>[N(" 新增 ")]),_:1})),[[b,["dict-type-add"]]])]),_((w(),J(M,{ref_key:"tableRef",ref:R,class:"bs-table table-class","highlight-current-row":"",data:l(L),"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"},onCurrentChange:V},{default:s(()=>[a(y,{label:"字典名称",width:""},{default:s(o=>[c("span",{onClick:C=>A(o.row)},[c("a",Ee,_e(o.row.name),1)],8,Te)]),_:1}),a(y,{prop:"type",label:"字典类型",width:""}),a(y,{fixed:"right",label:"操作",width:"120"},{default:s(o=>[_(a(p,{size:"small",icon:"i-ep-edit",disabled:!D(o.row),onClick:C=>$(o.row)},null,8,["disabled","onClick"]),[[b,["dict-type-edit"]]]),_(a(p,{size:"small",icon:"i-ep-delete",type:"danger",disabled:!D(o.row),onClick:C=>U(o.row)},null,8,["disabled","onClick"]),[[b,["dict-type-delete"]]])]),_:1})]),_:1},8,["data"])),[[W,l(B)]]),_(a(j,{layout:Je,total:l(v),page:l(r).page,"onUpdate:page":e[1]||(e[1]=o=>l(r).page=o),limit:l(r).limit,"onUpdate:limit":e[2]||(e[2]=o=>l(r).limit=o),onPagination:m},null,8,["total","page","limit"]),[[ge,l(v)>0]])])]),_:1})]),_:1}),a(x,{span:16},{default:s(()=>[a(k,null,{default:s(()=>[Ne,a(we,{data:l(P)},null,8,["data"])]),_:1})]),_:1})]),_:1}),a(ve,{"dialog-type":l(F),"is-show":l(f),"onUpdate:isShow":e[3]||(e[3]=o=>ue(f)?f.value=o:null),"dialog-data":l(I),onSuccess:m},null,8,["dialog-type","is-show","dialog-data"])])}}}),dt=Se(Oe,[["__scopeId","data-v-cf78ff9c"]]);export{dt as default};
