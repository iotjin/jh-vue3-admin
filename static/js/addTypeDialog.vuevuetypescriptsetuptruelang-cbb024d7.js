import{c as D,h as R,v as C,P as U,Q as I,u as q,w as $,k as M}from"./element-plus-52aa6b43.js";import{s as P}from"./dict-c48f1e0b.js";import{d as Q,r as j,$ as w,a0 as G,w as m,i as X,o as b,c as k,X as t,Q as s,a as z,u as a,P as A,V as f,U as F,l as H}from"./@vue-7d0fc2b4.js";const K={class:"bs-dialog"},W={key:0,class:"bs-dialog-footer"},le=Q({__name:"addTypeDialog",props:{isShow:{type:Boolean,default:!1},dialogType:{type:String,default:"add"},dialogData:{type:Object,default:()=>({})},title:{type:String,default:""}},emits:["update:isShow","closed","success"],setup(y,{emit:c}){const r=y,g=j(),e=w({dialogTitle:"提示",isShowDialog:!1,dialogSubmitBtnLoading:!1,dialogIsLook:!1,initFormData:{},dialogFormData:{id:"",name:"",type:"",sort:"",builtin:"0",notes:""}}),{dialogTitle:T,isShowDialog:p,dialogSubmitBtnLoading:N,dialogIsLook:_,dialogFormData:d}=G(e),O=w({name:[{required:!0,message:"请输入",trigger:["blur"]},{min:1,max:32,message:"32字符以内",trigger:["blur"]}],type:[{required:!0,message:"请输入",trigger:["blur"]},{min:1,max:32,message:"32字符以内",trigger:["blur"]}],sort:[{required:!0,message:"请输入正确的排序号",trigger:["blur"]},{pattern:/^[1-9]\d{0,2}$/,message:"请输入0-999之间的正整数",trigger:["blur"]}]});m(()=>r.isShow,l=>{e.isShowDialog=l}),m(()=>e.isShowDialog,l=>{c("update:isShow",l)}),m(()=>r.title,l=>{e.dialogTitle=l.length?l:e.dialogTitle}),m(()=>r.dialogData,l=>{r.dialogType==="add"?e.dialogFormData=JSON.parse(JSON.stringify(e.initFormData)):e.dialogFormData=JSON.parse(JSON.stringify(l))}),m(()=>r.dialogType,l=>{e.dialogTitle=r.title||(l==="add"?"新增":l==="edit"?"编辑":l==="look"?"查看":e.dialogTitle),e.dialogIsLook=l==="look"},{immediate:!0}),X(()=>{e.initFormData=JSON.parse(JSON.stringify(e.dialogFormData))});const h=()=>{r.dialogType==="add"&&g.value.clearValidate()},v=()=>{e.dialogIsLook||g.value.resetFields(),c("closed",{})},B=()=>{g.value.validate(l=>{l&&J()})},J=()=>{const l=JSON.parse(JSON.stringify(e.dialogFormData));console.log(JSON.stringify(l));const o=r.dialogType==="add"?"新增成功!":"编辑成功!";e.dialogSubmitBtnLoading=!0,P(l).then(n=>{e.dialogSubmitBtnLoading=!1,n.code===2e4?(D.success(o),e.isShowDialog=!1,c("success",{})):D.warning(n.msg)}).catch(n=>{e.dialogSubmitBtnLoading=!1,console.log(JSON.stringify(n))})};return(l,o)=>{const n=R,u=C,S=U,x=I,E=q,V=$,L=M;return b(),k("div",null,[t(L,{title:a(T),modelValue:a(p),"onUpdate:modelValue":o[7]||(o[7]=i=>H(p)?p.value=i:null),top:"8vh",width:"55%","close-on-click-modal":!1,onOpened:h,onClosed:v},{default:s(()=>[z("div",K,[t(E,{ref_key:"dialogFormRef",ref:g,model:a(d),inline:!0,rules:a(O),"label-width":"120px",disabled:a(_)},{default:s(()=>[t(u,{label:"字典名称:",prop:"name"},{default:s(()=>[t(n,{modelValue:a(d).name,"onUpdate:modelValue":o[0]||(o[0]=i=>a(d).name=i),placeholder:"请输入字典名称",clearable:""},null,8,["modelValue"])]),_:1}),t(u,{label:"字典类型:",prop:"type"},{default:s(()=>[t(n,{modelValue:a(d).type,"onUpdate:modelValue":o[1]||(o[1]=i=>a(d).type=i),placeholder:"请输入字典类型",clearable:""},null,8,["modelValue"])]),_:1}),t(u,{label:"排序:",prop:"sort"},{default:s(()=>[t(n,{modelValue:a(d).sort,"onUpdate:modelValue":o[2]||(o[2]=i=>a(d).sort=i),type:"number",placeholder:"请输入排序",clearable:""},null,8,["modelValue"])]),_:1}),y.dialogType!=="add"?(b(),A(u,{key:0,label:"是否内置:",prop:"builtin"},{default:s(()=>[t(x,{modelValue:a(d).builtin,"onUpdate:modelValue":o[3]||(o[3]=i=>a(d).builtin=i)},{default:s(()=>[t(S,{label:"1",disabled:""},{default:s(()=>[f("是")]),_:1}),t(S,{label:"0",disabled:""},{default:s(()=>[f("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})):F("",!0),t(u,{label:"备注:",prop:"notes"},{default:s(()=>[t(n,{modelValue:a(d).notes,"onUpdate:modelValue":o[4]||(o[4]=i=>a(d).notes=i),placeholder:"请输入备注",type:"textarea",maxlength:"100","show-word-limit":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules","disabled"]),a(_)?F("",!0):(b(),k("div",W,[t(V,{onClick:o[5]||(o[5]=i=>p.value=!1)},{default:s(()=>[f(" 取消 ")]),_:1}),t(V,{loading:a(N),type:"primary",onClick:o[6]||(o[6]=i=>B())},{default:s(()=>[f(" 保存 ")]),_:1},8,["loading"])]))])]),_:1},8,["title","modelValue"])])}}});export{le as _};
